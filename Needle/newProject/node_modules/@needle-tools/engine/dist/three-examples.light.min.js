import{Mesh as H,SphereGeometry as pn,Vector3 as N,MeshBasicMaterial as It,Node as Ho,PerspectiveCamera as Os,NodeFrame as jo,ShaderLib as Et,NodeBuilder as qo,GLSLNodeParser as zo,UniformsUtils as un,UniformsLib as fs,normalView as Ko,defaultShaderStages as Hs,ShaderChunk as Yo,Material as Jt,TrianglesDrawMode as Jo,TriangleFanDrawMode as fn,TriangleStripDrawMode as yi,Matrix4 as oe,Loader as Dt,LoaderUtils as Wt,FileLoader as gt,Color as Be,LinearSRGBColorSpace as Ve,SpotLight as Qi,PointLight as mn,DirectionalLight as vi,SRGBColorSpace as re,MeshPhysicalMaterial as Ct,Vector2 as Fe,InstancedMesh as Wo,InstancedBufferAttribute as Vo,Object3D as Bt,TextureLoader as bn,ImageBitmapLoader as Xo,BufferAttribute as nt,InterleavedBuffer as Zo,LinearFilter as dt,LinearMipmapLinearFilter as js,RepeatWrapping as Vt,PointsMaterial as ms,LineBasicMaterial as kt,MeshStandardMaterial as In,DoubleSide as En,PropertyBinding as pt,BufferGeometry as At,SkinnedMesh as Cn,LineSegments as qs,Line as ut,LineLoop as $o,Points as zs,Group as Xt,MathUtils as Ee,OrthographicCamera as xi,Skeleton as Si,AnimationClip as Bn,Bone as wn,InterpolateLinear as bs,ColorManagement as Xe,Quaternion as we,NearestFilter as Ri,NearestMipmapNearestFilter as Ti,LinearMipmapNearestFilter as Di,NearestMipmapLinearFilter as ki,ClampToEdgeWrapping as Ks,MirroredRepeatWrapping as Mi,InterpolateDiscrete as yn,FrontSide as _i,InterleavedBufferAttribute as Zt,Texture as Qn,VectorKeyframeTrack as Ys,NumberKeyframeTrack as Js,QuaternionKeyframeTrack as Ws,Box3 as Vs,Sphere as vn,Interpolant as er,CompressedCubeTexture as tr,UnsignedByteType as ft,CompressedArrayTexture as sr,CompressedTexture as Is,RGBAFormat as Pt,RGBA_ASTC_4x4_Format as Fi,RGBA_BPTC_Format as nr,RGBA_ETC2_EAC_Format as ir,RGBA_PVRTC_4BPPV1_Format as ar,RGBA_S3TC_DXT5_Format as or,RGB_ETC1_Format as rr,RGB_ETC2_Format as Ar,RGB_PVRTC_4BPPV1_Format as cr,RGBA_S3TC_DXT1_Format as lr,FloatType as wt,HalfFloatType as it,DataTexture as hr,Data3DTexture as gr,DisplayP3ColorSpace as dr,LinearDisplayP3ColorSpace as pr,NoColorSpace as Xs,RGFormat as Es,RedFormat as os,RGBA_ASTC_6x6_Format as Li,ExtrudeGeometry as ur,ShapePath as fr,Raycaster as xn,Euler as Ot,CylinderGeometry as Ze,BoxGeometry as Ye,Float32BufferAttribute as Re,OctahedronGeometry as Zs,TorusGeometry as Cs,Controls as Ni,PlaneGeometry as Sn,DataTextureLoader as Ui,DataUtils as rs,Vector4 as Mt,Curve as mr,MeshPhongMaterial as Bs,MeshLambertMaterial as br,EquirectangularReflectionMapping as Ir,AmbientLight as Er,Uint16BufferAttribute as Cr,Matrix3 as Gi,ShapeUtils as Br,DefaultLoadingManager as wr,Ray as yr,Plane as Qr,MOUSE as As,TOUCH as cs,Spherical as Pi,ShaderMaterial as Oi,Uniform$1 as vr,Scene as Rn,WebGLRenderer as xr,CanvasTexture as Hi,REVISION as Sr,Source as Rr,InstancedBufferGeometry as Tr,InstancedInterleavedBuffer as Tn,WireframeGeometry as Dr,Line3 as kr,ColorKeyframeTrack as Mr}from"./three.light.min.js";class _r extends H{constructor(e,t,n,s=128){if(t<=0||n<=0||s<=0)throw new Error("GroundedSkybox height, radius, and resolution must be positive.");const i=new pn(n,2*s,s);i.scale(1,1,-1);const a=i.getAttribute("position"),r=new N;for(let A=0;A<a.count;++A)if(r.fromBufferAttribute(a,A),r.y<0){const c=-t*3/2,l=r.y<c?-t/r.y:1-r.y*r.y/(3*c*c);r.multiplyScalar(l),r.toArray(a.array,3*A)}a.needsUpdate=!0,super(i,new It({map:e,depthWrite:!1}))}}class Fr extends Ho{constructor(e){super(e.nodeType),this.node=null,this.source=null,this.target=null,this.inclusionType="replace",Object.assign(this,e)}generate(e){return this.node.build(e,this.getNodeType(e))}}const fe=Fr,$e=new jo;$e.camera=new Os;const ji={LineBasicNodeMaterial:Et.basic,MeshBasicNodeMaterial:Et.basic,PointsNodeMaterial:Et.points,MeshStandardNodeMaterial:Et.standard,MeshPhysicalNodeMaterial:Et.physical,MeshPhongNodeMaterial:Et.phong},Lr={atan2:"atan"},Nr={low:"lowp",medium:"mediump",high:"highp"};function Ht(o){return`#include <${o}>`}function ws(o){return`${o}Shader`}class Ur extends qo{constructor(e,t,n,s=null){super(e,t,new zo,null,s),this.shader=n,this.slots={vertex:[],fragment:[]},this._parseShaderLib(),this._parseInclude("fragment","lights_physical_fragment","clearcoat_normal_fragment_begin","transmission_fragment"),this._parseObject(),this._sortSlotsToFlow(),this.useComparisonMethod=!0}getMethod(e){return Lr[e]||e}addSlot(e,t){this.slots[e].push(t)}_parseShaderLib(){const e=this.material;let t=e.type;if(e.isMeshPhysicalNodeMaterial?t="MeshPhysicalNodeMaterial":e.isMeshStandardNodeMaterial?t="MeshStandardNodeMaterial":e.isMeshPhongNodeMaterial?t="MeshPhongNodeMaterial":e.isMeshBasicNodeMaterial?t="MeshBasicNodeMaterial":e.isPointsNodeMaterial?t="PointsNodeMaterial":e.isLineBasicNodeMaterial&&(t="LineBasicNodeMaterial"),ji[t]!==void 0){const n=ji[t],s=this.shader;s.vertexShader=n.vertexShader,s.fragmentShader=n.fragmentShader,s.uniforms=un.merge([n.uniforms,fs.lights])}}_parseObject(){const{material:e,renderer:t}=this;this.addSlot("fragment",new fe({node:Ko,nodeType:"vec3",source:"void main() {",target:"vec3 TransformedNormalView = %RESULT%;",inclusionType:"append"})),t.toneMappingNode&&t.toneMappingNode.isNode===!0&&this.addSlot("fragment",new fe({node:e.colorNode,nodeType:"vec4",source:Ht("tonemapping_fragment"),target:""})),e.colorNode&&e.colorNode.isNode&&this.addSlot("fragment",new fe({node:e.colorNode,nodeType:"vec4",source:"vec4 diffuseColor = vec4( diffuse, opacity );",target:"vec4 diffuseColor = %RESULT%; diffuseColor.a *= opacity;"})),e.opacityNode&&e.opacityNode.isNode&&this.addSlot("fragment",new fe({node:e.opacityNode,nodeType:"float",source:Ht("alphatest_fragment"),target:"diffuseColor.a = %RESULT%;",inclusionType:"append"})),e.normalNode&&e.normalNode.isNode&&this.addSlot("fragment",new fe({node:e.normalNode,nodeType:"vec3",source:Ht("normal_fragment_begin"),target:"normal = %RESULT%;",inclusionType:"append"})),e.emissiveNode&&e.emissiveNode.isNode&&this.addSlot("fragment",new fe({node:e.emissiveNode,nodeType:"vec3",source:Ht("emissivemap_fragment"),target:"totalEmissiveRadiance = %RESULT%;",inclusionType:"append"})),e.isMeshStandardNodeMaterial&&(e.metalnessNode&&e.metalnessNode.isNode&&this.addSlot("fragment",new fe({node:e.metalnessNode,nodeType:"float",source:Ht("metalnessmap_fragment"),target:"metalnessFactor = %RESULT%;",inclusionType:"append"})),e.roughnessNode&&e.roughnessNode.isNode&&this.addSlot("fragment",new fe({node:e.roughnessNode,nodeType:"float",source:Ht("roughnessmap_fragment"),target:"roughnessFactor = %RESULT%;",inclusionType:"append"})),e.isMeshPhysicalNodeMaterial&&(e.clearcoatNode&&e.clearcoatNode.isNode?(this.addSlot("fragment",new fe({node:e.clearcoatNode,nodeType:"float",source:"material.clearcoat = clearcoat;",target:"material.clearcoat = %RESULT%;"})),e.clearcoatRoughnessNode&&e.clearcoatRoughnessNode.isNode&&this.addSlot("fragment",new fe({node:e.clearcoatRoughnessNode,nodeType:"float",source:"material.clearcoatRoughness = clearcoatRoughness;",target:"material.clearcoatRoughness = %RESULT%;"})),e.clearcoatNormalNode&&e.clearcoatNormalNode.isNode&&this.addSlot("fragment",new fe({node:e.clearcoatNormalNode,nodeType:"vec3",source:"vec3 clearcoatNormal = nonPerturbedNormal;",target:"vec3 clearcoatNormal = %RESULT%;"})),e.defines.USE_CLEARCOAT=""):delete e.defines.USE_CLEARCOAT,e.sheenNode&&e.sheenNode.isNode?(this.addSlot("fragment",new fe({node:e.sheenNode,nodeType:"vec3",source:"material.sheenColor = sheenColor;",target:"material.sheenColor = %RESULT%;"})),e.sheenRoughnessNode&&e.sheenRoughnessNode.isNode&&this.addSlot("fragment",new fe({node:e.sheenRoughnessNode,nodeType:"float",source:"material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );",target:"material.sheenRoughness = clamp( %RESULT%, 0.07, 1.0 );"})),e.defines.USE_SHEEN=""):delete e.defines.USE_SHEEN,e.iridescenceNode&&e.iridescenceNode.isNode?(this.addSlot("fragment",new fe({node:e.iridescenceNode,nodeType:"float",source:"material.iridescence = iridescence;",target:"material.iridescence = %RESULT%;"})),e.iridescenceIORNode&&e.iridescenceIORNode.isNode&&this.addSlot("fragment",new fe({node:e.iridescenceIORNode,nodeType:"float",source:"material.iridescenceIOR = iridescenceIOR;",target:"material.iridescenceIOR = %RESULT%;"})),e.iridescenceThicknessNode&&e.iridescenceThicknessNode.isNode&&this.addSlot("fragment",new fe({node:e.iridescenceThicknessNode,nodeType:"float",source:"material.iridescenceThickness = iridescenceThicknessMaximum;",target:"material.iridescenceThickness = %RESULT%;"})),e.defines.USE_IRIDESCENCE=""):delete e.defines.USE_IRIDESCENCE,e.iorNode&&e.iorNode.isNode&&this.addSlot("fragment",new fe({node:e.iorNode,nodeType:"float",source:"material.ior = ior;",target:"material.ior = %RESULT%;"})),e.specularColorNode&&e.specularColorNode.isNode&&this.addSlot("fragment",new fe({node:e.specularColorNode,nodeType:"vec3",source:"vec3 specularColorFactor = specularColor;",target:"vec3 specularColorFactor = %RESULT%;"})),e.specularIntensityNode&&e.specularIntensityNode.isNode&&this.addSlot("fragment",new fe({node:e.specularIntensityNode,nodeType:"float",source:"float specularIntensityFactor = specularIntensity;",target:"float specularIntensityFactor = %RESULT%;"})),e.transmissionNode&&e.transmissionNode.isNode?(this.addSlot("fragment",new fe({node:e.transmissionNode,nodeType:"float",source:"material.transmission = transmission;",target:"material.transmission = %RESULT%;"})),e.thicknessNode&&e.thicknessNode.isNode&&this.addSlot("fragment",new fe({node:e.thicknessNode,nodeType:"float",source:"material.thickness = thickness;",target:"material.thickness = %RESULT%;"})),e.attenuationDistanceNode&&e.attenuationDistanceNode.isNode&&this.addSlot("fragment",new fe({node:e.attenuationDistanceNode,nodeType:"float",source:"material.attenuationDistance = attenuationDistance;",target:"material.attenuationDistance = %RESULT%;"})),e.attenuationColorNode&&e.attenuationColorNode.isNode&&this.addSlot("fragment",new fe({node:e.attenuationColorNode,nodeType:"vec3",source:"material.attenuationColor = attenuationColor;",target:"material.attenuationColor = %RESULT%;"})),e.transmission=1,e.defines.USE_TRANSMISSION=""):(e.transmission=0,delete e.defines.USE_TRANSMISSION))),e.positionNode&&e.positionNode.isNode&&this.addSlot("vertex",new fe({node:e.positionNode,nodeType:"vec3",source:Ht("begin_vertex"),target:"transformed = %RESULT%;",inclusionType:"append"})),e.sizeNode&&e.sizeNode.isNode&&this.addSlot("vertex",new fe({node:e.sizeNode,nodeType:"float",source:"gl_PointSize = size;",target:"gl_PointSize = %RESULT%;"}))}generateTexture(e,t,n){return e.isTextureCube?`textureCube( ${t}, ${n} )`:`texture2D( ${t}, ${n} )`}generateTextureLevel(e,t,n,s){return`textureLod( ${t}, ${n}, ${s} )`}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),s=[];for(const i of t.inputs)s.push(this.getType(i.type)+" "+i.name);return`${this.getType(t.type)} ${t.name}( ${s.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}getUniforms(e){const t=this.uniforms[e];let n="";for(const s of t){if(/^(modelViewMatrix|projectionMatrix)$/.test(s.name))continue;let i=null;s.type==="texture"?i=`sampler2D ${s.name}; `:s.type==="cubeTexture"?i=`samplerCube ${s.name}; `:i=`${this.getVectorType(s.type)} ${s.name}; `;const a=s.node.precision;a!==null?i="uniform "+Nr[a]+" "+i:i="uniform "+i,n+=i}return n}getAttributes(e){let t="";if(e==="vertex"){const n=this.attributes;for(const s of n)/^(position|normal|uv[1-3]?)$/.test(s.name)||(t+=`attribute ${s.type} ${s.name}; `)}return t}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex")for(const s of n)t+=`${s.needsInterpolation?"varying":"/*varying*/"} ${s.type} ${s.name}; `;else if(e==="fragment")for(const s of n)s.needsInterpolation&&(t+=`varying ${s.type} ${s.name}; `);return t}addCode(e,t,n,s=this){const i=ws(e);let a=s[i];const r=a.indexOf(t);if(r!==-1){const A=a.substring(0,r+t.length),c=a.substring(r+t.length);a=`${A}
${n}
${c}`}s[i]=a}replaceCode(e,t,n,s=this){const i=ws(e);s[i]=s[i].replaceAll(t,n)}getVertexIndex(){return"gl_VertexID"}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord"}isFlipY(){return!0}buildCode(){const e={};for(const t of Hs){const n=this.getUniforms(t),s=this.getAttributes(t),i=this.getVaryings(t),a=this.getVars(t),r=this.getCodes(t);e[t]=`${this.getSignature()}
// <node_builder>

// uniforms
${n}

// attributes
${s}

// varyings
${i}

// vars
${a}

// codes
${r}

// </node_builder>

${this.shader[ws(t)]}
`}this.vertexShader=e.vertex,this.fragmentShader=e.fragment}build(){return super.build(!1),this._addSnippets(),this._addUniforms(),this._updateUniforms(),this.shader.vertexShader=this.vertexShader,this.shader.fragmentShader=this.fragmentShader,this}_parseInclude(e,...t){for(const n of t){const s=Ht(n),i=Yo[n],a=ws(e);this.shader[a]=this.shader[a].replaceAll(s,i)}}_sortSlotsToFlow(){for(const e of Hs){const t=this.shader[ws(e)],n=this.slots[e].sort((s,i)=>t.indexOf(s.source)>t.indexOf(i.source)?1:-1);for(const s of n)this.addFlow(e,s)}}_addSnippets(){for(const e of Hs){for(const t of this.slots[e]){const n=this.getFlowData(t),s=t.inclusionType,i=t.source,a=n.code+`
	`+t.target.replace("%RESULT%",n.result);s==="append"?this.addCode(e,i,a):s==="replace"?this.replaceCode(e,i,a):console.warn(`Inclusion type "${s}" not compatible.`)}this.addCode(e,"main() {",`
	`+this.flowCode[e])}}_addUniforms(){for(const e of Hs)for(const t of this.uniforms[e])this.shader.uniforms[t.name]=t}_updateUniforms(){$e.object=this.object,$e.renderer=this.renderer,$e.material=this.material,$e.scene=this.scene;for(const e of this.updateNodes)$e.updateNode(e)}}const qi=new WeakMap;Jt.prototype.onBuild=function(o,e,t){const n=this;if(n.isNodeMaterial===!0){let s;try{s=new Ur(o,t,e,n).build(),qi.set(n,s)}catch(i){console.error("Material.prototype.onBuild: ",i)}}},Jt.prototype.onBeforeRender=function(o,e,t,n,s){const i=qi.get(this);if(i!==void 0){$e.material=this,$e.camera=t,$e.object=s,$e.renderer=o,$e.scene=e,$e.geometry=n;const a=i.updateNodes;if(a.length>0){o.state.useProgram(null);for(const r of a)$e.updateNode(r)}}};var ys=function(){var o=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(l){l.preventDefault(),n(++o%e.children.length)},!1);function t(l){return e.appendChild(l.dom),l}function n(l){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===l?"block":"none";o=l}var s=(performance||Date).now(),i=s,a=0,r=t(new ys.Panel("FPS","#0ff","#002")),A=t(new ys.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new ys.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:t,showPanel:n,begin:function(){s=(performance||Date).now()},end:function(){a++;var l=(performance||Date).now();if(A.update(l-s,200),l>=i+1e3&&(r.update(a*1e3/(l-i),100),i=l,a=0,c)){var h=performance.memory;c.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return l},update:function(){s=this.end()},domElement:e,setMode:n}};ys.Panel=function(o,e,t){var n=1/0,s=0,i=Math.round,a=i(window.devicePixelRatio||1),r=80*a,A=48*a,c=3*a,l=2*a,h=3*a,d=15*a,p=74*a,u=30*a,m=document.createElement("canvas");m.width=r,m.height=A,m.style.cssText="width:80px;height:48px";var b=m.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=t,b.fillRect(0,0,r,A),b.fillStyle=e,b.fillText(o,c,l),b.fillRect(h,d,p,u),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(h,d,p,u),{dom:m,update:function(I,C){n=Math.min(n,I),s=Math.max(s,I),b.fillStyle=t,b.globalAlpha=1,b.fillRect(0,0,r,d),b.fillStyle=e,b.fillText(i(I)+" "+o+" ("+i(n)+"-"+i(s)+")",c,l),b.drawImage(m,h+a,d,p-a,u,h,d,p-a,u),b.fillRect(h+p-a,d,a,u),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(h+p-a,d,a,i((1-I/C)*u))}}};function Gr(o,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=o.getIndex(),s=o.getAttribute("position"),i=n?n.count:s.count;let a=0;const r=Object.keys(o.attributes),A={},c={},l=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let C=0,E=r.length;C<E;C++){const w=r[C],y=o.attributes[w];A[w]=new y.constructor(new y.array.constructor(y.count*y.itemSize),y.itemSize,y.normalized);const S=o.morphAttributes[w];S&&(c[w]||(c[w]=[]),S.forEach((R,x)=>{const D=new R.array.constructor(R.count*R.itemSize);c[w][x]=new R.constructor(D,R.itemSize,R.normalized)}))}const p=e*.5,u=Math.log10(1/e),m=Math.pow(10,u),b=p*m;for(let C=0;C<i;C++){const E=n?n.getX(C):C;let w="";for(let y=0,S=r.length;y<S;y++){const R=r[y],x=o.getAttribute(R),D=x.itemSize;for(let G=0;G<D;G++)w+=`${~~(x[h[G]](E)*m+b)},`}if(w in t)l.push(t[w]);else{for(let y=0,S=r.length;y<S;y++){const R=r[y],x=o.getAttribute(R),D=o.morphAttributes[R],G=x.itemSize,W=A[R],V=c[R];for(let J=0;J<G;J++){const Z=h[J],$=d[J];if(W[$](a,x[Z](E)),D)for(let z=0,K=D.length;z<K;z++)V[z][$](a,D[z][Z](E))}}t[w]=a,l.push(a),a++}}const I=o.clone();for(const C in o.attributes){const E=A[C];if(I.setAttribute(C,new E.constructor(E.array.slice(0,a*E.itemSize),E.itemSize,E.normalized)),C in c)for(let w=0;w<c[C].length;w++){const y=c[C][w];I.morphAttributes[C][w]=new y.constructor(y.array.slice(0,a*y.itemSize),y.itemSize,y.normalized)}}return I.setIndex(l),I}function zi(o,e){if(e===Jo)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),o;if(e===fn||e===yi){let t=o.getIndex();if(t===null){const a=[],r=o.getAttribute("position");if(r!==void 0){for(let A=0;A<r.count;A++)a.push(A);o.setIndex(a),t=o.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o}const n=t.count-2,s=[];if(e===fn)for(let a=1;a<=n;a++)s.push(t.getX(0)),s.push(t.getX(a)),s.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(t.getX(a)),s.push(t.getX(a+1)),s.push(t.getX(a+2))):(s.push(t.getX(a+2)),s.push(t.getX(a+1)),s.push(t.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=o.clone();return i.setIndex(s),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),o}class Dn extends Dt{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new qr(t)}),this.register(function(t){return new zr(t)}),this.register(function(t){return new eA(t)}),this.register(function(t){return new tA(t)}),this.register(function(t){return new sA(t)}),this.register(function(t){return new Yr(t)}),this.register(function(t){return new Jr(t)}),this.register(function(t){return new Wr(t)}),this.register(function(t){return new Vr(t)}),this.register(function(t){return new jr(t)}),this.register(function(t){return new Xr(t)}),this.register(function(t){return new Kr(t)}),this.register(function(t){return new $r(t)}),this.register(function(t){return new Zr(t)}),this.register(function(t){return new Or(t)}),this.register(function(t){return new nA(t)}),this.register(function(t){return new iA(t)})}load(e,t,n,s){const i=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=Wt.extractUrlBase(e);a=Wt.resolveURL(c,this.path)}else a=Wt.extractUrlBase(e);this.manager.itemStart(e);const r=function(c){s?s(c):console.error(c),i.manager.itemError(e),i.manager.itemEnd(e)},A=new gt(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(c){try{i.parse(c,a,function(l){t(l),i.manager.itemEnd(e)},r)}catch(l){r(l)}},n,r)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let i,a;const r={},A={},c=new TextDecoder;if(typeof e=="string")try{i=JSON.parse(e)}catch(h){a=e,s&&s(h);return}else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===Ki){try{r[ne.KHR_BINARY_GLTF]=new aA(e)}catch(h){s&&s(h);return}try{i=JSON.parse(r[ne.KHR_BINARY_GLTF].content)}catch(h){a=r[ne.KHR_BINARY_GLTF].content,s&&s(h);return}}else try{i=JSON.parse(c.decode(e))}catch(h){a=c.decode(e),s&&s(h);return}else i=e;if(i.asset===void 0||i.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}this.json=i,this.jsonErrorData=a;const l=new bA(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const d=this.pluginCallbacks[h](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),A[d.name]=d,r[d.name]=!0}if(i.extensionsUsed)for(let h=0;h<i.extensionsUsed.length;++h){const d=i.extensionsUsed[h],p=i.extensionsRequired||[];switch(d){case ne.KHR_MATERIALS_UNLIT:r[d]=new Hr;break;case ne.KHR_DRACO_MESH_COMPRESSION:r[d]=new oA(i,this.dracoLoader);break;case ne.KHR_TEXTURE_TRANSFORM:r[d]=new rA;break;case ne.KHR_MESH_QUANTIZATION:r[d]=new AA;break;default:p.indexOf(d)>=0&&A[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(r),l.setPlugins(A),l.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,i){n.parse(e,t,s,i)})}}function Pr(){let o={};return{get:function(e){return o[e]},add:function(e,t){o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}const ne={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Or{constructor(e){this.parser=e,this.name=ne.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let r;const A=new Be(16777215);a.color!==void 0&&A.setRGB(a.color[0],a.color[1],a.color[2],Ve);const c=a.range!==void 0?a.range:0;switch(a.type){case"directional":r=new vi(A),r.target.position.set(0,0,-1),r.add(r.target);break;case"point":r=new mn(A),r.distance=c;break;case"spot":r=new Qi(A),r.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,r.angle=a.spot.outerConeAngle,r.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return r.position.set(0,0,0),r.decay=2,_t(r,a),a.intensity!==void 0&&(r.intensity=a.intensity),r.name=t.createUniqueName(a.name||"light_"+e),s=Promise.resolve(r),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],i=(s.extensions&&s.extensions[this.name]||{}).light;return i===void 0?null:this._loadLight(i).then(function(a){return n._getNodeRef(t.cache,i,a)})}}let Hr=class{constructor(){this.name=ne.KHR_MATERIALS_UNLIT}getMaterialType(){return It}extendParams(o,e,t){const n=[];o.color=new Be(1,1,1),o.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const i=s.baseColorFactor;o.color.setRGB(i[0],i[1],i[2],Ve),o.opacity=i[3]}s.baseColorTexture!==void 0&&n.push(t.assignTexture(o,"map",s.baseColorTexture,re))}return Promise.all(n)}},jr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(o,e){const t=this.parser.json.materials[o];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=t.extensions[this.name].emissiveStrength;return n!==void 0&&(e.emissiveIntensity=n),Promise.resolve()}},qr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_CLEARCOAT}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];if(i.clearcoatFactor!==void 0&&(e.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&s.push(t.assignTexture(e,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&s.push(t.assignTexture(e,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(s.push(t.assignTexture(e,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const a=i.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Fe(a,a)}return Promise.all(s)}},zr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_DISPERSION}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser.json.materials[o];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=t.extensions[this.name];return e.dispersion=n.dispersion!==void 0?n.dispersion:0,Promise.resolve()}},Kr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_IRIDESCENCE}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return i.iridescenceFactor!==void 0&&(e.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&s.push(t.assignTexture(e,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(e.iridescenceIOR=i.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&s.push(t.assignTexture(e,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}},Yr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_SHEEN}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Be(0,0,0),e.sheenRoughness=0,e.sheen=1;const i=n.extensions[this.name];if(i.sheenColorFactor!==void 0){const a=i.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Ve)}return i.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&s.push(t.assignTexture(e,"sheenColorMap",i.sheenColorTexture,re)),i.sheenRoughnessTexture!==void 0&&s.push(t.assignTexture(e,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}},Jr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_TRANSMISSION}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return i.transmissionFactor!==void 0&&(e.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&s.push(t.assignTexture(e,"transmissionMap",i.transmissionTexture)),Promise.all(s)}},Wr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_VOLUME}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];e.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&s.push(t.assignTexture(e,"thicknessMap",i.thicknessTexture)),e.attenuationDistance=i.attenuationDistance||1/0;const a=i.attenuationColor||[1,1,1];return e.attenuationColor=new Be().setRGB(a[0],a[1],a[2],Ve),Promise.all(s)}},Vr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_IOR}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser.json.materials[o];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const n=t.extensions[this.name];return e.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}},Xr=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_SPECULAR}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];e.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&s.push(t.assignTexture(e,"specularIntensityMap",i.specularTexture));const a=i.specularColorFactor||[1,1,1];return e.specularColor=new Be().setRGB(a[0],a[1],a[2],Ve),i.specularColorTexture!==void 0&&s.push(t.assignTexture(e,"specularColorMap",i.specularColorTexture,re)),Promise.all(s)}},Zr=class{constructor(o){this.parser=o,this.name=ne.EXT_MATERIALS_BUMP}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return e.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&s.push(t.assignTexture(e,"bumpMap",i.bumpTexture)),Promise.all(s)}},$r=class{constructor(o){this.parser=o,this.name=ne.KHR_MATERIALS_ANISOTROPY}getMaterialType(o){const e=this.parser.json.materials[o];return!e.extensions||!e.extensions[this.name]?null:Ct}extendMaterialParams(o,e){const t=this.parser,n=t.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return i.anisotropyStrength!==void 0&&(e.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(e.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&s.push(t.assignTexture(e,"anisotropyMap",i.anisotropyTexture)),Promise.all(s)}};class eA{constructor(e){this.parser=e,this.name=ne.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}class tA{constructor(e){this.parser=e,this.name=ne.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,i=s.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],r=s.images[a.source];let A=n.textureLoader;if(r.uri){const c=n.options.manager.getHandler(r.uri);c!==null&&(A=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,A);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sA{constructor(e){this.parser=e,this.name=ne.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,i=s.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],r=s.images[a.source];let A=n.textureLoader;if(r.uri){const c=n.options.manager.getHandler(r.uri);c!==null&&(A=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,A);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class nA{constructor(e){this.name=ne.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(r){const A=s.byteOffset||0,c=s.byteLength||0,l=s.count,h=s.byteStride,d=new Uint8Array(r,A,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(l,h,d,s.mode,s.filter).then(function(p){return p.buffer}):a.ready.then(function(){const p=new ArrayBuffer(l*h);return a.decodeGltfBuffer(new Uint8Array(p),l,h,d,s.mode,s.filter),p})})}else return null}}let iA=class{constructor(o){this.name=ne.EXT_MESH_GPU_INSTANCING,this.parser=o}createNodeMesh(o){const e=this.parser.json,t=e.nodes[o];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const n=e.meshes[t.mesh];for(const r of n.primitives)if(r.mode!==ct.TRIANGLES&&r.mode!==ct.TRIANGLE_STRIP&&r.mode!==ct.TRIANGLE_FAN&&r.mode!==void 0)return null;const s=t.extensions[this.name].attributes,i=[],a={};for(const r in s)i.push(this.parser.getDependency("accessor",s[r]).then(A=>(a[r]=A,a[r])));return i.length<1?null:(i.push(this.parser.createNodeMesh(o)),Promise.all(i).then(r=>{const A=r.pop(),c=A.isGroup?A.children:[A],l=r[0].count,h=[];for(const d of c){const p=new oe,u=new N,m=new we,b=new N(1,1,1),I=new Wo(d.geometry,d.material,l);for(let C=0;C<l;C++)a.TRANSLATION&&u.fromBufferAttribute(a.TRANSLATION,C),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,C),a.SCALE&&b.fromBufferAttribute(a.SCALE,C),I.setMatrixAt(C,p.compose(u,m,b));for(const C in a)if(C==="_COLOR_0"){const E=a[C];I.instanceColor=new Vo(E.array,E.itemSize,E.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&d.geometry.setAttribute(C,a[C]);Bt.prototype.copy.call(I,d),this.parser.assignFinalMaterial(I),h.push(I)}return A.isGroup?(A.clear(),A.add(...h),A):h[0]}))}};const Ki="glTF",Qs=12,Yi={JSON:1313821514,BIN:5130562};class aA{constructor(e){this.name=ne.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Qs),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ki)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Qs,i=new DataView(e,Qs);let a=0;for(;a<s;){const r=i.getUint32(a,!0);a+=4;const A=i.getUint32(a,!0);if(a+=4,A===Yi.JSON){const c=new Uint8Array(e,Qs+a,r);this.content=n.decode(c)}else if(A===Yi.BIN){const c=Qs+a;this.body=e.slice(c,c+r)}a+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class oA{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ne.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,r={},A={},c={};for(const l in a){const h=Mn[l]||l.toLowerCase();r[h]=a[l]}for(const l in e.attributes){const h=Mn[l]||l.toLowerCase();if(a[l]!==void 0){const d=n.accessors[e.attributes[l]],p=ls[d.componentType];c[h]=p.name,A[h]=d.normalized===!0}}return t.getDependency("bufferView",i).then(function(l){return new Promise(function(h,d){s.decodeDracoFile(l,function(p){for(const u in p.attributes){const m=p.attributes[u],b=A[u];b!==void 0&&(m.normalized=b)}h(p)},r,c,Ve,d)})})}}class rA{constructor(){this.name=ne.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class AA{constructor(){this.name=ne.KHR_MESH_QUANTIZATION}}class Ji extends er{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,i=e*s*3+s;for(let a=0;a!==s;a++)t[a]=n[i+a];return t}interpolate_(e,t,n,s){const i=this.resultBuffer,a=this.sampleValues,r=this.valueSize,A=r*2,c=r*3,l=s-t,h=(n-t)/l,d=h*h,p=d*h,u=e*c,m=u-c,b=-2*p+3*d,I=p-d,C=1-b,E=I-d+h;for(let w=0;w!==r;w++){const y=a[m+w+r],S=a[m+w+A]*l,R=a[u+w+r],x=a[u+w]*l;i[w]=C*y+E*S+b*R+I*x}return i}}const cA=new we;class lA extends Ji{interpolate_(e,t,n,s){const i=super.interpolate_(e,t,n,s);return cA.fromArray(i).normalize().toArray(i),i}}const ct={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ls={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Wi={9728:Ri,9729:dt,9984:Ti,9985:Di,9986:ki,9987:js},Vi={33071:Ks,33648:Mi,10497:Vt},kn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},jt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},hA={CUBICSPLINE:void 0,LINEAR:bs,STEP:yn},_n={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gA(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new In({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_i})),o.DefaultMaterial}function $t(o,e,t){for(const n in t.extensions)o[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function _t(o,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(o.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function dA(o,e,t){let n=!1,s=!1,i=!1;for(let c=0,l=e.length;c<l;c++){const h=e[c];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(i=!0),n&&s&&i)break}if(!n&&!s&&!i)return Promise.resolve(o);const a=[],r=[],A=[];for(let c=0,l=e.length;c<l;c++){const h=e[c];if(n){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):o.attributes.position;a.push(d)}if(s){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):o.attributes.normal;r.push(d)}if(i){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):o.attributes.color;A.push(d)}}return Promise.all([Promise.all(a),Promise.all(r),Promise.all(A)]).then(function(c){const l=c[0],h=c[1],d=c[2];return n&&(o.morphAttributes.position=l),s&&(o.morphAttributes.normal=h),i&&(o.morphAttributes.color=d),o.morphTargetsRelative=!0,o})}function pA(o,e){if(o.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)o.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(o.morphTargetInfluences.length===t.length){o.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)o.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uA(o){let e;const t=o.extensions&&o.extensions[ne.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Fn(t.attributes):e=o.indices+":"+Fn(o.attributes)+":"+o.mode,o.targets!==void 0)for(let n=0,s=o.targets.length;n<s;n++)e+=":"+Fn(o.targets[n]);return e}function Fn(o){let e="";const t=Object.keys(o).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+o[t[n]]+";";return e}function Ln(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fA(o){return o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0?"image/jpeg":o.search(/\.webp($|\?)/i)>0||o.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const mA=new oe;class bA{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Pr,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=-1,i=!1,a=-1;if(typeof navigator<"u"){const r=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(r)===!0;const A=r.match(/Version\/(\d+)/);s=n&&A?parseInt(A[1],10):-1,i=r.indexOf("Firefox")>-1,a=i?r.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&s<17||i&&a<98?this.textureLoader=new bn(this.options.manager):this.textureLoader=new Xo(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new gt(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const r={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return $t(i,r,s),_t(r,s),Promise.all(n._invokeAll(function(A){return A.afterRoot&&A.afterRoot(r)})).then(function(){for(const A of r.scenes)A.updateMatrixWorld();e(r)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,i=t.length;s<i;s++){const a=t[s].joints;for(let r=0,A=a.length;r<A;r++)e[a[r]].isBone=!0}for(let s=0,i=e.length;s<i;s++){const a=e[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),i=(a,r)=>{const A=this.associations.get(a);A!=null&&this.associations.set(r,A);for(const[c,l]of a.children.entries())i(l,r.children[c])};return i(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(i,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[ne.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,a){n.load(Wt.resolveURL(t.uri,s.path),i,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const a=kn[s.type],r=ls[s.componentType],A=s.normalized===!0,c=new r(s.count*a);return Promise.resolve(new nt(c,a,A))}const i=[];return s.bufferView!==void 0?i.push(this.getDependency("bufferView",s.bufferView)):i.push(null),s.sparse!==void 0&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(a){const r=a[0],A=kn[s.type],c=ls[s.componentType],l=c.BYTES_PER_ELEMENT,h=l*A,d=s.byteOffset||0,p=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,u=s.normalized===!0;let m,b;if(p&&p!==h){const I=Math.floor(d/p),C="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+I+":"+s.count;let E=t.cache.get(C);E||(m=new c(r,I*p,s.count*p/l),E=new Zo(m,p/l),t.cache.add(C,E)),b=new Zt(E,A,d%p/l,u)}else r===null?m=new c(s.count*A):m=new c(r,d,s.count*A),b=new nt(m,A,u);if(s.sparse!==void 0){const I=kn.SCALAR,C=ls[s.sparse.indices.componentType],E=s.sparse.indices.byteOffset||0,w=s.sparse.values.byteOffset||0,y=new C(a[1],E,s.sparse.count*I),S=new c(a[2],w,s.sparse.count*A);r!==null&&(b=new nt(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let R=0,x=y.length;R<x;R++){const D=y[R];if(b.setX(D,S[R*A]),A>=2&&b.setY(D,S[R*A+1]),A>=3&&b.setZ(D,S[R*A+2]),A>=4&&b.setW(D,S[R*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}b.normalized=u}return b})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,i=t.images[s];let a=this.textureLoader;if(i.uri){const r=n.manager.getHandler(i.uri);r!==null&&(a=r)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const s=this,i=this.json,a=i.textures[e],r=i.images[t],A=(r.uri||r.bufferView)+":"+a.sampler;if(this.textureCache[A])return this.textureCache[A];const c=this.loadImageSource(t,n).then(function(l){l.flipY=!1,l.name=a.name||r.name||"",l.name===""&&typeof r.uri=="string"&&r.uri.startsWith("data:image/")===!1&&(l.name=r.uri);const h=(i.samplers||{})[a.sampler]||{};return l.magFilter=Wi[h.magFilter]||dt,l.minFilter=Wi[h.minFilter]||js,l.wrapS=Vi[h.wrapS]||Vt,l.wrapT=Vi[h.wrapT]||Vt,l.anisotropy=4,s.associations.set(l,{textures:e}),l}).catch(function(){return null});return this.textureCache[A]=c,c}loadImageSource(e,t){const n=this,s=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=s.images[e],r=self.URL||self.webkitURL;let A=a.uri||"",c=!1;if(a.bufferView!==void 0)A=n.getDependency("bufferView",a.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:a.mimeType});return A=r.createObjectURL(d),A});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(A).then(function(h){return new Promise(function(d,p){let u=d;t.isImageBitmapLoader===!0&&(u=function(m){const b=new Qn(m);b.needsUpdate=!0,d(b)}),t.load(Wt.resolveURL(h,i.path),u,void 0,p)})}).then(function(h){return c===!0&&r.revokeObjectURL(A),_t(h,a),h.userData.mimeType=a.mimeType||fA(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),h});return this.sourceCache[e]=l,l}assignTexture(e,t,n,s){const i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),i.extensions[ne.KHR_TEXTURE_TRANSFORM]){const r=n.extensions!==void 0?n.extensions[ne.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const A=i.associations.get(a);a=i.extensions[ne.KHR_TEXTURE_TRANSFORM].extendTexture(a,r),i.associations.set(a,A)}}return s!==void 0&&(a.colorSpace=s),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const r="PointsMaterial:"+n.uuid;let A=this.cache.get(r);A||(A=new ms,Jt.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,A.sizeAttenuation=!1,this.cache.add(r,A)),n=A}else if(e.isLine){const r="LineBasicMaterial:"+n.uuid;let A=this.cache.get(r);A||(A=new kt,Jt.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,this.cache.add(r,A)),n=A}if(s||i||a){let r="ClonedMaterial:"+n.uuid+":";s&&(r+="derivative-tangents:"),i&&(r+="vertex-colors:"),a&&(r+="flat-shading:");let A=this.cache.get(r);A||(A=n.clone(),i&&(A.vertexColors=!0),a&&(A.flatShading=!0),s&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(r,A),this.associations.set(A,this.associations.get(n))),n=A}e.material=n}getMaterialType(){return In}loadMaterial(e){const t=this,n=this.json,s=this.extensions,i=n.materials[e];let a;const r={},A=i.extensions||{},c=[];if(A[ne.KHR_MATERIALS_UNLIT]){const h=s[ne.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),c.push(h.extendParams(r,i,t))}else{const h=i.pbrMetallicRoughness||{};if(r.color=new Be(1,1,1),r.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;r.color.setRGB(d[0],d[1],d[2],Ve),r.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(r,"map",h.baseColorTexture,re)),r.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,r.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(r,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(r,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,r)})))}i.doubleSided===!0&&(r.side=En);const l=i.alphaMode||_n.OPAQUE;if(l===_n.BLEND?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,l===_n.MASK&&(r.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&a!==It&&(c.push(t.assignTexture(r,"normalMap",i.normalTexture)),r.normalScale=new Fe(1,1),i.normalTexture.scale!==void 0)){const h=i.normalTexture.scale;r.normalScale.set(h,h)}if(i.occlusionTexture!==void 0&&a!==It&&(c.push(t.assignTexture(r,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(r.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&a!==It){const h=i.emissiveFactor;r.emissive=new Be().setRGB(h[0],h[1],h[2],Ve)}return i.emissiveTexture!==void 0&&a!==It&&c.push(t.assignTexture(r,"emissiveMap",i.emissiveTexture,re)),Promise.all(c).then(function(){const h=new a(r);return i.name&&(h.name=i.name),_t(h,i),t.associations.set(h,{materials:e}),i.extensions&&$t(s,h,i),h})}createUniqueName(e){const t=pt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function i(r){return n[ne.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(r,t).then(function(A){return Xi(A,r,t)})}const a=[];for(let r=0,A=e.length;r<A;r++){const c=e[r],l=uA(c),h=s[l];if(h)a.push(h.promise);else{let d;c.extensions&&c.extensions[ne.KHR_DRACO_MESH_COMPRESSION]?d=i(c):d=Xi(new At,c,t),s[l]={primitive:c,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,s=this.extensions,i=n.meshes[e],a=i.primitives,r=[];for(let A=0,c=a.length;A<c;A++){const l=a[A].material===void 0?gA(this.cache):this.getDependency("material",a[A].material);r.push(l)}return r.push(t.loadGeometries(a)),Promise.all(r).then(function(A){const c=A.slice(0,A.length-1),l=A[A.length-1],h=[];for(let p=0,u=l.length;p<u;p++){const m=l[p],b=a[p];let I;const C=c[p];if(b.mode===ct.TRIANGLES||b.mode===ct.TRIANGLE_STRIP||b.mode===ct.TRIANGLE_FAN||b.mode===void 0)I=i.isSkinnedMesh===!0?new Cn(m,C):new H(m,C),I.isSkinnedMesh===!0&&I.normalizeSkinWeights(),b.mode===ct.TRIANGLE_STRIP?I.geometry=zi(I.geometry,yi):b.mode===ct.TRIANGLE_FAN&&(I.geometry=zi(I.geometry,fn));else if(b.mode===ct.LINES)I=new qs(m,C);else if(b.mode===ct.LINE_STRIP)I=new ut(m,C);else if(b.mode===ct.LINE_LOOP)I=new $o(m,C);else if(b.mode===ct.POINTS)I=new zs(m,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(I.geometry.morphAttributes).length>0&&pA(I,i),I.name=t.createUniqueName(i.name||"mesh_"+e),_t(I,i),b.extensions&&$t(s,I,b),t.assignFinalMaterial(I),h.push(I)}for(let p=0,u=h.length;p<u;p++)t.associations.set(h[p],{meshes:e,primitives:p});if(h.length===1)return i.extensions&&$t(s,h[0],i),h[0];const d=new Xt;i.extensions&&$t(s,d,i),t.associations.set(d,{meshes:e});for(let p=0,u=h.length;p<u;p++)d.add(h[p]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Os(Ee.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new xi(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),_t(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,i=t.joints.length;s<i;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const i=s.pop(),a=s,r=[],A=[];for(let c=0,l=a.length;c<l;c++){const h=a[c];if(h){r.push(h);const d=new oe;i!==null&&d.fromArray(i.array,c*16),A.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Si(r,A)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],i=s.name?s.name:"animation_"+e,a=[],r=[],A=[],c=[],l=[];let h=0,d=s.channels.length;for(h=0,d=s.channels.length;h<d;h++){const p=s.channels[h],u=s.samplers[p.sampler],m=p.target,b=m.node,I=s.parameters!==void 0?s.parameters[u.input]:u.input,C=s.parameters!==void 0?s.parameters[u.output]:u.output;m.node!==void 0&&(a.push(this.getDependency("node",b)),r.push(this.getDependency("accessor",I)),A.push(this.getDependency("accessor",C)),c.push(u),l.push(m))}return Promise.all([Promise.all(a),Promise.all(r),Promise.all(A),Promise.all(c),Promise.all(l)]).then(function(p){const u=p[0],m=p[1],b=p[2],I=p[3],C=p[4],E=[];for(h=0,d=u.length;h<d;h++){const w=u[h],y=m[h],S=b[h],R=I[h],x=C[h];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const D=n._createAnimationTracks(w,y,S,R,x);if(D)for(let G=0;G<D.length;G++)E.push(D[G])}return new Bn(i,void 0,E)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(i){const a=n._getNodeRef(n.meshCache,s.mesh,i);return s.weights!==void 0&&a.traverse(function(r){if(r.isMesh)for(let A=0,c=s.weights.length;A<c;A++)r.morphTargetInfluences[A]=s.weights[A]}),a})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],i=n._loadNodeShallow(e),a=[],r=s.children||[];for(let c=0,l=r.length;c<l;c++)a.push(n.getDependency("node",r[c]));const A=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([i,Promise.all(a),A]).then(function(c){const l=c[0],h=c[1],d=c[2];d!==null&&l.traverse(function(p){p.isSkinnedMesh&&p.bind(d,mA)});for(let p=0,u=h.length;p<u;p++)l.add(h[p]);return l})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=t.nodes[e],a=i.name?s.createUniqueName(i.name):"",r=[],A=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return A&&r.push(A),i.camera!==void 0&&r.push(s.getDependency("camera",i.camera).then(function(c){return s._getNodeRef(s.cameraCache,i.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){r.push(c)}),this.nodeCache[e]=Promise.all(r).then(function(c){let l;if(i.isBone===!0?l=new wn:c.length>1?l=new Xt:c.length===1?l=c[0]:l=new Bt,l!==c[0])for(let h=0,d=c.length;h<d;h++)l.add(c[h]);if(i.name&&(l.userData.name=i.name,l.name=a),_t(l,i),i.extensions&&$t(n,l,i),i.matrix!==void 0){const h=new oe;h.fromArray(i.matrix),l.applyMatrix4(h)}else i.translation!==void 0&&l.position.fromArray(i.translation),i.rotation!==void 0&&l.quaternion.fromArray(i.rotation),i.scale!==void 0&&l.scale.fromArray(i.scale);return s.associations.has(l)||s.associations.set(l,{}),s.associations.get(l).nodes=e,l}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,i=new Xt;n.name&&(i.name=s.createUniqueName(n.name)),_t(i,n),n.extensions&&$t(t,i,n);const a=n.nodes||[],r=[];for(let A=0,c=a.length;A<c;A++)r.push(s.getDependency("node",a[A]));return Promise.all(r).then(function(A){for(let l=0,h=A.length;l<h;l++)i.add(A[l]);const c=l=>{const h=new Map;for(const[d,p]of s.associations)(d instanceof Jt||d instanceof Qn)&&h.set(d,p);return l.traverse(d=>{const p=s.associations.get(d);p!=null&&h.set(d,p)}),h};return s.associations=c(i),i})}_createAnimationTracks(e,t,n,s,i){const a=[],r=e.name?e.name:e.uuid,A=[];jt[i.path]===jt.weights?e.traverse(function(d){d.morphTargetInfluences&&A.push(d.name?d.name:d.uuid)}):A.push(r);let c;switch(jt[i.path]){case jt.weights:c=Js;break;case jt.rotation:c=Ws;break;case jt.position:case jt.scale:c=Ys;break;default:switch(n.itemSize){case 1:c=Js;break;case 2:case 3:default:c=Ys;break}break}const l=s.interpolation!==void 0?hA[s.interpolation]:bs,h=this._getArrayFromAccessor(n);for(let d=0,p=A.length;d<p;d++){const u=new c(A[d]+"."+jt[i.path],t.array,h,l);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(u),a.push(u)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Ln(t.constructor),s=new Float32Array(t.length);for(let i=0,a=t.length;i<a;i++)s[i]=t[i]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const n=this instanceof Ws?lA:Ji;return new n(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function IA(o,e,t){const n=e.attributes,s=new Vs;if(n.POSITION!==void 0){const r=t.json.accessors[n.POSITION],A=r.min,c=r.max;if(A!==void 0&&c!==void 0){if(s.set(new N(A[0],A[1],A[2]),new N(c[0],c[1],c[2])),r.normalized){const l=Ln(ls[r.componentType]);s.min.multiplyScalar(l),s.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const r=new N,A=new N;for(let c=0,l=i.length;c<l;c++){const h=i[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],p=d.min,u=d.max;if(p!==void 0&&u!==void 0){if(A.setX(Math.max(Math.abs(p[0]),Math.abs(u[0]))),A.setY(Math.max(Math.abs(p[1]),Math.abs(u[1]))),A.setZ(Math.max(Math.abs(p[2]),Math.abs(u[2]))),d.normalized){const m=Ln(ls[d.componentType]);A.multiplyScalar(m)}r.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(r)}o.boundingBox=s;const a=new vn;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,o.boundingSphere=a}function Xi(o,e,t){const n=e.attributes,s=[];function i(a,r){return t.getDependency("accessor",a).then(function(A){o.setAttribute(r,A)})}for(const a in n){const r=Mn[a]||a.toLowerCase();r in o.attributes||s.push(i(n[a],r))}if(e.indices!==void 0&&!o.index){const a=t.getDependency("accessor",e.indices).then(function(r){o.setIndex(r)});s.push(a)}return Xe.workingColorSpace!==Ve&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Xe.workingColorSpace}" not supported.`),_t(o,e),IA(o,e,t),Promise.all(s).then(function(){return e.targets!==void 0?dA(o,e.targets,t):o})}var EA=function(){var o="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var s=WebAssembly.validate(t)?e:o,i,a=WebAssembly.instantiate(r(s),{}).then(function(I){i=I.instance,i.exports.__wasm_call_ctors()});function r(I){for(var C=new Uint8Array(I.length),E=0;E<I.length;++E){var w=I.charCodeAt(E);C[E]=w>96?w-97:w>64?w-39:w+4}for(var y=0,E=0;E<I.length;++E)C[y++]=C[E]<60?n[C[E]]:(C[E]-60)*64+C[++E];return C.buffer.slice(0,y)}function A(I,C,E,w,y,S){var R=i.exports.sbrk,x=E+3&-4,D=R(x*w),G=R(y.length),W=new Uint8Array(i.exports.memory.buffer);W.set(y,G);var V=I(D,E,w,G,y.length);if(V==0&&S&&S(D,x,w),C.set(W.subarray(D,D+E*w)),R(D-R(0)),V!=0)throw new Error("Malformed buffer data: "+V)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],d=0;function p(I){var C={object:new Worker(I),pending:0,requests:{}};return C.object.onmessage=function(E){var w=E.data;C.pending-=w.count,C.requests[w.id][w.action](w.value),delete C.requests[w.id]},C}function u(I){for(var C="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(r(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+A.toString()+b.toString(),E=new Blob([C],{type:"text/javascript"}),w=URL.createObjectURL(E),y=0;y<I;++y)h[y]=p(w);URL.revokeObjectURL(w)}function m(I,C,E,w,y){for(var S=h[0],R=1;R<h.length;++R)h[R].pending<S.pending&&(S=h[R]);return new Promise(function(x,D){var G=new Uint8Array(E),W=d++;S.pending+=I,S.requests[W]={resolve:x,reject:D},S.object.postMessage({id:W,count:I,size:C,source:G,mode:w,filter:y},[G.buffer])})}function b(I){a.then(function(){var C=I.data;try{var E=new Uint8Array(C.count*C.size);A(i.exports[C.mode],E,C.count,C.size,C.source,i.exports[C.filter]),self.postMessage({id:C.id,count:C.count,action:"resolve",value:E},[E.buffer])}catch(w){self.postMessage({id:C.id,count:C.count,action:"reject",value:w})}})}return{ready:a,supported:!0,useWorkers:function(I){u(I)},decodeVertexBuffer:function(I,C,E,w,y){A(i.exports.meshopt_decodeVertexBuffer,I,C,E,w,i.exports[c[y]])},decodeIndexBuffer:function(I,C,E,w){A(i.exports.meshopt_decodeIndexBuffer,I,C,E,w)},decodeIndexSequence:function(I,C,E,w){A(i.exports.meshopt_decodeIndexSequence,I,C,E,w)},decodeGltfBuffer:function(I,C,E,w,y,S){A(i.exports[l[y]],I,C,E,w,i.exports[c[S]])},decodeGltfBufferAsync:function(I,C,E,w,y){return h.length>0?m(I,C,E,l[w],c[y]):a.then(function(){var S=new Uint8Array(I*C);return A(i.exports[l[w]],S,I,C,E,i.exports[c[y]]),S})}}}();const Nn=new WeakMap;class CA extends Dt{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const i=new gt(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,a=>{this.parse(a,t,s)},n,s)}parse(e,t,n=()=>{}){this.decodeDracoFile(e,t,null,null,re,n).catch(n)}decodeDracoFile(e,t,n,s,i=Ve,a=()=>{}){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:i};return this.decodeGeometry(e,r).then(t).catch(a)}decodeGeometry(e,t){const n=JSON.stringify(t);if(Nn.has(e)){const A=Nn.get(e);if(A.key===n)return A.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const i=this.workerNextTaskID++,a=e.byteLength,r=this._getWorker(i,a).then(A=>(s=A,new Promise((c,l)=>{s._callbacks[i]={resolve:c,reject:l},s.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(A=>this._createGeometry(A.geometry));return r.catch(()=>!0).then(()=>{s&&i&&this._releaseTask(s,i)}),Nn.set(e,{key:n,promise:r}),r}_createGeometry(e){const t=new At;e.index&&t.setIndex(new nt(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],i=s.name,a=s.array,r=s.itemSize,A=new nt(a,r);i==="color"&&(this._assignVertexColorSpace(A,s.vertexColorSpace),A.normalized=!(a instanceof Float32Array)),t.setAttribute(i,A)}return t}_assignVertexColorSpace(e,t){if(t!==re)return;const n=new Be;for(let s=0,i=e.count;s<i;s++)n.fromBufferAttribute(e,s),Xe.toWorkingColorSpace(n,re),e.setXYZ(s,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new gt(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,i)=>{n.load(e,s,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=BA.toString(),a=["/* draco decoder */",s,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(i){const a=i.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,i){return s._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function BA(){let o,e;onmessage=function(a){const r=a.data;switch(r.type){case"init":o=r.decoderConfig,e=new Promise(function(l){o.onModuleLoaded=function(h){l({draco:h})},DracoDecoderModule(o)});break;case"decode":const A=r.buffer,c=r.taskConfig;e.then(l=>{const h=l.draco,d=new h.Decoder;try{const p=t(h,d,new Int8Array(A),c),u=p.attributes.map(m=>m.array.buffer);p.index&&u.push(p.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:p},u)}catch(p){console.error(p),self.postMessage({type:"error",id:r.id,error:p.message})}finally{h.destroy(d)}});break}};function t(a,r,A,c){const l=c.attributeIDs,h=c.attributeTypes;let d,p;const u=r.GetEncodedGeometryType(A);if(u===a.TRIANGULAR_MESH)d=new a.Mesh,p=r.DecodeArrayToMesh(A,A.byteLength,d);else if(u===a.POINT_CLOUD)d=new a.PointCloud,p=r.DecodeArrayToPointCloud(A,A.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const m={index:null,attributes:[]};for(const b in l){const I=self[h[b]];let C,E;if(c.useUniqueIDs)E=l[b],C=r.GetAttributeByUniqueId(d,E);else{if(E=r.GetAttributeId(d,a[l[b]]),E===-1)continue;C=r.GetAttribute(d,E)}const w=s(a,r,d,b,I,C);b==="color"&&(w.vertexColorSpace=c.vertexColorSpace),m.attributes.push(w)}return u===a.TRIANGULAR_MESH&&(m.index=n(a,r,d)),a.destroy(d),m}function n(a,r,A){const c=A.num_faces()*3,l=c*4,h=a._malloc(l);r.GetTrianglesUInt32Array(A,l,h);const d=new Uint32Array(a.HEAPF32.buffer,h,c).slice();return a._free(h),{array:d,itemSize:1}}function s(a,r,A,c,l,h){const d=h.num_components(),p=A.num_points()*d,u=p*l.BYTES_PER_ELEMENT,m=i(a,l),b=a._malloc(u);r.GetAttributeDataArrayForAllPoints(A,h,m,u,b);const I=new l(a.HEAPF32.buffer,b,p).slice();return a._free(b),{name:c,array:I,itemSize:d}}function i(a,r){switch(r){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}class wA{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:s,msg:i,transfer:a}=this.queue.shift();this.workersResolve[e]=s,this.workers[e].postMessage(i,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const s=this._getIdleWorker();s!==-1?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=n,this.workers[s].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const yA=0,Zi=2,QA=1,$i=2,vA=0,xA=1,SA=10,RA=0,ea=9,ta=15,sa=16,na=22,ia=37,aa=43,oa=76,ra=83,Aa=97,ca=100,la=103,ha=109,ga=165,da=166,pa=1000066e3;class TA{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class vs{constructor(e,t,n,s){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const n=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,s)}}const Je=[171,75,84,88,32,50,48,187,13,10,26,10];function ua(o){return new TextDecoder().decode(o)}function DA(o){const e=new Uint8Array(o.buffer,o.byteOffset,Je.length);if(e[0]!==Je[0]||e[1]!==Je[1]||e[2]!==Je[2]||e[3]!==Je[3]||e[4]!==Je[4]||e[5]!==Je[5]||e[6]!==Je[6]||e[7]!==Je[7]||e[8]!==Je[8]||e[9]!==Je[9]||e[10]!==Je[10]||e[11]!==Je[11])throw new Error("Missing KTX 2.0 identifier.");const t=new TA,n=17*Uint32Array.BYTES_PER_ELEMENT,s=new vs(o,Je.length,n,!0);t.vkFormat=s._nextUint32(),t.typeSize=s._nextUint32(),t.pixelWidth=s._nextUint32(),t.pixelHeight=s._nextUint32(),t.pixelDepth=s._nextUint32(),t.layerCount=s._nextUint32(),t.faceCount=s._nextUint32();const i=s._nextUint32();t.supercompressionScheme=s._nextUint32();const a=s._nextUint32(),r=s._nextUint32(),A=s._nextUint32(),c=s._nextUint32(),l=s._nextUint64(),h=s._nextUint64(),d=new vs(o,Je.length+n,3*i*8,!0);for(let K=0;K<i;K++)t.levels.push({levelData:new Uint8Array(o.buffer,o.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new vs(o,a,r,!0),u={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(u.descriptorBlockSize/4-6)/4;for(let K=0;K<m;K++){const X={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&X.channelType?(X.sampleLower=p._nextInt32(),X.sampleUpper=p._nextInt32()):(X.sampleLower=p._nextUint32(),X.sampleUpper=p._nextUint32()),u.samples[K]=X}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(u);const b=new vs(o,A,c,!0);for(;b._offset<c;){const K=b._nextUint32(),X=b._scan(K),le=ua(X);if(t.keyValue[le]=b._nextUint8Array(K-X.byteLength-1),le.match(/^ktx/i)){const be=ua(t.keyValue[le]);t.keyValue[le]=be.substring(0,be.lastIndexOf("\0"))}b._skip(K%4?4-K%4:0)}if(h<=0)return t;const I=new vs(o,l,h,!0),C=I._nextUint16(),E=I._nextUint16(),w=I._nextUint32(),y=I._nextUint32(),S=I._nextUint32(),R=I._nextUint32(),x=[];for(let K=0;K<i;K++)x.push({imageFlags:I._nextUint32(),rgbSliceByteOffset:I._nextUint32(),rgbSliceByteLength:I._nextUint32(),alphaSliceByteOffset:I._nextUint32(),alphaSliceByteLength:I._nextUint32()});const D=l+I._offset,G=D+w,W=G+y,V=W+S,J=new Uint8Array(o.buffer,o.byteOffset+D,w),Z=new Uint8Array(o.buffer,o.byteOffset+G,y),$=new Uint8Array(o.buffer,o.byteOffset+W,S),z=new Uint8Array(o.buffer,o.byteOffset+V,R);return t.globalData={endpointCount:C,selectorCount:E,imageDescs:x,endpointsData:J,selectorsData:Z,tablesData:$,extendedData:z},t}let Un,Ft,Gn;const Pn={env:{emscripten_notify_memory_growth:function(o){Gn=new Uint8Array(Ft.exports.memory.buffer)}}};class kA{init(){return Un||(Un=typeof fetch<"u"?fetch("data:application/wasm;base64,"+fa).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Pn)).then(this._init):WebAssembly.instantiate(Buffer.from(fa,"base64"),Pn).then(this._init),Un)}_init(e){Ft=e.instance,Pn.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Ft)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,s=Ft.exports.malloc(n);Gn.set(e,s),t=t||Number(Ft.exports.ZSTD_findDecompressedSize(s,n));const i=Ft.exports.malloc(t),a=Ft.exports.ZSTD_decompress(i,t,s,n),r=Gn.slice(i,i+a);return Ft.exports.free(s),Ft.exports.free(i),r}}const fa="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",On=new WeakMap;let Hn=0,jn;class Rt extends Dt{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new wA,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new gt(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new gt(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const s=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([i,a])=>{const r=Rt.BasisWorker.toString(),A=["/* constants */","let _EngineFormat = "+JSON.stringify(Rt.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Rt.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Rt.BasisFormat),"/* basis_transcoder.js */",i,"/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([A])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),l=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:l},[l]),c})}),Hn>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Hn++}return this.transcoderPending}load(e,t,n,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const i=new gt(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials),i.load(e,a=>{this.parse(a,t,s)},n,s)}parse(e,t,n){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(On.has(e))return On.get(e).promise.then(t).catch(n);this._createTexture(e).then(s=>t?t(s):null).catch(n)}_createTextureFrom(e,t){const{faces:n,width:s,height:i,format:a,type:r,error:A,dfdFlags:c}=e;if(r==="error")return Promise.reject(A);let l;if(t.faceCount===6)l=new tr(n,a,ft);else{const h=n[0].mipmaps;l=t.layerCount>1?new sr(h,s,i,t.layerCount,a,ft):new Is(h,s,i,a,ft)}return l.minFilter=n[0].mipmaps.length===1?dt:js,l.magFilter=dt,l.generateMipmaps=!1,l.needsUpdate=!0,l.colorSpace=ma(t),l.premultiplyAlpha=!!(c&QA),l}async _createTexture(e,t={}){const n=DA(new Uint8Array(e));if(n.vkFormat!==RA)return _A(n);const s=t,i=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:s},[e])).then(a=>this._createTextureFrom(a.data,n));return On.set(e,{promise:i}),i}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Hn--,this}}Rt.BasisFormat={ETC1S:0,UASTC_4x4:1},Rt.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Rt.EngineFormat={RGBAFormat:Pt,RGBA_ASTC_4x4_Format:Fi,RGBA_BPTC_Format:nr,RGBA_ETC2_EAC_Format:ir,RGBA_PVRTC_4BPPV1_Format:ar,RGBA_S3TC_DXT5_Format:or,RGB_ETC1_Format:rr,RGB_ETC2_Format:Ar,RGB_PVRTC_4BPPV1_Format:cr,RGBA_S3TC_DXT1_Format:lr},Rt.BasisWorker=function(){let o,e,t;const n=_EngineFormat,s=_TranscoderFormat,i=_BasisFormat;self.addEventListener("message",function(u){const m=u.data;switch(m.type){case"init":o=m.config,a(m.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:b,buffers:I,width:C,height:E,hasAlpha:w,format:y,dfdFlags:S}=r(m.buffer);self.postMessage({type:"transcode",id:m.id,faces:b,width:C,height:E,hasAlpha:w,format:y,dfdFlags:S},I)}catch(b){console.error(b),self.postMessage({type:"error",id:m.id,error:b.message})}});break}});function a(u){e=new Promise(m=>{t={wasmBinary:u,onRuntimeInitialized:m},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function r(u){const m=new t.KTX2File(new Uint8Array(u));function b(){m.close(),m.delete()}if(!m.isValid())throw b(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const I=m.isUASTC()?i.UASTC_4x4:i.ETC1S,C=m.getWidth(),E=m.getHeight(),w=m.getLayers()||1,y=m.getLevels(),S=m.getFaces(),R=m.getHasAlpha(),x=m.getDFDFlags(),{transcoderFormat:D,engineFormat:G}=h(I,C,E,R);if(!C||!E||!y)throw b(),new Error("THREE.KTX2Loader:	Invalid texture");if(!m.startTranscoding())throw b(),new Error("THREE.KTX2Loader: .startTranscoding failed");const W=[],V=[];for(let J=0;J<S;J++){const Z=[];for(let $=0;$<y;$++){const z=[];let K,X;for(let be=0;be<w;be++){const ge=m.getImageLevelInfo($,be,J);J===0&&$===0&&be===0&&(ge.origWidth%4!==0||ge.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),y>1?(K=ge.origWidth,X=ge.origHeight):(K=ge.width,X=ge.height);const De=new Uint8Array(m.getImageTranscodedSizeInBytes($,be,0,D));if(!m.transcodeImage(De,$,be,J,D,0,-1,-1))throw b(),new Error("THREE.KTX2Loader: .transcodeImage failed.");z.push(De)}const le=p(z);Z.push({data:le,width:K,height:X}),V.push(le.buffer)}W.push({mipmaps:Z,width:C,height:E,format:G})}return b(),{faces:W,buffers:V,width:C,height:E,hasAlpha:R,format:G,dfdFlags:x}}const A=[{if:"astcSupported",basisFormat:[i.UASTC_4x4],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[s.BC1,s.BC3],engineFormat:[n.RGBA_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[s.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=A.sort(function(u,m){return u.priorityETC1S-m.priorityETC1S}),l=A.sort(function(u,m){return u.priorityUASTC-m.priorityUASTC});function h(u,m,b,I){let C,E;const w=u===i.ETC1S?c:l;for(let y=0;y<w.length;y++){const S=w[y];if(o[S.if]&&S.basisFormat.includes(u)&&!(I&&S.transcoderFormat.length<2)&&!(S.needsPowerOfTwo&&!(d(m)&&d(b))))return C=S.transcoderFormat[I?1:0],E=S.engineFormat[I?1:0],{transcoderFormat:C,engineFormat:E}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),C=s.RGBA32,E=n.RGBAFormat,{transcoderFormat:C,engineFormat:E}}function d(u){return u<=2?!0:(u&u-1)===0&&u!==0}function p(u){if(u.length===1)return u[0];let m=0;for(let C=0;C<u.length;C++){const E=u[C];m+=E.byteLength}const b=new Uint8Array(m);let I=0;for(let C=0;C<u.length;C++){const E=u[C];b.set(E,I),I+=E.byteLength}return b}};const MA=new Set([Pt,Es,os]),qn={[ha]:Pt,[Aa]:Pt,[ia]:Pt,[aa]:Pt,[la]:Es,[ra]:Es,[sa]:Es,[na]:Es,[ca]:os,[oa]:os,[ta]:os,[ea]:os,[pa]:Fi,[da]:Li,[ga]:Li},zn={[ha]:wt,[Aa]:it,[ia]:ft,[aa]:ft,[la]:wt,[ra]:it,[sa]:ft,[na]:ft,[ca]:wt,[oa]:it,[ta]:ft,[ea]:ft,[pa]:it,[da]:ft,[ga]:ft};async function _A(o){const{vkFormat:e}=o;if(qn[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;o.supercompressionScheme===Zi&&(jn||(jn=new Promise(async i=>{const a=new kA;await a.init(),i(a)})),t=await jn);const n=[];for(let i=0;i<o.levels.length;i++){const a=Math.max(1,o.pixelWidth>>i),r=Math.max(1,o.pixelHeight>>i),A=o.pixelDepth?Math.max(1,o.pixelDepth>>i):0,c=o.levels[i];let l;if(o.supercompressionScheme===yA)l=c.levelData;else if(o.supercompressionScheme===Zi)l=t.decode(c.levelData,c.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let h;zn[e]===wt?h=new Float32Array(l.buffer,l.byteOffset,l.byteLength/Float32Array.BYTES_PER_ELEMENT):zn[e]===it?h=new Uint16Array(l.buffer,l.byteOffset,l.byteLength/Uint16Array.BYTES_PER_ELEMENT):h=l,n.push({data:h,width:a,height:r,depth:A})}let s;if(MA.has(qn[e]))s=o.pixelDepth===0?new hr(n[0].data,o.pixelWidth,o.pixelHeight):new gr(n[0].data,o.pixelWidth,o.pixelHeight,o.pixelDepth);else{if(o.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new Is(n,o.pixelWidth,o.pixelHeight)}return s.mipmaps=n,s.type=zn[e],s.format=qn[e],s.colorSpace=ma(o),s.needsUpdate=!0,Promise.resolve(s)}function ma(o){const e=o.dataFormatDescriptor[0];return e.colorPrimaries===xA?e.transferFunction===$i?re:Ve:e.colorPrimaries===SA?e.transferFunction===$i?dr:pr:e.colorPrimaries===vA?Xs:(console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Xs)}class FA extends ur{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const s=n.generateShapes(e,t.size);t.depth===void 0&&t.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),t.depth=t.depth!==void 0?t.depth:t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(s,t)}this.type="TextGeometry"}}class LA extends Dt{constructor(e){super(e)}load(e,t,n,s){const i=this,a=new gt(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(r){const A=i.parse(JSON.parse(r));t&&t(A)},n,s)}parse(e){return new ba(e)}}class ba{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],s=NA(e,t,this.data);for(let i=0,a=s.length;i<a;i++)n.push(...s[i].toShapes());return n}}function NA(o,e,t){const n=Array.from(o),s=e/t.resolution,i=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let r=0,A=0;for(let c=0;c<n.length;c++){const l=n[c];if(l===`
`)r=0,A-=i;else{const h=UA(l,s,r,A,t);r+=h.offsetX,a.push(h.path)}}return a}function UA(o,e,t,n,s){const i=s.glyphs[o]||s.glyphs["?"];if(!i){console.error('THREE.Font: character "'+o+'" does not exists in font family '+s.familyName+".");return}const a=new fr;let r,A,c,l,h,d,p,u;if(i.o){const m=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let b=0,I=m.length;b<I;)switch(m[b++]){case"m":r=m[b++]*e+t,A=m[b++]*e+n,a.moveTo(r,A);break;case"l":r=m[b++]*e+t,A=m[b++]*e+n,a.lineTo(r,A);break;case"q":c=m[b++]*e+t,l=m[b++]*e+n,h=m[b++]*e+t,d=m[b++]*e+n,a.quadraticCurveTo(h,d,c,l);break;case"b":c=m[b++]*e+t,l=m[b++]*e+n,h=m[b++]*e+t,d=m[b++]*e+n,p=m[b++]*e+t,u=m[b++]*e+n,a.bezierCurveTo(h,d,p,u,c,l);break}}return{offsetX:i.ha*e,path:a}}const es=new xn,je=new N,qt=new N,Ce=new we,Ia={X:new N(1,0,0),Y:new N(0,1,0),Z:new N(0,0,1)},Kn={type:"change"},Ea={type:"mouseDown",mode:null},Ca={type:"mouseUp",mode:null},Ba={type:"objectChange"};class GA extends Ni{constructor(e,t=null){super(void 0,t);const n=new zA(this);this._root=n;const s=new va;this._gizmo=s,n.add(s);const i=new KA;this._plane=i,n.add(i);const a=this;function r(E,w){let y=w;Object.defineProperty(a,E,{get:function(){return y!==void 0?y:w},set:function(S){y!==S&&(y=S,i[E]=S,s[E]=S,a.dispatchEvent({type:E+"-changed",value:S}),a.dispatchEvent(Kn))}}),a[E]=w,i[E]=w,s[E]=w}r("camera",e),r("object",void 0),r("enabled",!0),r("axis",null),r("mode","translate"),r("translationSnap",null),r("rotationSnap",null),r("scaleSnap",null),r("space","world"),r("size",1),r("dragging",!1),r("showX",!0),r("showY",!0),r("showZ",!0);const A=new N,c=new N,l=new we,h=new we,d=new N,p=new we,u=new N,m=new N,b=new N,I=0,C=new N;r("worldPosition",A),r("worldPositionStart",c),r("worldQuaternion",l),r("worldQuaternionStart",h),r("cameraPosition",d),r("cameraQuaternion",p),r("pointStart",u),r("pointEnd",m),r("rotationAxis",b),r("rotationAngle",I),r("eye",C),this._offset=new N,this._startNorm=new N,this._endNorm=new N,this._cameraScale=new N,this._parentPosition=new N,this._parentQuaternion=new we,this._parentQuaternionInv=new we,this._parentScale=new N,this._worldScaleStart=new N,this._worldQuaternionInv=new we,this._worldScale=new N,this._positionStart=new N,this._quaternionStart=new we,this._scaleStart=new N,this._getPointer=PA.bind(this),this._onPointerDown=HA.bind(this),this._onPointerHover=OA.bind(this),this._onPointerMove=jA.bind(this),this._onPointerUp=qA.bind(this),t!==null&&this.connect()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&es.setFromCamera(e,this.camera);const t=Yn(this._gizmo.picker[this.mode],es);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&es.setFromCamera(e,this.camera);const t=Yn(this._plane,es,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,Ea.mode=this.mode,this.dispatchEvent(Ea)}}pointerMove(e){const t=this.axis,n=this.mode,s=this.object;let i=this.space;if(n==="scale"?i="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(i="world"),s===void 0||t===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&es.setFromCamera(e,this.camera);const a=Yn(this._plane,es,!0);if(a){if(this.pointEnd.copy(a.point).sub(this.worldPositionStart),n==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),i==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),i==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(i==="local"&&(s.position.applyQuaternion(Ce.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),i==="world"&&(s.parent&&s.position.add(je.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(je.setFromMatrixPosition(s.parent.matrixWorld))));else if(n==="scale"){if(t.search("XYZ")!==-1){let r=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(r*=-1),qt.set(r,r,r)}else je.copy(this.pointStart),qt.copy(this.pointEnd),je.applyQuaternion(this._worldQuaternionInv),qt.applyQuaternion(this._worldQuaternionInv),qt.divide(je),t.search("X")===-1&&(qt.x=1),t.search("Y")===-1&&(qt.y=1),t.search("Z")===-1&&(qt.z=1);s.scale.copy(this._scaleStart).multiply(qt),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(n==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const r=20/this.worldPosition.distanceTo(je.setFromMatrixPosition(this.camera.matrixWorld));let A=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(je.copy(this.rotationAxis).cross(this.eye))*r):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(Ia[t]),je.copy(Ia[t]),i==="local"&&je.applyQuaternion(this.worldQuaternion),je.cross(this.eye),je.length()===0?A=!0:this.rotationAngle=this._offset.dot(je.normalize())*r),(t==="E"||A)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),i==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Ce.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Ce.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Kn),this.dispatchEvent(Ba)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(Ca.mode=this.mode,this.dispatchEvent(Ca)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Kn),this.dispatchEvent(Ba),this.pointStart.copy(this.pointEnd))}getRaycaster(){return es}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function PA(o){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:o.button};{const e=this.domElement.getBoundingClientRect();return{x:(o.clientX-e.left)/e.width*2-1,y:-(o.clientY-e.top)/e.height*2+1,button:o.button}}}function OA(o){if(this.enabled)switch(o.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(o));break}}function HA(o){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(o.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(o)),this.pointerDown(this._getPointer(o)))}function jA(o){this.enabled&&this.pointerMove(this._getPointer(o))}function qA(o){this.enabled&&(this.domElement.releasePointerCapture(o.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(o)))}function Yn(o,e,t){const n=e.intersectObject(o,!0);for(let s=0;s<n.length;s++)if(n[s].object.visible||t)return n[s];return!1}const $s=new Ot,he=new N(0,1,0),wa=new N(0,0,0),ya=new oe,en=new we,tn=new we,yt=new N,Qa=new oe,xs=new N(1,0,0),ts=new N(0,1,0),Ss=new N(0,0,1),sn=new N,Rs=new N,Ts=new N;class zA extends Bt{constructor(e){super(),this.isTransformControlsRoot=!0,this.controls=e,this.visible=!1}updateMatrixWorld(e){const t=this.controls;t.object!==void 0&&(t.object.updateMatrixWorld(),t.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):t.object.parent.matrixWorld.decompose(t._parentPosition,t._parentQuaternion,t._parentScale),t.object.matrixWorld.decompose(t.worldPosition,t.worldQuaternion,t._worldScale),t._parentQuaternionInv.copy(t._parentQuaternion).invert(),t._worldQuaternionInv.copy(t.worldQuaternion).invert()),t.camera.updateMatrixWorld(),t.camera.matrixWorld.decompose(t.cameraPosition,t.cameraQuaternion,t._cameraScale),t.camera.isOrthographicCamera?t.camera.getWorldDirection(t.eye).negate():t.eye.copy(t.cameraPosition).sub(t.worldPosition).normalize(),super.updateMatrixWorld(e)}}class va extends Bt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new It({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new kt({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=e.clone();n.opacity=.15;const s=t.clone();s.opacity=.5;const i=e.clone();i.color.setHex(16711680);const a=e.clone();a.color.setHex(65280);const r=e.clone();r.color.setHex(255);const A=e.clone();A.color.setHex(16711680),A.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const l=e.clone();l.color.setHex(255),l.opacity=.5;const h=e.clone();h.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25,e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const u=new Ze(0,.04,.1,12);u.translate(0,.05,0);const m=new Ye(.08,.08,.08);m.translate(0,.04,0);const b=new At;b.setAttribute("position",new Re([0,0,0,1,0,0],3));const I=new Ze(.0075,.0075,.5,3);I.translate(0,.25,0);function C(Z,$){const z=new Cs(Z,.0075,3,64,$*Math.PI*2);return z.rotateY(Math.PI/2),z.rotateX(Math.PI/2),z}function E(){const Z=new At;return Z.setAttribute("position",new Re([0,0,0,1,1,1],3)),Z}const w={X:[[new H(u,i),[.5,0,0],[0,0,-Math.PI/2]],[new H(u,i),[-.5,0,0],[0,0,Math.PI/2]],[new H(I,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new H(u,a),[0,.5,0]],[new H(u,a),[0,-.5,0],[Math.PI,0,0]],[new H(I,a)]],Z:[[new H(u,r),[0,0,.5],[Math.PI/2,0,0]],[new H(u,r),[0,0,-.5],[-Math.PI/2,0,0]],[new H(I,r),null,[Math.PI/2,0,0]]],XYZ:[[new H(new Zs(.1,0),h.clone()),[0,0,0]]],XY:[[new H(new Ye(.15,.15,.01),l.clone()),[.15,.15,0]]],YZ:[[new H(new Ye(.15,.15,.01),A.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new H(new Ye(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},y={X:[[new H(new Ze(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new H(new Ze(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new H(new Ze(.2,0,.6,4),n),[0,.3,0]],[new H(new Ze(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new H(new Ze(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new H(new Ze(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new H(new Zs(.2,0),n)]],XY:[[new H(new Ye(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new H(new Ye(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new H(new Ye(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},S={START:[[new H(new Zs(.01,2),s),null,null,null,"helper"]],END:[[new H(new Zs(.01,2),s),null,null,null,"helper"]],DELTA:[[new ut(E(),s),null,null,null,"helper"]],X:[[new ut(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ut(b,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ut(b,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R={XYZE:[[new H(C(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new H(C(.5,.5),i)]],Y:[[new H(C(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new H(C(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new H(C(.75,1),d),null,[0,Math.PI/2,0]]]},x={AXIS:[[new ut(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},D={XYZE:[[new H(new pn(.25,10,8),n)]],X:[[new H(new Cs(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new H(new Cs(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new H(new Cs(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new H(new Cs(.75,.1,2,24),n)]]},G={X:[[new H(m,i),[.5,0,0],[0,0,-Math.PI/2]],[new H(I,i),[0,0,0],[0,0,-Math.PI/2]],[new H(m,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new H(m,a),[0,.5,0]],[new H(I,a)],[new H(m,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new H(m,r),[0,0,.5],[Math.PI/2,0,0]],[new H(I,r),[0,0,0],[Math.PI/2,0,0]],[new H(m,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new H(new Ye(.15,.15,.01),l),[.15,.15,0]]],YZ:[[new H(new Ye(.15,.15,.01),A),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new H(new Ye(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new H(new Ye(.1,.1,.1),h.clone())]]},W={X:[[new H(new Ze(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new H(new Ze(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new H(new Ze(.2,0,.6,4),n),[0,.3,0]],[new H(new Ze(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new H(new Ze(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new H(new Ze(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new H(new Ye(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new H(new Ye(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new H(new Ye(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new H(new Ye(.2,.2,.2),n),[0,0,0]]]},V={X:[[new ut(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ut(b,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ut(b,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function J(Z){const $=new Bt;for(const z in Z)for(let K=Z[z].length;K--;){const X=Z[z][K][0].clone(),le=Z[z][K][1],be=Z[z][K][2],ge=Z[z][K][3],De=Z[z][K][4];X.name=z,X.tag=De,le&&X.position.set(le[0],le[1],le[2]),be&&X.rotation.set(be[0],be[1],be[2]),ge&&X.scale.set(ge[0],ge[1],ge[2]),X.updateMatrix();const ke=X.geometry.clone();ke.applyMatrix4(X.matrix),X.geometry=ke,X.renderOrder=1/0,X.position.set(0,0,0),X.rotation.set(0,0,0),X.scale.set(1,1,1),$.add(X)}return $}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=J(w)),this.add(this.gizmo.rotate=J(R)),this.add(this.gizmo.scale=J(G)),this.add(this.picker.translate=J(y)),this.add(this.picker.rotate=J(D)),this.add(this.picker.scale=J(W)),this.add(this.helper.translate=J(S)),this.add(this.helper.rotate=J(x)),this.add(this.helper.scale=J(V)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:tn;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let s=0;s<n.length;s++){const i=n[s];i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(a*this.size/4),i.tag==="helper"){i.visible=!1,i.name==="AXIS"?(i.visible=!!this.axis,this.axis==="X"&&(Ce.setFromEuler($s.set(0,0,0)),i.quaternion.copy(t).multiply(Ce),Math.abs(he.copy(xs).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),this.axis==="Y"&&(Ce.setFromEuler($s.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(Ce),Math.abs(he.copy(ts).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),this.axis==="Z"&&(Ce.setFromEuler($s.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(Ce),Math.abs(he.copy(Ss).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),this.axis==="XYZE"&&(Ce.setFromEuler($s.set(0,Math.PI/2,0)),he.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(ya.lookAt(wa,he,ts)),i.quaternion.multiply(Ce),i.visible=this.dragging),this.axis==="E"&&(i.visible=!1)):i.name==="START"?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):i.name==="END"?(i.position.copy(this.worldPosition),i.visible=this.dragging):i.name==="DELTA"?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),je.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),je.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(je),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=this.axis.search(i.name)!==-1));continue}i.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(i.name==="X"&&Math.abs(he.copy(xs).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),i.name==="Y"&&Math.abs(he.copy(ts).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),i.name==="Z"&&Math.abs(he.copy(Ss).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),i.name==="XY"&&Math.abs(he.copy(Ss).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),i.name==="YZ"&&Math.abs(he.copy(xs).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),i.name==="XZ"&&Math.abs(he.copy(ts).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1)):this.mode==="rotate"&&(en.copy(t),he.copy(this.eye).applyQuaternion(Ce.copy(t).invert()),i.name.search("E")!==-1&&i.quaternion.setFromRotationMatrix(ya.lookAt(this.eye,wa,ts)),i.name==="X"&&(Ce.setFromAxisAngle(xs,Math.atan2(-he.y,he.z)),Ce.multiplyQuaternions(en,Ce),i.quaternion.copy(Ce)),i.name==="Y"&&(Ce.setFromAxisAngle(ts,Math.atan2(he.x,he.z)),Ce.multiplyQuaternions(en,Ce),i.quaternion.copy(Ce)),i.name==="Z"&&(Ce.setFromAxisAngle(Ss,Math.atan2(he.y,he.x)),Ce.multiplyQuaternions(en,Ce),i.quaternion.copy(Ce))),i.visible=i.visible&&(i.name.indexOf("X")===-1||this.showX),i.visible=i.visible&&(i.name.indexOf("Y")===-1||this.showY),i.visible=i.visible&&(i.name.indexOf("Z")===-1||this.showZ),i.visible=i.visible&&(i.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),i.material._color=i.material._color||i.material.color.clone(),i.material._opacity=i.material._opacity||i.material.opacity,i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled&&this.axis&&(i.name===this.axis||this.axis.split("").some(function(r){return i.name===r}))&&(i.material.color.setHex(16776960),i.material.opacity=1)}super.updateMatrixWorld(e)}}class KA extends H{constructor(){super(new Sn(1e5,1e5,2,2),new It({visible:!1,wireframe:!0,side:En,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),sn.copy(xs).applyQuaternion(t==="local"?this.worldQuaternion:tn),Rs.copy(ts).applyQuaternion(t==="local"?this.worldQuaternion:tn),Ts.copy(Ss).applyQuaternion(t==="local"?this.worldQuaternion:tn),he.copy(Rs),this.mode){case"translate":case"scale":switch(this.axis){case"X":he.copy(this.eye).cross(sn),yt.copy(sn).cross(he);break;case"Y":he.copy(this.eye).cross(Rs),yt.copy(Rs).cross(he);break;case"Z":he.copy(this.eye).cross(Ts),yt.copy(Ts).cross(he);break;case"XY":yt.copy(Ts);break;case"YZ":yt.copy(sn);break;case"XZ":he.copy(Ts),yt.copy(Rs);break;case"XYZ":case"E":yt.set(0,0,0);break}break;case"rotate":default:yt.set(0,0,0)}yt.length()===0?this.quaternion.copy(this.cameraQuaternion):(Qa.lookAt(je.set(0,0,0),yt,he),this.quaternion.setFromRotationMatrix(Qa)),super.updateMatrixWorld(e)}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var ye=Uint8Array,at=Uint16Array,Jn=Int32Array,nn=new ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),an=new ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wn=new ye([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xa=function(o,e){for(var t=new at(31),n=0;n<31;++n)t[n]=e+=1<<o[n-1];for(var s=new Jn(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)s[i]=i-t[n]<<5|n;return{b:t,r:s}},Sa=xa(nn,2),Ra=Sa.b,Vn=Sa.r;Ra[28]=258,Vn[258]=28;for(var Ta=xa(an,0),YA=Ta.b,Da=Ta.r,Xn=new at(32768),me=0;me<32768;++me){var zt=(me&43690)>>1|(me&21845)<<1;zt=(zt&52428)>>2|(zt&13107)<<2,zt=(zt&61680)>>4|(zt&3855)<<4,Xn[me]=((zt&65280)>>8|(zt&255)<<8)>>1}for(var Qt=function(o,e,t){for(var n=o.length,s=0,i=new at(e);s<n;++s)o[s]&&++i[o[s]-1];var a=new at(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var r;if(t){r=new at(1<<e);var A=15-e;for(s=0;s<n;++s)if(o[s])for(var c=s<<4|o[s],l=e-o[s],h=a[o[s]-1]++<<l,d=h|(1<<l)-1;h<=d;++h)r[Xn[h]>>A]=c}else for(r=new at(n),s=0;s<n;++s)o[s]&&(r[s]=Xn[a[o[s]-1]++]>>15-o[s]);return r},Kt=new ye(288),me=0;me<144;++me)Kt[me]=8;for(var me=144;me<256;++me)Kt[me]=9;for(var me=256;me<280;++me)Kt[me]=7;for(var me=280;me<288;++me)Kt[me]=8;for(var Ds=new ye(32),me=0;me<32;++me)Ds[me]=5;var JA=Qt(Kt,9,0),WA=Qt(Kt,9,1),VA=Qt(Ds,5,0),XA=Qt(Ds,5,1),Zn=function(o){for(var e=o[0],t=1;t<o.length;++t)o[t]>e&&(e=o[t]);return e},mt=function(o,e,t){var n=e/8|0;return(o[n]|o[n+1]<<8)>>(e&7)&t},$n=function(o,e){var t=e/8|0;return(o[t]|o[t+1]<<8|o[t+2]<<16)>>(e&7)},ei=function(o){return(o+7)/8|0},ti=function(o,e,t){return(e==null||e<0)&&(e=0),(t==null||t>o.length)&&(t=o.length),new ye(o.subarray(e,t))},ZA=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],et=function(o,e,t){var n=new Error(e||ZA[o]);if(n.code=o,Error.captureStackTrace&&Error.captureStackTrace(n,et),!t)throw n;return n},$A=function(o,e,t,n){var s=o.length,i=n?n.length:0;if(!s||e.f&&!e.l)return t||new ye(0);var a=!t,r=a||e.i!=2,A=e.i;a&&(t=new ye(s*3));var c=function(Me){var Gt=t.length;if(Me>Gt){var Ke=new ye(Math.max(Gt*2,Me));Ke.set(t),t=Ke}},l=e.f||0,h=e.p||0,d=e.b||0,p=e.l,u=e.d,m=e.m,b=e.n,I=s*8;do{if(!p){l=mt(o,h,1);var C=mt(o,h+1,3);if(h+=3,C)if(C==1)p=WA,u=XA,m=9,b=5;else if(C==2){var E=mt(o,h,31)+257,w=mt(o,h+10,15)+4,y=E+mt(o,h+5,31)+1;h+=14;for(var S=new ye(y),R=new ye(19),x=0;x<w;++x)R[Wn[x]]=mt(o,h+x*3,7);h+=w*3;for(var D=Zn(R),G=(1<<D)-1,W=Qt(R,D,1),x=0;x<y;){var V=W[mt(o,h,G)];h+=V&15;var J=V>>4;if(J<16)S[x++]=J;else{var Z=0,$=0;for(J==16?($=3+mt(o,h,3),h+=2,Z=S[x-1]):J==17?($=3+mt(o,h,7),h+=3):J==18&&($=11+mt(o,h,127),h+=7);$--;)S[x++]=Z}}var z=S.subarray(0,E),K=S.subarray(E);m=Zn(z),b=Zn(K),p=Qt(z,m,1),u=Qt(K,b,1)}else et(1);else{var J=ei(h)+4,X=o[J-4]|o[J-3]<<8,le=J+X;if(le>s){A&&et(0);break}r&&c(d+X),t.set(o.subarray(J,le),d),e.b=d+=X,e.p=h=le*8,e.f=l;continue}if(h>I){A&&et(0);break}}r&&c(d+131072);for(var be=(1<<m)-1,ge=(1<<b)-1,De=h;;De=h){var Z=p[$n(o,h)&be],ke=Z>>4;if(h+=Z&15,h>I){A&&et(0);break}if(Z||et(2),ke<256)t[d++]=ke;else if(ke==256){De=h,p=null;break}else{var qe=ke-254;if(ke>264){var x=ke-257,pe=nn[x];qe=mt(o,h,(1<<pe)-1)+Ra[x],h+=pe}var ze=u[$n(o,h)&ge],Nt=ze>>4;ze||et(3),h+=ze&15;var K=YA[Nt];if(Nt>3){var pe=an[Nt];K+=$n(o,h)&(1<<pe)-1,h+=pe}if(h>I){A&&et(0);break}r&&c(d+131072);var Ut=d+qe;if(d<K){var is=i-K,Le=Math.min(K,Ut);for(is+d<0&&et(3);d<Le;++d)t[d]=n[is+d]}for(;d<Ut;++d)t[d]=t[d-K]}}e.l=p,e.p=De,e.b=d,e.f=l,p&&(l=1,e.m=m,e.d=u,e.n=b)}while(!l);return d!=t.length&&a?ti(t,0,d):t.subarray(0,d)},Lt=function(o,e,t){t<<=e&7;var n=e/8|0;o[n]|=t,o[n+1]|=t>>8},ks=function(o,e,t){t<<=e&7;var n=e/8|0;o[n]|=t,o[n+1]|=t>>8,o[n+2]|=t>>16},si=function(o,e){for(var t=[],n=0;n<o.length;++n)o[n]&&t.push({s:n,f:o[n]});var s=t.length,i=t.slice();if(!s)return{t:Fa,l:0};if(s==1){var a=new ye(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(y,S){return y.f-S.f}),t.push({s:-1,f:25001});var r=t[0],A=t[1],c=0,l=1,h=2;for(t[0]={s:-1,f:r.f+A.f,l:r,r:A};l!=s-1;)r=t[t[c].f<t[h].f?c++:h++],A=t[c!=l&&t[c].f<t[h].f?c++:h++],t[l++]={s:-1,f:r.f+A.f,l:r,r:A};for(var d=i[0].s,n=1;n<s;++n)i[n].s>d&&(d=i[n].s);var p=new at(d+1),u=ni(t[l-1],p,0);if(u>e){var n=0,m=0,b=u-e,I=1<<b;for(i.sort(function(S,R){return p[R.s]-p[S.s]||S.f-R.f});n<s;++n){var C=i[n].s;if(p[C]>e)m+=I-(1<<u-p[C]),p[C]=e;else break}for(m>>=b;m>0;){var E=i[n].s;p[E]<e?m-=1<<e-p[E]++-1:++n}for(;n>=0&&m;--n){var w=i[n].s;p[w]==e&&(--p[w],++m)}u=e}return{t:new ye(p),l:u}},ni=function(o,e,t){return o.s==-1?Math.max(ni(o.l,e,t+1),ni(o.r,e,t+1)):e[o.s]=t},ka=function(o){for(var e=o.length;e&&!o[--e];);for(var t=new at(++e),n=0,s=o[0],i=1,a=function(A){t[n++]=A},r=1;r<=e;++r)if(o[r]==s&&r!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=o[r]}return{c:t.subarray(0,n),n:e}},Ms=function(o,e){for(var t=0,n=0;n<e.length;++n)t+=o[n]*e[n];return t},Ma=function(o,e,t){var n=t.length,s=ei(e+2);o[s]=n&255,o[s+1]=n>>8,o[s+2]=o[s]^255,o[s+3]=o[s+1]^255;for(var i=0;i<n;++i)o[s+i+4]=t[i];return(s+4+n)*8},_a=function(o,e,t,n,s,i,a,r,A,c,l){Lt(e,l++,t),++s[256];for(var h=si(s,15),d=h.t,p=h.l,u=si(i,15),m=u.t,b=u.l,I=ka(d),C=I.c,E=I.n,w=ka(m),y=w.c,S=w.n,R=new at(19),x=0;x<C.length;++x)++R[C[x]&31];for(var x=0;x<y.length;++x)++R[y[x]&31];for(var D=si(R,7),G=D.t,W=D.l,V=19;V>4&&!G[Wn[V-1]];--V);var J=c+5<<3,Z=Ms(s,Kt)+Ms(i,Ds)+a,$=Ms(s,d)+Ms(i,m)+a+14+3*V+Ms(R,G)+2*R[16]+3*R[17]+7*R[18];if(A>=0&&J<=Z&&J<=$)return Ma(e,l,o.subarray(A,A+c));var z,K,X,le;if(Lt(e,l,1+($<Z)),l+=2,$<Z){z=Qt(d,p,0),K=d,X=Qt(m,b,0),le=m;var be=Qt(G,W,0);Lt(e,l,E-257),Lt(e,l+5,S-1),Lt(e,l+10,V-4),l+=14;for(var x=0;x<V;++x)Lt(e,l+3*x,G[Wn[x]]);l+=3*V;for(var ge=[C,y],De=0;De<2;++De)for(var ke=ge[De],x=0;x<ke.length;++x){var qe=ke[x]&31;Lt(e,l,be[qe]),l+=G[qe],qe>15&&(Lt(e,l,ke[x]>>5&127),l+=ke[x]>>12)}}else z=JA,K=Kt,X=VA,le=Ds;for(var x=0;x<r;++x){var pe=n[x];if(pe>255){var qe=pe>>18&31;ks(e,l,z[qe+257]),l+=K[qe+257],qe>7&&(Lt(e,l,pe>>23&31),l+=nn[qe]);var ze=pe&31;ks(e,l,X[ze]),l+=le[ze],ze>3&&(ks(e,l,pe>>5&8191),l+=an[ze])}else ks(e,l,z[pe]),l+=K[pe]}return ks(e,l,z[256]),l+K[256]},ec=new Jn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fa=new ye(0),tc=function(o,e,t,n,s,i){var a=i.z||o.length,r=new ye(n+a+5*(1+Math.ceil(a/7e3))+s),A=r.subarray(n,r.length-s),c=i.l,l=(i.r||0)&7;if(e){l&&(A[0]=i.r>>3);for(var h=ec[e-1],d=h>>13,p=h&8191,u=(1<<t)-1,m=i.p||new at(32768),b=i.h||new at(u+1),I=Math.ceil(t/3),C=2*I,E=function(Ne){return(o[Ne]^o[Ne+1]<<I^o[Ne+2]<<C)&u},w=new Jn(25e3),y=new at(288),S=new at(32),R=0,x=0,D=i.i||0,G=0,W=i.w||0,V=0;D+2<a;++D){var J=E(D),Z=D&32767,$=b[J];if(m[Z]=$,b[J]=Z,W<=D){var z=a-D;if((R>7e3||G>24576)&&(z>423||!c)){l=_a(o,A,0,w,y,S,x,G,V,D-V,l),G=R=x=0,V=D;for(var K=0;K<286;++K)y[K]=0;for(var K=0;K<30;++K)S[K]=0}var X=2,le=0,be=p,ge=Z-$&32767;if(z>2&&J==E(D-ge))for(var De=Math.min(d,z)-1,ke=Math.min(32767,D),qe=Math.min(258,z);ge<=ke&&--be&&Z!=$;){if(o[D+X]==o[D+X-ge]){for(var pe=0;pe<qe&&o[D+pe]==o[D+pe-ge];++pe);if(pe>X){if(X=pe,le=ge,pe>De)break;for(var ze=Math.min(ge,pe-2),Nt=0,K=0;K<ze;++K){var Ut=D-ge+K&32767,is=m[Ut],Le=Ut-is&32767;Le>Nt&&(Nt=Le,$=Ut)}}}Z=$,$=m[Z],ge+=Z-$&32767}if(le){w[G++]=268435456|Vn[X]<<18|Da[le];var Me=Vn[X]&31,Gt=Da[le]&31;x+=nn[Me]+an[Gt],++y[257+Me],++S[Gt],W=D+X,++R}else w[G++]=o[D],++y[o[D]]}}for(D=Math.max(D,W);D<a;++D)w[G++]=o[D],++y[o[D]];l=_a(o,A,c,w,y,S,x,G,V,D-V,l),c||(i.r=l&7|A[l/8|0]<<3,l-=7,i.h=b,i.p=m,i.i=D,i.w=W)}else{for(var D=i.w||0;D<a+c;D+=65535){var Ke=D+65535;Ke>=a&&(A[l/8|0]=c,Ke=a),l=Ma(A,l+1,o.subarray(D,Ke))}i.i=a}return ti(r,0,n+ei(l)+s)},sc=function(){for(var o=new Int32Array(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&-306674912)^t>>>1;o[e]=t}return o}(),nc=function(){var o=-1;return{p:function(e){for(var t=o,n=0;n<e.length;++n)t=sc[t&255^e[n]]^t>>>8;o=t},d:function(){return~o}}},ic=function(o,e,t,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new ye(i.length+o.length);a.set(i),a.set(o,i.length),o=a,s.w=i.length}return tc(o,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(o.length)))*1.5):20:12+e.mem,t,n,s)},La=function(o,e){var t={};for(var n in o)t[n]=o[n];for(var n in e)t[n]=e[n];return t},Ue=function(o,e,t){for(;t;++e)o[e]=t,t>>>=8},ac=function(o,e){return((o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31)&&et(6,"invalid zlib data"),(o[1]>>5&1)==+!e&&et(6,"invalid zlib data: "+(o[1]&32?"need":"unexpected")+" dictionary"),(o[1]>>3&4)+2};function oc(o,e){return ic(o,e||{},0,0)}function _s(o,e){return $A(o.subarray(ac(o,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Na=function(o,e,t,n){for(var s in o){var i=o[s],a=e+s,r=n;Array.isArray(i)&&(r=La(n,i[1]),i=i[0]),i instanceof ye?t[a]=[i,r]:(t[a+="/"]=[new ye(0),r],Na(i,a,t,n))}},Ua=typeof TextEncoder<"u"&&new TextEncoder,rc=typeof TextDecoder<"u"&&new TextDecoder,Ac=0;try{rc.decode(Fa,{stream:!0}),Ac=1}catch{}function ii(o,e){if(e){for(var t=new ye(o.length),n=0;n<o.length;++n)t[n]=o.charCodeAt(n);return t}if(Ua)return Ua.encode(o);for(var s=o.length,i=new ye(o.length+(o.length>>1)),a=0,r=function(h){i[a++]=h},n=0;n<s;++n){if(a+5>i.length){var A=new ye(a+8+(s-n<<1));A.set(i),i=A}var c=o.charCodeAt(n);c<128||e?r(c):c<2048?(r(192|c>>6),r(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|o.charCodeAt(++n)&1023,r(240|c>>18),r(128|c>>12&63),r(128|c>>6&63),r(128|c&63)):(r(224|c>>12),r(128|c>>6&63),r(128|c&63))}return ti(i,0,a)}var ai=function(o){var e=0;if(o)for(var t in o){var n=o[t].length;n>65535&&et(9),e+=n+4}return e},Ga=function(o,e,t,n,s,i,a,r){var A=n.length,c=t.extra,l=r&&r.length,h=ai(c);Ue(o,e,a!=null?33639248:67324752),e+=4,a!=null&&(o[e++]=20,o[e++]=t.os),o[e]=20,e+=2,o[e++]=t.flag<<1|(i<0&&8),o[e++]=s&&8,o[e++]=t.compression&255,o[e++]=t.compression>>8;var d=new Date(t.mtime==null?Date.now():t.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&et(10),Ue(o,e,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),e+=4,i!=-1&&(Ue(o,e,t.crc),Ue(o,e+4,i<0?-i-2:i),Ue(o,e+8,t.size)),Ue(o,e+12,A),Ue(o,e+14,h),e+=16,a!=null&&(Ue(o,e,l),Ue(o,e+6,t.attrs),Ue(o,e+10,a),e+=14),o.set(n,e),e+=A,h)for(var u in c){var m=c[u],b=m.length;Ue(o,e,+u),Ue(o,e+2,b),o.set(m,e+4),e+=4+b}return l&&(o.set(r,e),e+=l),e},cc=function(o,e,t,n,s){Ue(o,e,101010256),Ue(o,e+8,t),Ue(o,e+10,t),Ue(o,e+12,n),Ue(o,e+16,s)};function lc(o,e){e||(e={});var t={},n=[];Na(o,"",t,e);var s=0,i=0;for(var a in t){var r=t[a],A=r[0],c=r[1],l=c.level==0?0:8,h=ii(a),d=h.length,p=c.comment,u=p&&ii(p),m=u&&u.length,b=ai(c.extra);d>65535&&et(11);var I=l?oc(A,c):A,C=I.length,E=nc();E.p(A),n.push(La(c,{size:A.length,crc:E.d(),c:I,f:h,m:u,u:d!=a.length||u&&p.length!=m,o:s,compression:l})),s+=30+d+b+C,i+=76+2*(d+b)+(m||0)+C}for(var w=new ye(i+22),y=s,S=i-s,R=0;R<n.length;++R){var h=n[R];Ga(w,h.o,h,h.f,h.u,h.c.length);var x=30+h.f.length+ai(h.extra);w.set(h.c,h.o+x),Ga(w,s,h,h.f,h.u,h.c.length,h.o,h.m),s+=16+x+(h.m?h.m.length:0)}return cc(w,s,n.length,S,y),w}class Pa extends Ui{constructor(e){super(e),this.type=it}parse(e){const t=Math.pow(2.7182818,2.2);function n(g,f){let B=0;for(let T=0;T<65536;++T)(T==0||g[T>>3]&1<<(T&7))&&(f[B++]=T);const Q=B-1;for(;B<65536;)f[B++]=0;return Q}function s(g){for(let f=0;f<16384;f++)g[f]={},g[f].len=0,g[f].lit=0,g[f].p=null}const i={l:0,c:0,lc:0};function a(g,f,B,Q,T){for(;B<g;)f=f<<8|Gt(Q,T),B+=8;B-=g,i.l=f>>B&(1<<g)-1,i.c=f,i.lc=B}const r=new Array(59);function A(g){for(let B=0;B<=58;++B)r[B]=0;for(let B=0;B<65537;++B)r[g[B]]+=1;let f=0;for(let B=58;B>0;--B){const Q=f+r[B]>>1;r[B]=f,f=Q}for(let B=0;B<65537;++B){const Q=g[B];Q>0&&(g[B]=Q|r[Q]++<<6)}}function c(g,f,B,Q,T,v){const _=f;let L=0,F=0;for(;Q<=T;Q++){if(_.value-f.value>B)return!1;a(6,L,F,g,_);const M=i.l;if(L=i.c,F=i.lc,v[Q]=M,M==63){if(_.value-f.value>B)throw new Error("Something wrong with hufUnpackEncTable");a(8,L,F,g,_);let k=i.l+6;if(L=i.c,F=i.lc,Q+k>T+1)throw new Error("Something wrong with hufUnpackEncTable");for(;k--;)v[Q++]=0;Q--}else if(M>=59){let k=M-59+2;if(Q+k>T+1)throw new Error("Something wrong with hufUnpackEncTable");for(;k--;)v[Q++]=0;Q--}}A(v)}function l(g){return g&63}function h(g){return g>>6}function d(g,f,B,Q){for(;f<=B;f++){const T=h(g[f]),v=l(g[f]);if(T>>v)throw new Error("Invalid table entry");if(v>14){const _=Q[T>>v-14];if(_.len)throw new Error("Invalid table entry");if(_.lit++,_.p){const L=_.p;_.p=new Array(_.lit);for(let F=0;F<_.lit-1;++F)_.p[F]=L[F]}else _.p=new Array(1);_.p[_.lit-1]=f}else if(v){let _=0;for(let L=1<<14-v;L>0;L--){const F=Q[(T<<14-v)+_];if(F.len||F.p)throw new Error("Invalid table entry");F.len=v,F.lit=f,_++}}}return!0}const p={c:0,lc:0};function u(g,f,B,Q){g=g<<8|Gt(B,Q),f+=8,p.c=g,p.lc=f}const m={c:0,lc:0};function b(g,f,B,Q,T,v,_,L,F){if(g==f){Q<8&&(u(B,Q,T,v),B=p.c,Q=p.lc),Q-=8;let M=B>>Q;if(M=new Uint8Array([M])[0],L.value+M>F)return!1;const k=_[L.value-1];for(;M-- >0;)_[L.value++]=k}else if(L.value<F)_[L.value++]=g;else return!1;m.c=B,m.lc=Q}function I(g){return g&65535}function C(g){const f=I(g);return f>32767?f-65536:f}const E={a:0,b:0};function w(g,f){const B=C(g),Q=C(f),T=B+(Q&1)+(Q>>1),v=T,_=T-Q;E.a=v,E.b=_}function y(g,f){const B=I(g),Q=I(f),T=B-(Q>>1)&65535,v=Q+T-32768&65535;E.a=v,E.b=T}function S(g,f,B,Q,T,v,_){const L=_<16384,F=B>T?T:B;let M=1,k,P;for(;M<=F;)M<<=1;for(M>>=1,k=M,M>>=1;M>=1;){P=0;const U=P+v*(T-k),q=v*M,ee=v*k,O=Q*M,Y=Q*k;let te,Ie,ve,st;for(;P<=U;P+=ee){let ue=P;const ae=P+Q*(B-k);for(;ue<=ae;ue+=Y){const Se=ue+O,rt=ue+q,_e=rt+O;L?(w(g[ue+f],g[rt+f]),te=E.a,ve=E.b,w(g[Se+f],g[_e+f]),Ie=E.a,st=E.b,w(te,Ie),g[ue+f]=E.a,g[Se+f]=E.b,w(ve,st),g[rt+f]=E.a,g[_e+f]=E.b):(y(g[ue+f],g[rt+f]),te=E.a,ve=E.b,y(g[Se+f],g[_e+f]),Ie=E.a,st=E.b,y(te,Ie),g[ue+f]=E.a,g[Se+f]=E.b,y(ve,st),g[rt+f]=E.a,g[_e+f]=E.b)}if(B&M){const Se=ue+q;L?w(g[ue+f],g[Se+f]):y(g[ue+f],g[Se+f]),te=E.a,g[Se+f]=E.b,g[ue+f]=te}}if(T&M){let ue=P;const ae=P+Q*(B-k);for(;ue<=ae;ue+=Y){const Se=ue+O;L?w(g[ue+f],g[Se+f]):y(g[ue+f],g[Se+f]),te=E.a,g[Se+f]=E.b,g[ue+f]=te}}k=M,M>>=1}return P}function R(g,f,B,Q,T,v,_,L,F){let M=0,k=0;const P=_,U=Math.trunc(Q.value+(T+7)/8);for(;Q.value<U;)for(u(M,k,B,Q),M=p.c,k=p.lc;k>=14;){const ee=M>>k-14&16383,O=f[ee];if(O.len)k-=O.len,b(O.lit,v,M,k,B,Q,L,F,P),M=m.c,k=m.lc;else{if(!O.p)throw new Error("hufDecode issues");let Y;for(Y=0;Y<O.lit;Y++){const te=l(g[O.p[Y]]);for(;k<te&&Q.value<U;)u(M,k,B,Q),M=p.c,k=p.lc;if(k>=te&&h(g[O.p[Y]])==(M>>k-te&(1<<te)-1)){k-=te,b(O.p[Y],v,M,k,B,Q,L,F,P),M=m.c,k=m.lc;break}}if(Y==O.lit)throw new Error("hufDecode issues")}}const q=8-T&7;for(M>>=q,k-=q;k>0;){const ee=f[M<<14-k&16383];if(ee.len)k-=ee.len,b(ee.lit,v,M,k,B,Q,L,F,P),M=m.c,k=m.lc;else throw new Error("hufDecode issues")}return!0}function x(g,f,B,Q,T,v){const _={value:0},L=B.value,F=Me(f,B),M=Me(f,B);B.value+=4;const k=Me(f,B);if(B.value+=4,F<0||F>=65537||M<0||M>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const P=new Array(65537),U=new Array(16384);s(U);const q=Q-(B.value-L);if(c(g,B,q,F,M,P),k>8*(Q-(B.value-L)))throw new Error("Something wrong with hufUncompress");d(P,F,M,U),R(P,U,g,B,k,M,v,T,_)}function D(g,f,B){for(let Q=0;Q<B;++Q)f[Q]=g[f[Q]]}function G(g){for(let f=1;f<g.length;f++){const B=g[f-1]+g[f]-128;g[f]=B}}function W(g,f){let B=0,Q=Math.floor((g.length+1)/2),T=0;const v=g.length-1;for(;!(T>v||(f[T++]=g[B++],T>v));)f[T++]=g[Q++]}function V(g){let f=g.byteLength;const B=new Array;let Q=0;const T=new DataView(g);for(;f>0;){const v=T.getInt8(Q++);if(v<0){const _=-v;f-=_+1;for(let L=0;L<_;L++)B.push(T.getUint8(Q++))}else{const _=v;f-=2;const L=T.getUint8(Q++);for(let F=0;F<_+1;F++)B.push(L)}}return B}function J(g,f,B,Q,T,v){let _=new DataView(v.buffer);const L=B[g.idx[0]].width,F=B[g.idx[0]].height,M=3,k=Math.floor(L/8),P=Math.ceil(L/8),U=Math.ceil(F/8),q=L-(P-1)*8,ee=F-(U-1)*8,O={value:0},Y=new Array(M),te=new Array(M),Ie=new Array(M),ve=new Array(M),st=new Array(M);for(let ae=0;ae<M;++ae)st[ae]=f[g.idx[ae]],Y[ae]=ae<1?0:Y[ae-1]+P*U,te[ae]=new Float32Array(64),Ie[ae]=new Uint16Array(64),ve[ae]=new Uint16Array(P*64);for(let ae=0;ae<U;++ae){let Se=8;ae==U-1&&(Se=ee);let rt=8;for(let Ae=0;Ae<P;++Ae){Ae==P-1&&(rt=q);for(let de=0;de<M;++de)Ie[de].fill(0),Ie[de][0]=T[Y[de]++],Z(O,Q,Ie[de]),$(Ie[de],te[de]),z(te[de]);K(te);for(let de=0;de<M;++de)X(te[de],ve[de],Ae*64)}let _e=0;for(let Ae=0;Ae<M;++Ae){const de=B[g.idx[Ae]].type;for(let Tt=8*ae;Tt<8*ae+Se;++Tt){_e=st[Ae][Tt];for(let us=0;us<k;++us){const bt=us*64+(Tt&7)*8;_.setUint16(_e+0*2*de,ve[Ae][bt+0],!0),_.setUint16(_e+1*2*de,ve[Ae][bt+1],!0),_.setUint16(_e+2*2*de,ve[Ae][bt+2],!0),_.setUint16(_e+3*2*de,ve[Ae][bt+3],!0),_.setUint16(_e+4*2*de,ve[Ae][bt+4],!0),_.setUint16(_e+5*2*de,ve[Ae][bt+5],!0),_.setUint16(_e+6*2*de,ve[Ae][bt+6],!0),_.setUint16(_e+7*2*de,ve[Ae][bt+7],!0),_e+=8*2*de}}if(k!=P)for(let Tt=8*ae;Tt<8*ae+Se;++Tt){const us=st[Ae][Tt]+8*k*2*de,bt=k*64+(Tt&7)*8;for(let Ps=0;Ps<rt;++Ps)_.setUint16(us+Ps*2*de,ve[Ae][bt+Ps],!0)}}}const ue=new Uint16Array(L);_=new DataView(v.buffer);for(let ae=0;ae<M;++ae){B[g.idx[ae]].decoded=!0;const Se=B[g.idx[ae]].type;if(B[ae].type==2)for(let rt=0;rt<F;++rt){const _e=st[ae][rt];for(let Ae=0;Ae<L;++Ae)ue[Ae]=_.getUint16(_e+Ae*2*Se,!0);for(let Ae=0;Ae<L;++Ae)_.setFloat32(_e+Ae*2*Se,j(ue[Ae]),!0)}}}function Z(g,f,B){let Q,T=1;for(;T<64;)Q=f[g.value],Q==65280?T=64:Q>>8==255?T+=Q&255:(B[T]=Q,T++),g.value++}function $(g,f){f[0]=j(g[0]),f[1]=j(g[1]),f[2]=j(g[5]),f[3]=j(g[6]),f[4]=j(g[14]),f[5]=j(g[15]),f[6]=j(g[27]),f[7]=j(g[28]),f[8]=j(g[2]),f[9]=j(g[4]),f[10]=j(g[7]),f[11]=j(g[13]),f[12]=j(g[16]),f[13]=j(g[26]),f[14]=j(g[29]),f[15]=j(g[42]),f[16]=j(g[3]),f[17]=j(g[8]),f[18]=j(g[12]),f[19]=j(g[17]),f[20]=j(g[25]),f[21]=j(g[30]),f[22]=j(g[41]),f[23]=j(g[43]),f[24]=j(g[9]),f[25]=j(g[11]),f[26]=j(g[18]),f[27]=j(g[24]),f[28]=j(g[31]),f[29]=j(g[40]),f[30]=j(g[44]),f[31]=j(g[53]),f[32]=j(g[10]),f[33]=j(g[19]),f[34]=j(g[23]),f[35]=j(g[32]),f[36]=j(g[39]),f[37]=j(g[45]),f[38]=j(g[52]),f[39]=j(g[54]),f[40]=j(g[20]),f[41]=j(g[22]),f[42]=j(g[33]),f[43]=j(g[38]),f[44]=j(g[46]),f[45]=j(g[51]),f[46]=j(g[55]),f[47]=j(g[60]),f[48]=j(g[21]),f[49]=j(g[34]),f[50]=j(g[37]),f[51]=j(g[47]),f[52]=j(g[50]),f[53]=j(g[56]),f[54]=j(g[59]),f[55]=j(g[61]),f[56]=j(g[35]),f[57]=j(g[36]),f[58]=j(g[48]),f[59]=j(g[49]),f[60]=j(g[57]),f[61]=j(g[58]),f[62]=j(g[62]),f[63]=j(g[63])}function z(g){const f=.5*Math.cos(.7853975),B=.5*Math.cos(3.14159/16),Q=.5*Math.cos(3.14159/8),T=.5*Math.cos(3*3.14159/16),v=.5*Math.cos(5*3.14159/16),_=.5*Math.cos(3*3.14159/8),L=.5*Math.cos(7*3.14159/16),F=new Array(4),M=new Array(4),k=new Array(4),P=new Array(4);for(let U=0;U<8;++U){const q=U*8;F[0]=Q*g[q+2],F[1]=_*g[q+2],F[2]=Q*g[q+6],F[3]=_*g[q+6],M[0]=B*g[q+1]+T*g[q+3]+v*g[q+5]+L*g[q+7],M[1]=T*g[q+1]-L*g[q+3]-B*g[q+5]-v*g[q+7],M[2]=v*g[q+1]-B*g[q+3]+L*g[q+5]+T*g[q+7],M[3]=L*g[q+1]-v*g[q+3]+T*g[q+5]-B*g[q+7],k[0]=f*(g[q+0]+g[q+4]),k[3]=f*(g[q+0]-g[q+4]),k[1]=F[0]+F[3],k[2]=F[1]-F[2],P[0]=k[0]+k[1],P[1]=k[3]+k[2],P[2]=k[3]-k[2],P[3]=k[0]-k[1],g[q+0]=P[0]+M[0],g[q+1]=P[1]+M[1],g[q+2]=P[2]+M[2],g[q+3]=P[3]+M[3],g[q+4]=P[3]-M[3],g[q+5]=P[2]-M[2],g[q+6]=P[1]-M[1],g[q+7]=P[0]-M[0]}for(let U=0;U<8;++U)F[0]=Q*g[16+U],F[1]=_*g[16+U],F[2]=Q*g[48+U],F[3]=_*g[48+U],M[0]=B*g[8+U]+T*g[24+U]+v*g[40+U]+L*g[56+U],M[1]=T*g[8+U]-L*g[24+U]-B*g[40+U]-v*g[56+U],M[2]=v*g[8+U]-B*g[24+U]+L*g[40+U]+T*g[56+U],M[3]=L*g[8+U]-v*g[24+U]+T*g[40+U]-B*g[56+U],k[0]=f*(g[U]+g[32+U]),k[3]=f*(g[U]-g[32+U]),k[1]=F[0]+F[3],k[2]=F[1]-F[2],P[0]=k[0]+k[1],P[1]=k[3]+k[2],P[2]=k[3]-k[2],P[3]=k[0]-k[1],g[0+U]=P[0]+M[0],g[8+U]=P[1]+M[1],g[16+U]=P[2]+M[2],g[24+U]=P[3]+M[3],g[32+U]=P[3]-M[3],g[40+U]=P[2]-M[2],g[48+U]=P[1]-M[1],g[56+U]=P[0]-M[0]}function K(g){for(let f=0;f<64;++f){const B=g[0][f],Q=g[1][f],T=g[2][f];g[0][f]=B+1.5747*T,g[1][f]=B-.1873*Q-.4682*T,g[2][f]=B+1.8556*Q}}function X(g,f,B){for(let Q=0;Q<64;++Q)f[B+Q]=rs.toHalfFloat(le(g[Q]))}function le(g){return g<=1?Math.sign(g)*Math.pow(Math.abs(g),2.2):Math.sign(g)*Math.pow(t,Math.abs(g)-1)}function be(g){return new DataView(g.array.buffer,g.offset.value,g.size)}function ge(g){const f=g.viewer.buffer.slice(g.offset.value,g.offset.value+g.size),B=new Uint8Array(V(f)),Q=new Uint8Array(B.length);return G(B),W(B,Q),new DataView(Q.buffer)}function De(g){const f=g.array.slice(g.offset.value,g.offset.value+g.size),B=_s(f),Q=new Uint8Array(B.length);return G(B),W(B,Q),new DataView(Q.buffer)}function ke(g){const f=g.viewer,B={value:g.offset.value},Q=new Uint16Array(g.columns*g.lines*(g.inputChannels.length*g.type)),T=new Uint8Array(8192);let v=0;const _=new Array(g.inputChannels.length);for(let ee=0,O=g.inputChannels.length;ee<O;ee++)_[ee]={},_[ee].start=v,_[ee].end=_[ee].start,_[ee].nx=g.columns,_[ee].ny=g.lines,_[ee].size=g.type,v+=_[ee].nx*_[ee].ny*_[ee].size;const L=ps(f,B),F=ps(f,B);if(F>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(L<=F)for(let ee=0;ee<F-L+1;ee++)T[ee+L]=Ke(f,B);const M=new Uint16Array(65536),k=n(T,M),P=Me(f,B);x(g.array,f,B,P,Q,v);for(let ee=0;ee<g.inputChannels.length;++ee){const O=_[ee];for(let Y=0;Y<_[ee].size;++Y)S(Q,O.start+Y,O.nx,O.size,O.ny,O.nx*O.size,k)}D(M,Q,v);let U=0;const q=new Uint8Array(Q.buffer.byteLength);for(let ee=0;ee<g.lines;ee++)for(let O=0;O<g.inputChannels.length;O++){const Y=_[O],te=Y.nx*Y.size,Ie=new Uint8Array(Q.buffer,Y.end*2,te*2);q.set(Ie,U),U+=te*2,Y.end+=te}return new DataView(q.buffer)}function qe(g){const f=g.array.slice(g.offset.value,g.offset.value+g.size),B=_s(f),Q=g.inputChannels.length*g.lines*g.columns*g.totalBytes,T=new ArrayBuffer(Q),v=new DataView(T);let _=0,L=0;const F=new Array(4);for(let M=0;M<g.lines;M++)for(let k=0;k<g.inputChannels.length;k++){let P=0;switch(g.inputChannels[k].pixelType){case 1:F[0]=_,F[1]=F[0]+g.columns,_=F[1]+g.columns;for(let U=0;U<g.columns;++U){const q=B[F[0]++]<<8|B[F[1]++];P+=q,v.setUint16(L,P,!0),L+=2}break;case 2:F[0]=_,F[1]=F[0]+g.columns,F[2]=F[1]+g.columns,_=F[2]+g.columns;for(let U=0;U<g.columns;++U){const q=B[F[0]++]<<24|B[F[1]++]<<16|B[F[2]++]<<8;P+=q,v.setUint32(L,P,!0),L+=4}break}}return v}function pe(g){const f=g.viewer,B={value:g.offset.value},Q=new Uint8Array(g.columns*g.lines*(g.inputChannels.length*g.type*2)),T={version:Ne(f,B),unknownUncompressedSize:Ne(f,B),unknownCompressedSize:Ne(f,B),acCompressedSize:Ne(f,B),dcCompressedSize:Ne(f,B),rleCompressedSize:Ne(f,B),rleUncompressedSize:Ne(f,B),rleRawSize:Ne(f,B),totalAcUncompressedCount:Ne(f,B),totalDcUncompressedCount:Ne(f,B),acCompression:Ne(f,B)};if(T.version<2)throw new Error("EXRLoader.parse: "+Yt.compression+" version "+T.version+" is unsupported");const v=new Array;let _=ps(f,B)-2;for(;_>0;){const O=ze(f.buffer,B),Y=Ke(f,B),te=Y>>2&3,Ie=(Y>>4)-1,ve=new Int8Array([Ie])[0],st=Ke(f,B);v.push({name:O,index:ve,type:st,compression:te}),_-=O.length+3}const L=Yt.channels,F=new Array(g.inputChannels.length);for(let O=0;O<g.inputChannels.length;++O){const Y=F[O]={},te=L[O];Y.name=te.name,Y.compression=0,Y.decoded=!1,Y.type=te.pixelType,Y.pLinear=te.pLinear,Y.width=g.columns,Y.height=g.lines}const M={idx:new Array(3)};for(let O=0;O<g.inputChannels.length;++O){const Y=F[O];for(let te=0;te<v.length;++te){const Ie=v[te];Y.name==Ie.name&&(Y.compression=Ie.compression,Ie.index>=0&&(M.idx[Ie.index]=O),Y.offset=O)}}let k,P,U;if(T.acCompressedSize>0)switch(T.acCompression){case 0:k=new Uint16Array(T.totalAcUncompressedCount),x(g.array,f,B,T.acCompressedSize,k,T.totalAcUncompressedCount);break;case 1:const O=g.array.slice(B.value,B.value+T.totalAcUncompressedCount),Y=_s(O);k=new Uint16Array(Y.buffer),B.value+=T.totalAcUncompressedCount;break}if(T.dcCompressedSize>0){const O={array:g.array,offset:B,size:T.dcCompressedSize};P=new Uint16Array(De(O).buffer),B.value+=T.dcCompressedSize}if(T.rleRawSize>0){const O=g.array.slice(B.value,B.value+T.rleCompressedSize),Y=_s(O);U=V(Y.buffer),B.value+=T.rleCompressedSize}let q=0;const ee=new Array(F.length);for(let O=0;O<ee.length;++O)ee[O]=new Array;for(let O=0;O<g.lines;++O)for(let Y=0;Y<F.length;++Y)ee[Y].push(q),q+=F[Y].width*g.type*2;J(M,ee,F,k,P,Q);for(let O=0;O<F.length;++O){const Y=F[O];if(!Y.decoded)switch(Y.compression){case 2:let te=0,Ie=0;for(let ve=0;ve<g.lines;++ve){let st=ee[O][te];for(let ue=0;ue<Y.width;++ue){for(let ae=0;ae<2*Y.type;++ae)Q[st++]=U[Ie+ae*Y.width*Y.height];Ie++}te++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(Q.buffer)}function ze(g,f){const B=new Uint8Array(g);let Q=0;for(;B[f.value+Q]!=0;)Q+=1;const T=new TextDecoder().decode(B.slice(f.value,f.value+Q));return f.value=f.value+Q+1,T}function Nt(g,f,B){const Q=new TextDecoder().decode(new Uint8Array(g).slice(f.value,f.value+B));return f.value=f.value+B,Q}function Ut(g,f){const B=Le(g,f),Q=Me(g,f);return[B,Q]}function is(g,f){const B=Me(g,f),Q=Me(g,f);return[B,Q]}function Le(g,f){const B=g.getInt32(f.value,!0);return f.value=f.value+4,B}function Me(g,f){const B=g.getUint32(f.value,!0);return f.value=f.value+4,B}function Gt(g,f){const B=g[f.value];return f.value=f.value+1,B}function Ke(g,f){const B=g.getUint8(f.value);return f.value=f.value+1,B}const Ne=function(g,f){let B;return"getBigInt64"in DataView.prototype?B=Number(g.getBigInt64(f.value,!0)):B=g.getUint32(f.value+4,!0)+Number(g.getUint32(f.value,!0)<<32),f.value+=8,B};function He(g,f){const B=g.getFloat32(f.value,!0);return f.value+=4,B}function wo(g,f){return rs.toHalfFloat(He(g,f))}function j(g){const f=(g&31744)>>10,B=g&1023;return(g>>15?-1:1)*(f?f===31?B?NaN:1/0:Math.pow(2,f-15)*(1+B/1024):6103515625e-14*(B/1024))}function ps(g,f){const B=g.getUint16(f.value,!0);return f.value+=2,B}function yo(g,f){return j(ps(g,f))}function Qo(g,f,B,Q){const T=B.value,v=[];for(;B.value<T+Q-1;){const _=ze(f,B),L=Le(g,B),F=Ke(g,B);B.value+=3;const M=Le(g,B),k=Le(g,B);v.push({name:_,pixelType:L,pLinear:F,xSampling:M,ySampling:k})}return B.value+=1,v}function vo(g,f){const B=He(g,f),Q=He(g,f),T=He(g,f),v=He(g,f),_=He(g,f),L=He(g,f),F=He(g,f),M=He(g,f);return{redX:B,redY:Q,greenX:T,greenY:v,blueX:_,blueY:L,whiteX:F,whiteY:M}}function xo(g,f){const B=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Q=Ke(g,f);return B[Q]}function So(g,f){const B=Le(g,f),Q=Le(g,f),T=Le(g,f),v=Le(g,f);return{xMin:B,yMin:Q,xMax:T,yMax:v}}function Ro(g,f){const B=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],Q=Ke(g,f);return B[Q]}function To(g,f){const B=["ENVMAP_LATLONG","ENVMAP_CUBE"],Q=Ke(g,f);return B[Q]}function Do(g,f){const B=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],Q=["ROUND_DOWN","ROUND_UP"],T=Me(g,f),v=Me(g,f),_=Ke(g,f);return{xSize:T,ySize:v,levelMode:B[_&15],roundingMode:Q[_>>4]}}function ko(g,f){const B=He(g,f),Q=He(g,f);return[B,Q]}function Mo(g,f){const B=He(g,f),Q=He(g,f),T=He(g,f);return[B,Q,T]}function _o(g,f,B,Q,T){if(Q==="string"||Q==="stringvector"||Q==="iccProfile")return Nt(f,B,T);if(Q==="chlist")return Qo(g,f,B,T);if(Q==="chromaticities")return vo(g,B);if(Q==="compression")return xo(g,B);if(Q==="box2i")return So(g,B);if(Q==="envmap")return To(g,B);if(Q==="tiledesc")return Do(g,B);if(Q==="lineOrder")return Ro(g,B);if(Q==="float")return He(g,B);if(Q==="v2f")return ko(g,B);if(Q==="v3f")return Mo(g,B);if(Q==="int")return Le(g,B);if(Q==="rational")return Ut(g,B);if(Q==="timecode")return is(g,B);if(Q==="preview")return B.value+=T,"skipped";B.value+=T}function Fo(g,f){const B=Math.log2(g);return f=="ROUND_DOWN"?Math.floor(B):Math.ceil(B)}function Lo(g,f,B){let Q=0;switch(g.levelMode){case"ONE_LEVEL":Q=1;break;case"MIPMAP_LEVELS":Q=Fo(Math.max(f,B),g.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return Q}function Ci(g,f,B,Q){const T=new Array(g);for(let v=0;v<g;v++){const _=1<<v;let L=f/_|0;Q=="ROUND_UP"&&L*_<f&&(L+=1);const F=Math.max(L,1);T[v]=(F+B-1)/B|0}return T}function No(){const g=this,f=g.offset,B={value:0};for(let Q=0;Q<g.tileCount;Q++){const T=Le(g.viewer,f),v=Le(g.viewer,f);f.value+=8,g.size=Me(g.viewer,f);const _=T*g.blockWidth,L=v*g.blockHeight;g.columns=_+g.blockWidth>g.width?g.width-_:g.blockWidth,g.lines=L+g.blockHeight>g.height?g.height-L:g.blockHeight;const F=g.columns*g.totalBytes,M=g.size<g.lines*F?g.uncompress(g):be(g);f.value+=g.size;for(let k=0;k<g.lines;k++){const P=k*g.columns*g.totalBytes;for(let U=0;U<g.inputChannels.length;U++){const q=Yt.channels[U].name,ee=g.channelByteOffsets[q]*g.columns,O=g.decodeChannels[q];if(O===void 0)continue;B.value=P+ee;const Y=(g.height-(1+L+k))*g.outLineWidth;for(let te=0;te<g.columns;te++){const Ie=Y+(te+_)*g.outputChannels+O;g.byteArray[Ie]=g.getter(M,B)}}}}}function Uo(){const g=this,f=g.offset,B={value:0};for(let Q=0;Q<g.height/g.blockHeight;Q++){const T=Le(g.viewer,f)-Yt.dataWindow.yMin;g.size=Me(g.viewer,f),g.lines=T+g.blockHeight>g.height?g.height-T:g.blockHeight;const v=g.columns*g.totalBytes,_=g.size<g.lines*v?g.uncompress(g):be(g);f.value+=g.size;for(let L=0;L<g.blockHeight;L++){const F=Q*g.blockHeight,M=L+g.scanOrder(F);if(M>=g.height)continue;const k=L*v,P=(g.height-1-M)*g.outLineWidth;for(let U=0;U<g.inputChannels.length;U++){const q=Yt.channels[U].name,ee=g.channelByteOffsets[q]*g.columns,O=g.decodeChannels[q];if(O!==void 0){B.value=k+ee;for(let Y=0;Y<g.columns;Y++){const te=P+Y*g.outputChannels+O;g.byteArray[te]=g.getter(_,B)}}}}}}function Go(g,f,B){const Q={};if(g.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");Q.version=g.getUint8(4);const T=g.getUint8(5);Q.spec={singleTile:!!(T&2),longName:!!(T&4),deepFormat:!!(T&8),multiPart:!!(T&16)},B.value=8;let v=!0;for(;v;){const _=ze(f,B);if(_==0)v=!1;else{const L=ze(f,B),F=Me(g,B),M=_o(g,f,B,L,F);M===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${L}'.`):Q[_]=M}}if(T&-7)throw console.error("THREE.EXRHeader:",Q),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return Q}function Po(g,f,B,Q,T){const v={size:0,viewer:f,array:B,offset:Q,width:g.dataWindow.xMax-g.dataWindow.xMin+1,height:g.dataWindow.yMax-g.dataWindow.yMin+1,inputChannels:g.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:Ve};switch(g.compression){case"NO_COMPRESSION":v.blockHeight=1,v.uncompress=be;break;case"RLE_COMPRESSION":v.blockHeight=1,v.uncompress=ge;break;case"ZIPS_COMPRESSION":v.blockHeight=1,v.uncompress=De;break;case"ZIP_COMPRESSION":v.blockHeight=16,v.uncompress=De;break;case"PIZ_COMPRESSION":v.blockHeight=32,v.uncompress=ke;break;case"PXR24_COMPRESSION":v.blockHeight=16,v.uncompress=qe;break;case"DWAA_COMPRESSION":v.blockHeight=32,v.uncompress=pe;break;case"DWAB_COMPRESSION":v.blockHeight=256,v.uncompress=pe;break;default:throw new Error("EXRLoader.parse: "+g.compression+" is unsupported")}const _={};for(const k of g.channels)switch(k.name){case"Y":case"R":case"G":case"B":case"A":_[k.name]=!0,v.type=k.pixelType}let L=!1;if(_.R&&_.G&&_.B)L=!_.A,v.outputChannels=4,v.decodeChannels={R:0,G:1,B:2,A:3};else if(_.Y)v.outputChannels=1,v.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(v.type==1)switch(T){case wt:v.getter=yo;break;case it:v.getter=ps;break}else if(v.type==2)switch(T){case wt:v.getter=He;break;case it:v.getter=wo}else throw new Error("EXRLoader.parse: unsupported pixelType "+v.type+" for "+g.compression+".");v.columns=v.width;const F=v.width*v.height*v.outputChannels;switch(T){case wt:v.byteArray=new Float32Array(F),L&&v.byteArray.fill(1,0,F);break;case it:v.byteArray=new Uint16Array(F),L&&v.byteArray.fill(15360,0,F);break;default:console.error("THREE.EXRLoader: unsupported type: ",T);break}let M=0;for(const k of g.channels)v.decodeChannels[k.name]!==void 0&&(v.channelByteOffsets[k.name]=M),M+=k.pixelType*2;if(v.totalBytes=M,v.outLineWidth=v.width*v.outputChannels,g.lineOrder==="INCREASING_Y"?v.scanOrder=k=>k:v.scanOrder=k=>v.height-1-k,v.outputChannels==4?(v.format=Pt,v.colorSpace=Ve):(v.format=os,v.colorSpace=Xs),g.spec.singleTile){v.blockHeight=g.tiles.ySize,v.blockWidth=g.tiles.xSize;const k=Lo(g.tiles,v.width,v.height),P=Ci(k,v.width,g.tiles.xSize,g.tiles.roundingMode),U=Ci(k,v.height,g.tiles.ySize,g.tiles.roundingMode);v.tileCount=P[0]*U[0];for(let q=0;q<k;q++)for(let ee=0;ee<U[q];ee++)for(let O=0;O<P[q];O++)Ne(f,Q);v.decode=No.bind(v)}else{v.blockWidth=v.width;const k=Math.ceil(v.height/v.blockHeight);for(let P=0;P<k;P++)Ne(f,Q);v.decode=Uo.bind(v)}return v}const Bi={value:0},wi=new DataView(e),Oo=new Uint8Array(e),Yt=Go(wi,e,Bi),as=Po(Yt,wi,Oo,Bi,this.type);return as.decode(),{header:Yt,width:as.width,height:as.height,data:as.byteArray,format:as.format,colorSpace:as.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,s){function i(a,r){a.colorSpace=r.colorSpace,a.minFilter=dt,a.magFilter=dt,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,r)}return super.load(e,i,n,s)}}const hc=Object.freeze(Object.defineProperty({__proto__:null,EXRLoader:Pa},Symbol.toStringTag,{value:"Module"}));class Oa extends Ui{constructor(e){super(e),this.type=it}parse(e){const t=function(I,C){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},n=`
`,s=function(I,C,E){C=C||1024;let w=I.pos,y=-1,S=0,R="",x=String.fromCharCode.apply(null,new Uint16Array(I.subarray(w,w+128)));for(;0>(y=x.indexOf(n))&&S<C&&w<I.byteLength;)R+=x,S+=x.length,w+=128,x+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(w,w+128)));return-1<y?(E!==!1&&(I.pos+=S+y+1),R+x.slice(0,y)):!1},i=function(I){const C=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,y=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,R={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let x,D;for((I.pos>=I.byteLength||!(x=s(I)))&&t(1,"no header found"),(D=x.match(C))||t(3,"bad initial token"),R.valid|=1,R.programtype=D[1],R.string+=x+`
`;x=s(I),x!==!1;){if(R.string+=x+`
`,x.charAt(0)==="#"){R.comments+=x+`
`;continue}if((D=x.match(E))&&(R.gamma=parseFloat(D[1])),(D=x.match(w))&&(R.exposure=parseFloat(D[1])),(D=x.match(y))&&(R.valid|=2,R.format=D[1]),(D=x.match(S))&&(R.valid|=4,R.height=parseInt(D[1],10),R.width=parseInt(D[2],10)),R.valid&2&&R.valid&4)break}return R.valid&2||t(3,"missing format specifier"),R.valid&4||t(3,"missing image size specifier"),R},a=function(I,C,E){const w=C;if(w<8||w>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);w!==(I[2]<<8|I[3])&&t(3,"wrong scanline width");const y=new Uint8Array(4*C*E);y.length||t(4,"unable to allocate buffer space");let S=0,R=0;const x=4*w,D=new Uint8Array(4),G=new Uint8Array(x);let W=E;for(;W>0&&R<I.byteLength;){R+4>I.byteLength&&t(1),D[0]=I[R++],D[1]=I[R++],D[2]=I[R++],D[3]=I[R++],(D[0]!=2||D[1]!=2||(D[2]<<8|D[3])!=w)&&t(3,"bad rgbe scanline format");let V=0,J;for(;V<x&&R<I.byteLength;){J=I[R++];const $=J>128;if($&&(J-=128),(J===0||V+J>x)&&t(3,"bad scanline data"),$){const z=I[R++];for(let K=0;K<J;K++)G[V++]=z}else G.set(I.subarray(R,R+J),V),V+=J,R+=J}const Z=w;for(let $=0;$<Z;$++){let z=0;y[S]=G[$+z],z+=w,y[S+1]=G[$+z],z+=w,y[S+2]=G[$+z],z+=w,y[S+3]=G[$+z],S+=4}W--}return y},r=function(I,C,E,w){const y=I[C+3],S=Math.pow(2,y-128)/255;E[w+0]=I[C+0]*S,E[w+1]=I[C+1]*S,E[w+2]=I[C+2]*S,E[w+3]=1},A=function(I,C,E,w){const y=I[C+3],S=Math.pow(2,y-128)/255;E[w+0]=rs.toHalfFloat(Math.min(I[C+0]*S,65504)),E[w+1]=rs.toHalfFloat(Math.min(I[C+1]*S,65504)),E[w+2]=rs.toHalfFloat(Math.min(I[C+2]*S,65504)),E[w+3]=rs.toHalfFloat(1)},c=new Uint8Array(e);c.pos=0;const l=i(c),h=l.width,d=l.height,p=a(c.subarray(c.pos),h,d);let u,m,b;switch(this.type){case wt:b=p.length/4;const I=new Float32Array(b*4);for(let E=0;E<b;E++)r(p,E*4,I,E*4);u=I,m=wt;break;case it:b=p.length/4;const C=new Uint16Array(b*4);for(let E=0;E<b;E++)A(p,E*4,C,E*4);u=C,m=it;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:h,height:d,data:u,header:l.string,gamma:l.gamma,exposure:l.exposure,type:m}}setDataType(e){return this.type=e,this}load(e,t,n,s){function i(a,r){switch(a.type){case wt:case it:a.colorSpace=Ve,a.minFilter=dt,a.magFilter=dt,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,r)}return super.load(e,i,n,s)}}const gc=Object.freeze(Object.defineProperty({__proto__:null,RGBELoader:Oa},Symbol.toStringTag,{value:"Module"}));function Ha(o,e,t){const n=t.length-o-1;if(e>=t[n])return n-1;if(e<=t[o])return o;let s=o,i=n,a=Math.floor((s+i)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?i=a:s=a,a=Math.floor((s+i)/2);return a}function dc(o,e,t,n){const s=[],i=[],a=[];s[0]=1;for(let r=1;r<=t;++r){i[r]=e-n[o+1-r],a[r]=n[o+r]-e;let A=0;for(let c=0;c<r;++c){const l=a[c+1],h=i[r-c],d=s[c]/(l+h);s[c]=A+l*d,A=h*d}s[r]=A}return s}function pc(o,e,t,n){const s=Ha(o,n,e),i=dc(s,n,o,e),a=new Mt(0,0,0,0);for(let r=0;r<=o;++r){const A=t[s-o+r],c=i[r],l=A.w*c;a.x+=A.x*l,a.y+=A.y*l,a.z+=A.z*l,a.w+=A.w*c}return a}function uc(o,e,t,n,s){const i=[];for(let h=0;h<=t;++h)i[h]=0;const a=[];for(let h=0;h<=n;++h)a[h]=i.slice(0);const r=[];for(let h=0;h<=t;++h)r[h]=i.slice(0);r[0][0]=1;const A=i.slice(0),c=i.slice(0);for(let h=1;h<=t;++h){A[h]=e-s[o+1-h],c[h]=s[o+h]-e;let d=0;for(let p=0;p<h;++p){const u=c[p+1],m=A[h-p];r[h][p]=u+m;const b=r[p][h-1]/r[h][p];r[p][h]=d+u*b,d=m*b}r[h][h]=d}for(let h=0;h<=t;++h)a[0][h]=r[h][t];for(let h=0;h<=t;++h){let d=0,p=1;const u=[];for(let m=0;m<=t;++m)u[m]=i.slice(0);u[0][0]=1;for(let m=1;m<=n;++m){let b=0;const I=h-m,C=t-m;h>=m&&(u[p][0]=u[d][0]/r[C+1][I],b=u[p][0]*r[I][C]);const E=I>=-1?1:-I,w=h-1<=C?m-1:t-h;for(let S=E;S<=w;++S)u[p][S]=(u[d][S]-u[d][S-1])/r[C+1][I+S],b+=u[p][S]*r[I+S][C];h<=C&&(u[p][m]=-u[d][m-1]/r[C+1][h],b+=u[p][m]*r[h][C]),a[m][h]=b;const y=d;d=p,p=y}}let l=t;for(let h=1;h<=n;++h){for(let d=0;d<=t;++d)a[h][d]*=l;l*=t-h}return a}function fc(o,e,t,n,s){const i=s<o?s:o,a=[],r=Ha(o,n,e),A=uc(r,n,o,i,e),c=[];for(let l=0;l<t.length;++l){const h=t[l].clone(),d=h.w;h.x*=d,h.y*=d,h.z*=d,c[l]=h}for(let l=0;l<=i;++l){const h=c[r-o].clone().multiplyScalar(A[l][0]);for(let d=1;d<=o;++d)h.add(c[r-o+d].clone().multiplyScalar(A[l][d]));a[l]=h}for(let l=i+1;l<=s+1;++l)a[l]=new Mt(0,0,0);return a}function mc(o,e){let t=1;for(let s=2;s<=o;++s)t*=s;let n=1;for(let s=2;s<=e;++s)n*=s;for(let s=2;s<=o-e;++s)n*=s;return t/n}function bc(o){const e=o.length,t=[],n=[];for(let i=0;i<e;++i){const a=o[i];t[i]=new N(a.x,a.y,a.z),n[i]=a.w}const s=[];for(let i=0;i<e;++i){const a=t[i].clone();for(let r=1;r<=i;++r)a.sub(s[i-r].clone().multiplyScalar(mc(i,r)*n[r]));s[i]=a.divideScalar(n[0])}return s}function Ic(o,e,t,n,s){const i=fc(o,e,t,n,s);return bc(i)}class Ec extends mr{constructor(e,t,n,s,i){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=s||0,this.endKnot=i||this.knots.length-1;for(let a=0;a<n.length;++a){const r=n[a];this.controlPoints[a]=new Mt(r.x,r.y,r.z,r.w)}}getPoint(e,t=new N){const n=t,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=pc(this.degree,this.knots,this.controlPoints,s);return i.w!==1&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,t=new N){const n=t,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=Ic(this.degree,this.knots,this.controlPoints,s,1);return n.copy(i[1]).normalize(),n}}let se,xe,We;class Cc extends Dt{constructor(e){super(e)}load(e,t,n,s){const i=this,a=i.path===""?Wt.extractUrlBase(e):i.path,r=new gt(this.manager);r.setPath(i.path),r.setResponseType("arraybuffer"),r.setRequestHeader(i.requestHeader),r.setWithCredentials(i.withCredentials),r.load(e,function(A){try{t(i.parse(A,a))}catch(c){s?s(c):console.error(c),i.manager.itemError(e)}},n,s)}parse(e,t){if(xc(e))se=new vc().parse(e);else{const s=Ya(e);if(!Sc(s))throw new Error("THREE.FBXLoader: Unknown format.");if(za(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+za(s));se=new Qc().parse(s)}const n=new bn(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Bc(n,this.manager).parse(se)}getFbxTree(){return se}}class Bc{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){xe=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),s=this.parseDeformers(),i=new wc().parse(s);return this.parseScene(s,i,n),We}parseConnections(){const e=new Map;return"Connections"in se&&se.Connections.connections.forEach(function(t){const n=t[0],s=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const a={ID:s,relationship:i};e.get(n).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const r={ID:n,relationship:i};e.get(s).children.push(r)}),e}parseImages(){const e={},t={};if("Video"in se.Objects){const n=se.Objects.Video;for(const s in n){const i=n[s],a=parseInt(s);if(e[a]=i.RelativeFilename||i.Filename,"Content"in i){const r=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,A=typeof i.Content=="string"&&i.Content!=="";if(r||A){const c=this.parseImage(n[s]);t[i.RelativeFilename||i.Filename]=c}}}}for(const n in e){const s=e[n];t[s]!==void 0?e[n]=t[s]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,s=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(s){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof t=="string")return"data:"+i+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in se.Objects){const n=se.Objects.Texture;for(const s in n){const i=this.parseTexture(n[s],e);t.set(parseInt(s),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const s=e.WrapModeU,i=e.WrapModeV,a=s!==void 0?s.value:0,r=i!==void 0?i.value:0;if(n.wrapS=a===0?Vt:Ks,n.wrapT=r===0?Vt:Ks,"Scaling"in e){const A=e.Scaling.value;n.repeat.x=A[0],n.repeat.y=A[1]}if("Translation"in e){const A=e.Translation.value;n.offset.x=A[0],n.offset.y=A[1]}return n}loadTexture(e,t){const n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),s=e.FileName.split(".").pop().toLowerCase(),i=n.has(s)?this.manager.getHandler(`.${s}`):this.textureLoader;if(!i)return console.warn(`FBXLoader: ${s.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Qn;const a=i.path;a||i.setPath(this.textureLoader.path);const r=xe.get(e.id).children;let A;r!==void 0&&r.length>0&&t[r[0].ID]!==void 0&&(A=t[r[0].ID],(A.indexOf("blob:")===0||A.indexOf("data:")===0)&&i.setPath(void 0));const c=i.load(A);return i.setPath(a),c}parseMaterials(e){const t=new Map;if("Material"in se.Objects){const n=se.Objects.Material;for(const s in n){const i=this.parseMaterial(n[s],e);i!==null&&t.set(parseInt(s),i)}}return t}parseMaterial(e,t){const n=e.id,s=e.attrName;let i=e.ShadingModel;if(typeof i=="object"&&(i=i.value),!xe.has(n))return null;const a=this.parseParameters(e,t,n);let r;switch(i.toLowerCase()){case"phong":r=new Bs;break;case"lambert":r=new br;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),r=new Bs;break}return r.setValues(a),r.name=s,r}parseParameters(e,t,n){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=Xe.toWorkingColorSpace(new Be().fromArray(e.Diffuse.value),re):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=Xe.toWorkingColorSpace(new Be().fromArray(e.DiffuseColor.value),re)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=Xe.toWorkingColorSpace(new Be().fromArray(e.Emissive.value),re):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=Xe.toWorkingColorSpace(new Be().fromArray(e.EmissiveColor.value),re)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=Xe.toWorkingColorSpace(new Be().fromArray(e.Specular.value),re):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=Xe.toWorkingColorSpace(new Be().fromArray(e.SpecularColor.value),re));const i=this;return xe.get(n).children.forEach(function(a){const r=a.relationship;switch(r){case"Bump":s.bumpMap=i.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":s.aoMap=i.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=i.getTexture(t,a.ID),s.map!==void 0&&(s.map.colorSpace=re);break;case"DisplacementColor":s.displacementMap=i.getTexture(t,a.ID);break;case"EmissiveColor":s.emissiveMap=i.getTexture(t,a.ID),s.emissiveMap!==void 0&&(s.emissiveMap.colorSpace=re);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=i.getTexture(t,a.ID);break;case"ReflectionColor":s.envMap=i.getTexture(t,a.ID),s.envMap!==void 0&&(s.envMap.mapping=Ir,s.envMap.colorSpace=re);break;case"SpecularColor":s.specularMap=i.getTexture(t,a.ID),s.specularMap!==void 0&&(s.specularMap.colorSpace=re);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=i.getTexture(t,a.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r);break}}),s}getTexture(e,t){return"LayeredTexture"in se.Objects&&t in se.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=xe.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in se.Objects){const n=se.Objects.Deformer;for(const s in n){const i=n[s],a=xe.get(parseInt(s));if(i.attrType==="Skin"){const r=this.parseSkeleton(a,n);r.ID=s,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),r.geometryID=a.parents[0].ID,e[s]=r}else if(i.attrType==="BlendShape"){const r={id:s};r.rawTargets=this.parseMorphTargets(a,n),r.id=s,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[s]=r}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(s){const i=t[s.ID];if(i.attrType!=="Cluster")return;const a={ID:s.ID,indices:[],weights:[],transformLink:new oe().fromArray(i.TransformLink.a)};"Indexes"in i&&(a.indices=i.Indexes.a,a.weights=i.Weights.a),n.push(a)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let s=0;s<e.children.length;s++){const i=e.children[s],a=t[i.ID],r={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;r.geoID=xe.get(parseInt(i.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,n.push(r)}return n}parseScene(e,t,n){We=new Xt;const s=this.parseModels(e.skeletons,t,n),i=se.Objects.Model,a=this;s.forEach(function(A){var c;const l=i[A.ID];a.setLookAtProperties(A,l);const h=(c=xe.get(A.ID))==null?void 0:c.parents;h?.forEach(function(d){const p=s.get(d.ID);p!==void 0&&p.add(A)}),A.parent===null&&We.add(A)}),this.bindSkeleton(e.skeletons,t,s),this.addGlobalSceneSettings(),We.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);const c=Ka(A.userData.transformData);A.applyMatrix4(c),A.updateWorldMatrix()}A.isSkinnedMesh&&(A.computeBoundingBox(),A.computeBoundingSphere(),A.boundingBox.expandByScalar(3),A.boundingSphere.radius*=3)});const r=new yc().parse();We.children.length===1&&We.children[0].isGroup&&(We.children[0].animations=r,We=We.children[0]),We.animations=r}parseModels(e,t,n){const s=new Map,i=se.Objects.Model;for(const a in i){const r=parseInt(a),A=i[a],c=xe.get(r);let l=this.buildSkeleton(c,e,r,A.attrName);if(!l){switch(A.attrType){case"Camera":l=this.createCamera(c);break;case"Light":l=this.createLight(c);break;case"Mesh":l=this.createMesh(c,t,n);break;case"NurbsCurve":l=this.createCurve(c,t);break;case"LimbNode":case"Root":l=new wn;break;case"Null":default:l=new Xt;break}l.name=A.attrName?pt.sanitizeNodeName(A.attrName):"",l.userData.originalName=A.attrName,l.ID=r}this.getTransformData(l,A),s.set(r,l)}return s}buildSkeleton(e,t,n,s){let i=null;return e?.parents.forEach(function(a){for(const r in t){const A=t[r];A.rawBones.forEach(function(c,l){if(c.ID===a.ID){const h=i;i=new wn,i.matrixWorld.copy(c.transformLink),i.name=s?pt.sanitizeNodeName(s):"",i.userData.originalName=s,i.ID=n,A.bones[l]=i,h!==null&&i.add(h)}})}}),i}createCamera(e){let t,n;if(e.children.forEach(function(s){const i=se.Objects.NodeAttribute[s.ID];i!==void 0&&(n=i)}),n===void 0)t=new Bt;else{let s=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(s=1);let i=1;n.NearPlane!==void 0&&(i=n.NearPlane.value/1e3);let a=1e3;n.FarPlane!==void 0&&(a=n.FarPlane.value/1e3);let r=window.innerWidth,A=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(r=n.AspectWidth.value,A=n.AspectHeight.value);const c=r/A;let l=45;n.FieldOfView!==void 0&&(l=n.FieldOfView.value);const h=n.FocalLength?n.FocalLength.value:null;switch(s){case 0:t=new Os(l,c,i,a),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new Bt;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),t=new Bt;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(s){const i=se.Objects.NodeAttribute[s.ID];i!==void 0&&(n=i)}),n===void 0)t=new Bt;else{let s;n.LightType===void 0?s=0:s=n.LightType.value;let i=16777215;n.Color!==void 0&&(i=Xe.toWorkingColorSpace(new Be().fromArray(n.Color.value),re));let a=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(a=0);let r=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?r=0:r=n.FarAttenuationEnd.value);const A=1;switch(s){case 0:t=new mn(i,a,r,A);break;case 1:t=new vi(i,a);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=Ee.degToRad(n.InnerAngle.value));let l=0;n.OuterAngle!==void 0&&(l=Ee.degToRad(n.OuterAngle.value),l=Math.max(l,1)),t=new Qi(i,a,r,c,l,A);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new mn(i,a);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let s,i=null,a=null;const r=[];if(e.children.forEach(function(A){t.has(A.ID)&&(i=t.get(A.ID)),n.has(A.ID)&&r.push(n.get(A.ID))}),r.length>1?a=r:r.length>0?a=r[0]:(a=new Bs({name:Dt.DEFAULT_MATERIAL_NAME,color:13421772}),r.push(a)),"color"in i.attributes&&r.forEach(function(A){A.vertexColors=!0}),i.groups.length>0){let A=!1;for(let c=0,l=i.groups.length;c<l;c++){const h=i.groups[c];(h.materialIndex<0||h.materialIndex>=r.length)&&(h.materialIndex=r.length,A=!0)}if(A){const c=new In;r.push(c)}}return i.FBX_Deformer?(s=new Cn(i,a),s.normalizeSkinWeights()):s=new H(i,a),s}createCurve(e,t){const n=e.children.reduce(function(i,a){return t.has(a.ID)&&(i=t.get(a.ID)),i},null),s=new kt({name:Dt.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new ut(n,s)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=Fs(t.RotationOrder.value):n.eulerOrder=Fs(0),"Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&xe.get(e.ID).children.forEach(function(n){if(n.relationship==="LookAtProperty"){const s=se.Objects.Model[n.ID];if("Lcl_Translation"in s){const i=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(i),We.add(e.target)):e.lookAt(new N().fromArray(i))}}})}bindSkeleton(e,t,n){const s=this.parsePoseNodes();for(const i in e){const a=e[i];xe.get(parseInt(a.ID)).parents.forEach(function(r){if(t.has(r.ID)){const A=r.ID;xe.get(A).parents.forEach(function(c){n.has(c.ID)&&n.get(c.ID).bind(new Si(a.bones),s[c.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in se.Objects){const t=se.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const s=t[n].PoseNode;Array.isArray(s)?s.forEach(function(i){e[i.Node]=new oe().fromArray(i.Matrix.a)}):e[s.Node]=new oe().fromArray(s.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in se){if("AmbientColor"in se.GlobalSettings){const e=se.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],s=e[2];if(t!==0||n!==0||s!==0){const i=new Be().setRGB(t,n,s,re);We.add(new Er(i,1))}}"UnitScaleFactor"in se.GlobalSettings&&(We.userData.unitScaleFactor=se.GlobalSettings.UnitScaleFactor.value)}}}class wc{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in se.Objects){const n=se.Objects.Geometry;for(const s in n){const i=xe.get(parseInt(s)),a=this.parseGeometry(i,n[s],e);t.set(parseInt(s),a)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const s=n.skeletons,i=[],a=e.parents.map(function(h){return se.Objects.Model[h.ID]});if(a.length===0)return;const r=e.children.reduce(function(h,d){return s[d.ID]!==void 0&&(h=s[d.ID]),h},null);e.children.forEach(function(h){n.morphTargets[h.ID]!==void 0&&i.push(n.morphTargets[h.ID])});const A=a[0],c={};"RotationOrder"in A&&(c.eulerOrder=Fs(A.RotationOrder.value)),"InheritType"in A&&(c.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(c.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(c.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(c.scale=A.GeometricScaling.value);const l=Ka(c);return this.genGeometry(t,r,i,l)}genGeometry(e,t,n,s){const i=new At;e.attrName&&(i.name=e.attrName);const a=this.parseGeoNode(e,t),r=this.genBuffers(a),A=new Re(r.vertex,3);if(A.applyMatrix4(s),i.setAttribute("position",A),r.colors.length>0&&i.setAttribute("color",new Re(r.colors,3)),t&&(i.setAttribute("skinIndex",new Cr(r.weightsIndices,4)),i.setAttribute("skinWeight",new Re(r.vertexWeights,4)),i.FBX_Deformer=t),r.normal.length>0){const c=new Gi().getNormalMatrix(s),l=new Re(r.normal,3);l.applyNormalMatrix(c),i.setAttribute("normal",l)}if(r.uvs.forEach(function(c,l){const h=l===0?"uv":`uv${l}`;i.setAttribute(h,new Re(r.uvs[l],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=r.materialIndex[0],l=0;if(r.materialIndex.forEach(function(h,d){h!==c&&(i.addGroup(l,d-l,c),c=h,l=d)}),i.groups.length>0){const h=i.groups[i.groups.length-1],d=h.start+h.count;d!==r.materialIndex.length&&i.addGroup(d,r.materialIndex.length-d,c)}i.groups.length===0&&i.addGroup(0,r.materialIndex.length,r.materialIndex[0])}return this.addMorphTargets(i,e,n,s),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(s,i){s.indices.forEach(function(a,r){n.weightTable[a]===void 0&&(n.weightTable[a]=[]),n.weightTable[a].push({id:i,weight:s.weights[r]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,s=0,i=!1,a=[],r=[],A=[],c=[],l=[],h=[];const d=this;return e.vertexIndices.forEach(function(p,u){let m,b=!1;p<0&&(p=p^-1,b=!0);let I=[],C=[];if(a.push(p*3,p*3+1,p*3+2),e.color){const E=on(u,n,p,e.color);A.push(E[0],E[1],E[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(E){C.push(E.weight),I.push(E.id)}),C.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const E=[0,0,0,0],w=[0,0,0,0];C.forEach(function(y,S){let R=y,x=I[S];w.forEach(function(D,G,W){if(R>D){W[G]=R,R=D;const V=E[G];E[G]=x,x=V}})}),I=E,C=w}for(;C.length<4;)C.push(0),I.push(0);for(let E=0;E<4;++E)l.push(C[E]),h.push(I[E])}if(e.normal){const E=on(u,n,p,e.normal);r.push(E[0],E[1],E[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=on(u,n,p,e.material)[0],m<0&&(d.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(E,w){const y=on(u,n,p,E);c[w]===void 0&&(c[w]=[]),c[w].push(y[0]),c[w].push(y[1])}),s++,b&&(d.genFace(t,e,a,m,r,A,c,l,h,s),n++,s=0,a=[],r=[],A=[],c=[],l=[],h=[])}),t}getNormalNewell(e){const t=new N(0,0,0);for(let n=0;n<e.length;n++){const s=e[n],i=e[(n+1)%e.length];t.x+=(s.y-i.y)*(s.z+i.z),t.y+=(s.z-i.z)*(s.x+i.x),t.z+=(s.x-i.x)*(s.y+i.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),n=(Math.abs(t.z)>.5?new N(0,1,0):new N(0,0,1)).cross(t).normalize(),s=t.clone().cross(n).normalize();return{normal:t,tangent:n,bitangent:s}}flattenVertex(e,t,n){return new Fe(e.dot(t),e.dot(n))}genFace(e,t,n,s,i,a,r,A,c,l){let h;if(l>3){const d=[],p=t.baseVertexPositions||t.vertexPositions;for(let I=0;I<n.length;I+=3)d.push(new N(p[n[I]],p[n[I+1]],p[n[I+2]]));const{tangent:u,bitangent:m}=this.getNormalTangentAndBitangent(d),b=[];for(const I of d)b.push(this.flattenVertex(I,u,m));h=Br.triangulateShape(b,[])}else h=[[0,1,2]];for(const[d,p,u]of h)e.vertex.push(t.vertexPositions[n[d*3]]),e.vertex.push(t.vertexPositions[n[d*3+1]]),e.vertex.push(t.vertexPositions[n[d*3+2]]),e.vertex.push(t.vertexPositions[n[p*3]]),e.vertex.push(t.vertexPositions[n[p*3+1]]),e.vertex.push(t.vertexPositions[n[p*3+2]]),e.vertex.push(t.vertexPositions[n[u*3]]),e.vertex.push(t.vertexPositions[n[u*3+1]]),e.vertex.push(t.vertexPositions[n[u*3+2]]),t.skeleton&&(e.vertexWeights.push(A[d*4]),e.vertexWeights.push(A[d*4+1]),e.vertexWeights.push(A[d*4+2]),e.vertexWeights.push(A[d*4+3]),e.vertexWeights.push(A[p*4]),e.vertexWeights.push(A[p*4+1]),e.vertexWeights.push(A[p*4+2]),e.vertexWeights.push(A[p*4+3]),e.vertexWeights.push(A[u*4]),e.vertexWeights.push(A[u*4+1]),e.vertexWeights.push(A[u*4+2]),e.vertexWeights.push(A[u*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3]),e.weightsIndices.push(c[p*4]),e.weightsIndices.push(c[p*4+1]),e.weightsIndices.push(c[p*4+2]),e.weightsIndices.push(c[p*4+3]),e.weightsIndices.push(c[u*4]),e.weightsIndices.push(c[u*4+1]),e.weightsIndices.push(c[u*4+2]),e.weightsIndices.push(c[u*4+3])),t.color&&(e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2]),e.colors.push(a[u*3]),e.colors.push(a[u*3+1]),e.colors.push(a[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),t.normal&&(e.normal.push(i[d*3]),e.normal.push(i[d*3+1]),e.normal.push(i[d*3+2]),e.normal.push(i[p*3]),e.normal.push(i[p*3+1]),e.normal.push(i[p*3+2]),e.normal.push(i[u*3]),e.normal.push(i[u*3+1]),e.normal.push(i[u*3+2])),t.uv&&t.uv.forEach(function(m,b){e.uvs[b]===void 0&&(e.uvs[b]=[]),e.uvs[b].push(r[b][d*2]),e.uvs[b].push(r[b][d*2+1]),e.uvs[b].push(r[b][p*2]),e.uvs[b].push(r[b][p*2+1]),e.uvs[b].push(r[b][u*2]),e.uvs[b].push(r[b][u*2+1])})}addMorphTargets(e,t,n,s){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach(function(a){a.rawTargets.forEach(function(r){const A=se.Objects.Geometry[r.geoID];A!==void 0&&i.genMorphGeometry(e,t,A,s,r.name)})})}genMorphGeometry(e,t,n,s,i){const a=t.Vertices!==void 0?t.Vertices.a:[],r=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],A=n.Vertices!==void 0?n.Vertices.a:[],c=n.Indexes!==void 0?n.Indexes.a:[],l=e.attributes.position.count*3,h=new Float32Array(l);for(let m=0;m<c.length;m++){const b=c[m]*3;h[b]=A[m*3],h[b+1]=A[m*3+1],h[b+2]=A[m*3+2]}const d={vertexIndices:r,vertexPositions:h,baseVertexPositions:a},p=this.genBuffers(d),u=new Re(p.vertex,3);u.name=i||n.attrName,u.applyMatrix4(s),e.morphAttributes.position.push(u)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Normals.a;let i=[];return n==="IndexToDirect"&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.UV.a;let i=[];return n==="IndexToDirect"&&(i=e.UVIndex.a),{dataSize:2,buffer:s,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){if(!e.Colors)return;const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Colors.a;let i=[];n==="IndexToDirect"&&(i=e.ColorIndex.a);for(let a=0,r=new Be;a<s.length;a+=4)r.fromArray(s,a),Xe.toWorkingColorSpace(r,re),r.toArray(s,a);return{dataSize:4,buffer:s,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const s=e.Materials.a,i=[];for(let a=0;a<s.length;++a)i.push(a);return{dataSize:1,buffer:s,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new At;const n=t-1,s=e.KnotVector.a,i=[],a=e.Points.a;for(let l=0,h=a.length;l<h;l+=4)i.push(new Mt().fromArray(a,l));let r,A;if(e.Form==="Closed")i.push(i[0]);else if(e.Form==="Periodic"){r=n,A=s.length-1-r;for(let l=0;l<n;++l)i.push(i[l])}const c=new Ec(n,s,i,r,A).getPoints(i.length*12);return new At().setFromPoints(c)}}class yc{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const s=t[n],i=this.addClip(s);e.push(i)}return e}parseClips(){if(se.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=se.Objects.AnimationCurveNode,t=new Map;for(const n in e){const s=e[n];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const i={id:s.id,attr:s.attrName,curves:{}};t.set(i.id,i)}}return t}parseAnimationCurves(e){const t=se.Objects.AnimationCurve;for(const n in t){const s={id:t[n].id,times:t[n].KeyTime.a.map(Rc),values:t[n].KeyValueFloat.a},i=xe.get(s.id);if(i!==void 0){const a=i.parents[0].ID,r=i.parents[0].relationship;r.match(/X/)?e.get(a).curves.x=s:r.match(/Y/)?e.get(a).curves.y=s:r.match(/Z/)?e.get(a).curves.z=s:r.match(/DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=s)}}}parseAnimationLayers(e){const t=se.Objects.AnimationLayer,n=new Map;for(const s in t){const i=[],a=xe.get(parseInt(s));a!==void 0&&(a.children.forEach(function(r,A){if(e.has(r.ID)){const c=e.get(r.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(i[A]===void 0){const l=xe.get(r.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(l!==void 0){const h=se.Objects.Model[l.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",r);return}const d={modelName:h.attrName?pt.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};We.traverse(function(p){p.ID===h.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new oe),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),i[A]=d}}i[A]&&(i[A][c.attr]=c)}else if(c.curves.morph!==void 0){if(i[A]===void 0){const l=xe.get(r.ID).parents.filter(function(b){return b.relationship!==void 0})[0].ID,h=xe.get(l).parents[0].ID,d=xe.get(h).parents[0].ID,p=xe.get(d).parents[0].ID,u=se.Objects.Model[p],m={modelName:u.attrName?pt.sanitizeNodeName(u.attrName):"",morphName:se.Objects.Deformer[l].attrName};i[A]=m}i[A][c.attr]=c}}}),n.set(parseInt(s),i))}return n}parseAnimStacks(e){const t=se.Objects.AnimationStack,n={};for(const s in t){const i=xe.get(parseInt(s)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(i[0].ID);n[s]={name:t[s].attrName,layer:a}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(s){t=t.concat(n.generateTracks(s))}),new Bn(e.name,-1,t)}generateTracks(e){const t=[];let n=new N,s=new N;if(e.transform&&e.transform.decompose(n,new we,s),n=n.toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");i!==void 0&&t.push(i)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const i=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);i!==void 0&&t.push(i)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");i!==void 0&&t.push(i)}if(e.DeformPercent!==void 0){const i=this.generateMorphTrack(e);i!==void 0&&t.push(i)}return t}generateVectorTrack(e,t,n,s){const i=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(i,t,n);return new Ys(e+"."+s,i,a)}generateRotationTrack(e,t,n,s,i){let a,r;if(t.x===void 0||t.y===void 0||t.z===void 0){console.warn("THREE.FBXLoader: Missing rotation curves "+(t.x===void 0?"x ":"")+(t.y===void 0?"y ":"")+(t.z===void 0?"z ":"")+" for animation of "+e+". This is currently not supported.");return}if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const d=this.interpolateRotations(t.x,t.y,t.z,i);a=d[0],r=d[1]}const A=Fs(0);n!==void 0&&(n=n.map(Ee.degToRad),n.push(A),n=new Ot().fromArray(n),n=new we().setFromEuler(n)),s!==void 0&&(s=s.map(Ee.degToRad),s.push(A),s=new Ot().fromArray(s),s=new we().setFromEuler(s).invert());const c=new we,l=new Ot,h=[];if(!(!r||!a)){for(let d=0;d<r.length;d+=3)l.set(r[d],r[d+1],r[d+2],i),c.setFromEuler(l),n!==void 0&&c.premultiply(n),s!==void 0&&c.multiply(s),d>2&&new we().fromArray(h,(d-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(h,d/3*4);return new Ws(e+".quaternion",a,h)}}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(i){return i/100}),s=We.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Js(e.modelName+".morphTargetInfluences["+s+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,s){return n-s}),t.length>1){let n=1,s=t[0];for(let i=1;i<t.length;i++){const a=t[i];a!==s&&(t[n]=a,s=a,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const s=n,i=[];let a=-1,r=-1,A=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(r=t.y.times.indexOf(c)),t.z&&(A=t.z.times.indexOf(c)),a!==-1){const l=t.x.values[a];i.push(l),s[0]=l}else i.push(s[0]);if(r!==-1){const l=t.y.values[r];i.push(l),s[1]=l}else i.push(s[1]);if(A!==-1){const l=t.z.values[A];i.push(l),s[2]=l}else i.push(s[2])}),i}interpolateRotations(e,t,n,s){const i=[],a=[];i.push(e.times[0]),a.push(Ee.degToRad(e.values[0])),a.push(Ee.degToRad(t.values[0])),a.push(Ee.degToRad(n.values[0]));for(let r=1;r<e.values.length;r++){const A=[e.values[r-1],t.values[r-1],n.values[r-1]];if(isNaN(A[0])||isNaN(A[1])||isNaN(A[2]))continue;const c=A.map(Ee.degToRad),l=[e.values[r],t.values[r],n.values[r]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const h=l.map(Ee.degToRad),d=[l[0]-A[0],l[1]-A[1],l[2]-A[2]],p=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const u=Math.max(...p)/180,m=new Ot(...c,s),b=new Ot(...h,s),I=new we().setFromEuler(m),C=new we().setFromEuler(b);I.dot(C)&&C.set(-C.x,-C.y,-C.z,-C.w);const E=e.times[r-1],w=e.times[r]-E,y=new we,S=new Ot;for(let R=0;R<1;R+=1/u)y.copy(I.clone().slerp(C.clone(),R)),i.push(E+R*w),S.setFromQuaternion(y,s),a.push(S.x),a.push(S.y),a.push(S.z)}else i.push(e.times[r]),a.push(Ee.degToRad(e.values[r])),a.push(Ee.degToRad(t.values[r])),a.push(Ee.degToRad(n.values[r]))}return[i,a]}}class Qc{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new qa,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(s,i){const a=s.match(/^[\s\t]*;/),r=s.match(/^[\s\t]*$/);if(a||r)return;const A=s.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=s.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=s.match("^\\t{"+(t.currentIndent-1)+"}}");A?t.parseNodeBegin(s,A):c?t.parseNodeProperty(s,c,n[++i]):l?t.popStack():s.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),s=t[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),i={name:n},a=this.parseNodeAttr(s),r=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,i):n in r?(n==="PoseNode"?r.PoseNode.push(i):r[n].id!==void 0&&(r[n]={},r[n][r[n].id]=r[n]),a.id!==""&&(r[n][a.id]=i)):typeof a.id=="number"?(r[n]={},r[n][a.id]=i):n!=="Properties70"&&(n==="PoseNode"?r[n]=[i]:r[n]=i),typeof a.id=="number"&&(i.id=a.id),a.name!==""&&(i.attrName=a.name),a.type!==""&&(i.attrType=a.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",s="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:t,name:n,type:s}}parseNodeProperty(e,t,n){let s=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&i===","&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,s,i);return}if(s==="C"){const r=i.split(",").slice(1),A=parseInt(r[0]),c=parseInt(r[1]);let l=i.split(",").slice(3);l=l.map(function(h){return h.trim().replace(/^"/,"")}),s="connections",i=[A,c],Dc(i,l),a[s]===void 0&&(a[s]=[])}s==="Node"&&(a.id=i),s in a&&Array.isArray(a[s])?a[s].push(i):s!=="a"?a[s]=i:a.a=i,this.setCurrentProp(a,s),s==="a"&&i.slice(-1)!==","&&(a.a=ri(i))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=ri(t.a))}parseNodeSpecialProperty(e,t,n){const s=n.split('",').map(function(l){return l.trim().replace(/^\"/,"").replace(/\s/,"_")}),i=s[0],a=s[1],r=s[2],A=s[3];let c=s[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=ri(c);break}this.getPrevNode()[i]={type:a,type2:r,flag:A,value:c},this.setCurrentProp(this.getPrevNode(),i)}}class vc{parse(e){const t=new ja(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const s=new qa;for(;!this.endOfContent(t);){const i=this.parseNode(t,n);i!==null&&s.add(i.name,i)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},s=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),r=e.getString(a);if(s===0)return null;const A=[];for(let d=0;d<i;d++)A.push(this.parseProperty(e));const c=A.length>0?A[0]:"",l=A.length>1?A[1]:"",h=A.length>2?A[2]:"";for(n.singleProperty=i===1&&e.getOffset()===s;s>e.getOffset();){const d=this.parseNode(e,t);d!==null&&this.parseSubNode(r,n,d)}return n.propertyList=A,typeof c=="number"&&(n.id=c),l!==""&&(n.attrName=l),h!==""&&(n.attrType=h),r!==""&&(n.name=r),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const s=n.propertyList[0];Array.isArray(s)?(t[n.name]=n,n.a=s):t[n.name]=s}else if(e==="Connections"&&n.name==="C"){const s=[];n.propertyList.forEach(function(i,a){a!==0&&s.push(i)}),t.connections===void 0&&(t.connections=[]),t.connections.push(s)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let s=n.propertyList[0],i=n.propertyList[1];const a=n.propertyList[2],r=n.propertyList[3];let A;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),i==="Color"||i==="ColorRGB"||i==="Vector"||i==="Vector3D"||i.indexOf("Lcl_")===0?A=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:A=n.propertyList[4],t[s]={type:i,type2:a,flag:r,value:A}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),i=e.getUint32(),a=e.getUint32();if(i===0)switch(t){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const r=_s(new Uint8Array(e.getArrayBuffer(a))),A=new ja(r.buffer);switch(t){case"b":case"c":return A.getBooleanArray(s);case"d":return A.getFloat64Array(s);case"f":return A.getFloat32Array(s);case"i":return A.getInt32Array(s);case"l":return A.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class ja{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const s=n.indexOf(0);return s>=0&&(n=new Uint8Array(this.dv.buffer,t,s)),this._textDecoder.decode(n)}}class qa{add(e,t){this[e]=t}}function xc(o){const e="Kaydara FBX Binary  \0";return o.byteLength>=e.length&&e===Ya(o,0,e.length)}function Sc(o){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(s){const i=o[s-1];return o=o.slice(t+s),t++,i}for(let s=0;s<e.length;++s)if(n(1)===e[s])return!1;return!0}function za(o){const e=/FBXVersion: (\d+)/,t=o.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Rc(o){return o/46186158e3}const Tc=[];function on(o,e,t,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=o;break;case"ByPolygon":s=e;break;case"ByVertice":s=t;break;case"AllSame":s=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(s=n.indices[s]);const i=s*n.dataSize,a=i+n.dataSize;return kc(Tc,n.buffer,i,a)}const oi=new Ot,hs=new N;function Ka(o){const e=new oe,t=new oe,n=new oe,s=new oe,i=new oe,a=new oe,r=new oe,A=new oe,c=new oe,l=new oe,h=new oe,d=new oe,p=o.inheritType?o.inheritType:0;o.translation&&e.setPosition(hs.fromArray(o.translation));const u=Fs(0);if(o.preRotation){const W=o.preRotation.map(Ee.degToRad);W.push(u),t.makeRotationFromEuler(oi.fromArray(W))}if(o.rotation){const W=o.rotation.map(Ee.degToRad);W.push(o.eulerOrder||u),n.makeRotationFromEuler(oi.fromArray(W))}if(o.postRotation){const W=o.postRotation.map(Ee.degToRad);W.push(u),s.makeRotationFromEuler(oi.fromArray(W)),s.invert()}o.scale&&i.scale(hs.fromArray(o.scale)),o.scalingOffset&&r.setPosition(hs.fromArray(o.scalingOffset)),o.scalingPivot&&a.setPosition(hs.fromArray(o.scalingPivot)),o.rotationOffset&&A.setPosition(hs.fromArray(o.rotationOffset)),o.rotationPivot&&c.setPosition(hs.fromArray(o.rotationPivot)),o.parentMatrixWorld&&(h.copy(o.parentMatrix),l.copy(o.parentMatrixWorld));const m=t.clone().multiply(n).multiply(s),b=new oe;b.extractRotation(l);const I=new oe;I.copyPosition(l);const C=I.clone().invert().multiply(l),E=b.clone().invert().multiply(C),w=i,y=new oe;if(p===0)y.copy(b).multiply(m).multiply(E).multiply(w);else if(p===1)y.copy(b).multiply(E).multiply(m).multiply(w);else{const W=new oe().scale(new N().setFromMatrixScale(h)).clone().invert(),V=E.clone().multiply(W);y.copy(b).multiply(m).multiply(V).multiply(w)}const S=c.clone().invert(),R=a.clone().invert();let x=e.clone().multiply(A).multiply(c).multiply(t).multiply(n).multiply(s).multiply(S).multiply(r).multiply(a).multiply(i).multiply(R);const D=new oe().copyPosition(x),G=l.clone().multiply(D);return d.copyPosition(G),x=d.clone().multiply(y),x.premultiply(l.invert()),x}function Fs(o){o=o||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return o===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[o]}function ri(o){return o.split(",").map(function(e){return parseFloat(e)})}function Ya(o,e,t){return e===void 0&&(e=0),t===void 0&&(t=o.byteLength),new TextDecoder().decode(new Uint8Array(o,e,t))}function Dc(o,e){for(let t=0,n=o.length,s=e.length;t<s;t++,n++)o[n]=e[t]}function kc(o,e,t,n){for(let s=t,i=0;s<n;s++,i++)o[i]=e[s];return o}class Mc extends Dt{constructor(e){super(e)}load(e,t,n,s){const i=this,a=this.path===""?Wt.extractUrlBase(e):this.path,r=new gt(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(A){try{t(i.parse(A,a))}catch(c){s?s(c):console.error(c),i.manager.itemError(e)}},n,s)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split(`
`);let s={};const i=/\s+/,a={};for(let A=0;A<n.length;A++){let c=n[A];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const l=c.indexOf(" ");let h=l>=0?c.substring(0,l):c;h=h.toLowerCase();let d=l>=0?c.substring(l+1):"";if(d=d.trim(),h==="newmtl")s={name:d},a[d]=s;else if(h==="ka"||h==="kd"||h==="ks"||h==="ke"){const p=d.split(i,3);s[h]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else s[h]=d}const r=new _c(this.resourcePath||t,this.materialOptions);return r.setCrossOrigin(this.crossOrigin),r.setManager(this.manager),r.setMaterials(a),r}}class _c{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:_i,this.wrap=this.options.wrap!==void 0?this.options.wrap:Vt}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const s=e[n],i={};t[n]=i;for(const a in s){let r=!0,A=s[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(A=[A[0]/255,A[1]/255,A[2]/255]),this.options&&this.options.ignoreZeroRGBs&&A[0]===0&&A[1]===0&&A[2]===0&&(r=!1);break}r&&(i[c]=A)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],s={name:e,side:this.side};function i(r,A){return typeof A!="string"||A===""?"":/^https?:\/\//i.test(A)?A:r+A}function a(r,A){if(s[r])return;const c=t.getTextureParams(A,s),l=t.loadTexture(i(t.baseUrl,c.url));l.repeat.copy(c.scale),l.offset.copy(c.offset),l.wrapS=t.wrap,l.wrapT=t.wrap,(r==="map"||r==="emissiveMap")&&(l.colorSpace=re),s[r]=l}for(const r in n){const A=n[r];let c;if(A!=="")switch(r.toLowerCase()){case"kd":s.color=Xe.toWorkingColorSpace(new Be().fromArray(A),re);break;case"ks":s.specular=Xe.toWorkingColorSpace(new Be().fromArray(A),re);break;case"ke":s.emissive=Xe.toWorkingColorSpace(new Be().fromArray(A),re);break;case"map_kd":a("map",A);break;case"map_ks":a("specularMap",A);break;case"map_ke":a("emissiveMap",A);break;case"norm":a("normalMap",A);break;case"map_bump":case"bump":a("bumpMap",A);break;case"map_d":a("alphaMap",A),s.transparent=!0;break;case"ns":s.shininess=parseFloat(A);break;case"d":c=parseFloat(A),c<1&&(s.opacity=c,s.transparent=!0);break;case"tr":c=parseFloat(A),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(s.opacity=1-c,s.transparent=!0);break}}return this.materials[e]=new Bs(s),this.materials[e]}getTextureParams(e,t){const n={scale:new Fe(1,1),offset:new Fe(0,0)},s=e.split(/\s+/);let i;return i=s.indexOf("-bm"),i>=0&&(t.bumpScale=parseFloat(s[i+1]),s.splice(i,2)),i=s.indexOf("-s"),i>=0&&(n.scale.set(parseFloat(s[i+1]),parseFloat(s[i+2])),s.splice(i,4)),i=s.indexOf("-o"),i>=0&&(n.offset.set(parseFloat(s[i+1]),parseFloat(s[i+2])),s.splice(i,4)),n.url=s.join(" ").trim(),n}loadTexture(e,t,n,s,i){const a=this.manager!==void 0?this.manager:wr;let r=a.getHandler(e);r===null&&(r=new bn(a)),r.setCrossOrigin&&r.setCrossOrigin(this.crossOrigin);const A=r.load(e,n,s,i);return t!==void 0&&(A.mapping=t),A}}const Fc=/^[og]\s*(.+)?/,Lc=/^mtllib /,Nc=/^usemtl /,Uc=/^usemap /,Ja=/\s+/,Wa=new N,Ai=new N,Va=new N,Xa=new N,lt=new N,rn=new Be;function Gc(){const o={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,i){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const r={index:this.materials.length,name:s||"",mtllib:Array.isArray(i)&&i.length>0?i[i.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(A){const c={index:typeof A=="number"?A:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const i=this.currentMaterial();if(i&&i.groupEnd===-1&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),s&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),i}},n&&n.name&&typeof n.clone=="function"){const s=n.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseNormalIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseUVIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/2)*2},addVertex:function(e,t,n){const s=this.vertices,i=this.object.geometry.vertices;i.push(s[e+0],s[e+1],s[e+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[n+0],s[n+1],s[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const s=this.normals,i=this.object.geometry.normals;i.push(s[e+0],s[e+1],s[e+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[n+0],s[n+1],s[n+2])},addFaceNormal:function(e,t,n){const s=this.vertices,i=this.object.geometry.normals;Wa.fromArray(s,e),Ai.fromArray(s,t),Va.fromArray(s,n),lt.subVectors(Va,Ai),Xa.subVectors(Wa,Ai),lt.cross(Xa),lt.normalize(),i.push(lt.x,lt.y,lt.z),i.push(lt.x,lt.y,lt.z),i.push(lt.x,lt.y,lt.z)},addColor:function(e,t,n){const s=this.colors,i=this.object.geometry.colors;s[e]!==void 0&&i.push(s[e+0],s[e+1],s[e+2]),s[t]!==void 0&&i.push(s[t+0],s[t+1],s[t+2]),s[n]!==void 0&&i.push(s[n+0],s[n+1],s[n+2])},addUV:function(e,t,n){const s=this.uvs,i=this.object.geometry.uvs;i.push(s[e+0],s[e+1]),i.push(s[t+0],s[t+1]),i.push(s[n+0],s[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,s,i,a,r,A,c){const l=this.vertices.length;let h=this.parseVertexIndex(e,l),d=this.parseVertexIndex(t,l),p=this.parseVertexIndex(n,l);if(this.addVertex(h,d,p),this.addColor(h,d,p),r!==void 0&&r!==""){const u=this.normals.length;h=this.parseNormalIndex(r,u),d=this.parseNormalIndex(A,u),p=this.parseNormalIndex(c,u),this.addNormal(h,d,p)}else this.addFaceNormal(h,d,p);if(s!==void 0&&s!==""){const u=this.uvs.length;h=this.parseUVIndex(s,u),d=this.parseUVIndex(i,u),p=this.parseUVIndex(a,u),this.addUV(h,d,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,s=e.length;n<s;n++){const i=this.parseVertexIndex(e[n],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,s=this.uvs.length;for(let i=0,a=e.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));for(let i=0,a=t.length;i<a;i++)this.addUVLine(this.parseUVIndex(t[i],s))}};return o.startObject("",!1),o}class Pc extends Dt{constructor(e){super(e),this.materials=null,this.materialsLoader=new Mc(e)}load(e,t,n,s){const i=this,a=new gt(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,async function(r){try{const A=i.parse(r,!0);for(let c=0,l=A.materialLibraries.length;c<l;c++){const h=A.materialLibraries[c],d=e.startsWith("blob:")?e+"/"+h:new URL(h,e);console.debug("Loading MTL file: "+d),await new Promise((p,u)=>{i.materialsLoader.load(d.toString(),m=>{i.setMaterials(m),p()},null,u)})}t(i.createObjects(A))}catch(A){s?s(A):console.error(A),i.manager.itemError(e)}},n,s)}setMTLLoader(e){return this.materialsLoader=e,this}setMaterials(e){return this.materials=e,this}parse(e,t=!1){const n=new Gc;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const s=e.split(`
`);let i=[];for(let a=0,r=s.length;a<r;a++){const A=s[a].trimStart();if(A.length===0)continue;const c=A.charAt(0);if(c!=="#")if(c==="v"){const l=A.split(Ja);switch(l[0]){case"v":n.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),l.length>=7?(rn.setRGB(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6]),re),n.colors.push(rn.r,rn.g,rn.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":n.uvs.push(parseFloat(l[1]),parseFloat(l[2]));break}}else if(c==="f"){const l=A.slice(1).trim().split(Ja),h=[];for(let p=0,u=l.length;p<u;p++){const m=l[p];if(m.length>0){const b=m.split("/");h.push(b)}}const d=h[0];for(let p=1,u=h.length-1;p<u;p++){const m=h[p],b=h[p+1];n.addFace(d[0],m[0],b[0],d[1],m[1],b[1],d[2],m[2],b[2])}}else if(c==="l"){const l=A.substring(1).trim().split(" ");let h=[];const d=[];if(A.indexOf("/")===-1)h=l;else for(let p=0,u=l.length;p<u;p++){const m=l[p].split("/");m[0]!==""&&h.push(m[0]),m[1]!==""&&d.push(m[1])}n.addLineGeometry(h,d)}else if(c==="p"){const l=A.slice(1).trim().split(" ");n.addPointGeometry(l)}else if((i=Fc.exec(A))!==null){const l=(" "+i[0].slice(1).trim()).slice(1);n.startObject(l)}else if(Nc.test(A))n.object.startMaterial(A.substring(7).trim(),n.materialLibraries);else if(Lc.test(A))n.materialLibraries.push(A.substring(7).trim());else if(Uc.test(A))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(i=A.split(" "),i.length>1){const h=i[1].trim().toLowerCase();n.object.smooth=h!=="0"&&h!=="off"}else n.object.smooth=!0;const l=n.object.currentMaterial();l&&(l.smooth=n.object.smooth)}else{if(A==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+A+'"')}}return n.finalize(),t?n:this.createObjects(n)}createObjects(e){const t=new Xt;if(t.materialLibraries=[].concat(e.materialLibraries),!(e.objects.length===1&&e.objects[0].geometry.vertices.length===0))for(let n=0,s=e.objects.length;n<s;n++){const i=e.objects[n],a=i.geometry,r=i.materials,A=a.type==="Line",c=a.type==="Points";let l=!1;if(a.vertices.length===0)continue;const h=new At;h.setAttribute("position",new Re(a.vertices,3)),a.normals.length>0&&h.setAttribute("normal",new Re(a.normals,3)),a.colors.length>0&&(l=!0,h.setAttribute("color",new Re(a.colors,3))),a.hasUVIndices===!0&&h.setAttribute("uv",new Re(a.uvs,2));const d=[];for(let u=0,m=r.length;u<m;u++){const b=r[u],I=b.name+"_"+b.smooth+"_"+l;let C=e.materials[I];if(this.materials!==null){if(C=this.materials.create(b.name),A&&C&&!(C instanceof kt)){const E=new kt;Jt.prototype.copy.call(E,C),E.color.copy(C.color),C=E}else if(c&&C&&!(C instanceof ms)){const E=new ms({size:10,sizeAttenuation:!1});Jt.prototype.copy.call(E,C),E.color.copy(C.color),E.map=C.map,C=E}}C===void 0&&(A?C=new kt:c?C=new ms({size:1,sizeAttenuation:!1}):C=new Bs,C.name=b.name,C.flatShading=!b.smooth,C.vertexColors=l,e.materials[I]=C),d.push(C)}let p;if(d.length>1){for(let u=0,m=r.length;u<m;u++){const b=r[u];h.addGroup(b.groupStart,b.groupCount,u)}A?p=new qs(h,d):c?p=new zs(h,d):p=new H(h,d)}else A?p=new qs(h,d[0]):c?p=new zs(h,d[0]):p=new H(h,d[0]);p.name=i.name,t.add(p)}else if(e.vertices.length>0){const n=new ms({size:1,sizeAttenuation:!1}),s=new At;s.setAttribute("position",new Re(e.vertices,3)),e.colors.length>0&&e.colors[0]!==void 0&&(s.setAttribute("color",new Re(e.colors,3)),n.vertexColors=!0);const i=new zs(s,n);t.add(i)}return t}}const Za={type:"change"},ci={type:"start"},$a={type:"end"},An=new yr,eo=new Qr,Oc=Math.cos(70*Ee.DEG2RAD),Te=new N;new N;const tt=2*Math.PI,ce={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},li=1e-6;let Hc=class extends Ni{constructor(o,e=null){super(o,e),this.state=ce.NONE,this.enabled=!0,this.target=new N,this.cursor=new N,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:As.ROTATE,MIDDLE:As.DOLLY,RIGHT:As.PAN},this.touches={ONE:cs.ROTATE,TWO:cs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new N,this._lastQuaternion=new we,this._lastTargetPosition=new N,this._quat=new we().setFromUnitVectors(o.up,new N(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Pi,this._sphericalDelta=new Pi,this._scale=1,this._currentScale=1,this._panOffset=new N,this._rotateStart=new Fe,this._rotateEnd=new Fe,this._rotateDelta=new Fe,this._panStart=new Fe,this._panEnd=new Fe,this._panDelta=new Fe,this._dollyStart=new Fe,this._dollyEnd=new Fe,this._dollyDelta=new Fe,this._dollyDirection=new N,this._mouse=new Fe,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=qc.bind(this),this._onPointerDown=jc.bind(this),this._onPointerUp=zc.bind(this),this._onContextMenu=Zc.bind(this),this._onMouseWheel=Jc.bind(this),this._onKeyDown=Wc.bind(this),this._onTouchStart=Vc.bind(this),this._onTouchMove=Xc.bind(this),this._onMouseDown=Kc.bind(this),this._onMouseMove=Yc.bind(this),this._interceptControlDown=$c.bind(this),this._interceptControlUp=el.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(o){o.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=o}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Za),this.update(),this.state=ce.NONE}update(o=null){const e=this.object.getWorldPosition(this.object.position);Te.copy(e).sub(this.target),Te.applyQuaternion(this._quat),this._spherical.setFromVector3(Te),this.autoRotate&&this.state===ce.NONE&&this._rotateLeft(this._getAutoRotationAngle(o)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let t=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=tt:t>Math.PI&&(t-=tt),n<-Math.PI?n+=tt:n>Math.PI&&(n-=tt),t<=n?this._spherical.theta=Math.max(t,Math.min(n,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(t+n)/2?Math.max(t,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.enableDamping?this._currentScale=Ee.lerp(this._currentScale,this._scale,this.dampingFactor):this._currentScale=this._scale,this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const i=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._currentScale),s=i!=this._spherical.radius}if(Te.setFromSpherical(this._spherical),Te.applyQuaternion(this._quatInverse),e.copy(this.target).add(Te),this.object.parent?this.object.parent.worldToLocal(e):this.object.position.copy(e),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let i=null;if(this.object.isPerspectiveCamera){const a=Te.length();i=this._clampDistance(a*this._currentScale);const r=a-i;this.object.position.addScaledVector(this._dollyDirection,r),this.object.updateMatrixWorld(),s=!!r}else if(this.object.isOrthographicCamera){const a=new N(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._currentScale)),this.object.updateProjectionMatrix(),s=r!==this.object.zoom;const A=new N(this._mouse.x,this._mouse.y,0);A.unproject(this.object),this.object.position.sub(A).add(a),this.object.updateMatrixWorld(),i=Te.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;i!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(i).add(this.object.position):(An.origin.copy(this.object.position),An.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(An.direction))<Oc?this.object.lookAt(this.target):(eo.setFromNormalAndCoplanarPoint(this.object.up,this.target),An.intersectPlane(eo,this.target))))}else if(this.object.isOrthographicCamera){const i=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),i!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,s||this._lastPosition.distanceToSquared(this.object.position)>li||8*(1-this._lastQuaternion.dot(this.object.quaternion))>li||this._lastTargetPosition.distanceToSquared(this.target)>li?(this.dispatchEvent(Za),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):(this._performCursorZoom=!1,!1)}_getAutoRotationAngle(o){return o!==null?tt/60*this.autoRotateSpeed*o:tt/60/60*this.autoRotateSpeed}_getZoomScale(o){const e=Math.abs(o*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(o){this._sphericalDelta.theta-=o}_rotateUp(o){this._sphericalDelta.phi-=o}_panLeft(o,e){Te.setFromMatrixColumn(e,0),Te.multiplyScalar(-o),this._panOffset.add(Te)}_panUp(o,e){this.screenSpacePanning===!0?Te.setFromMatrixColumn(e,1):(Te.setFromMatrixColumn(e,0),Te.crossVectors(this.object.up,Te)),Te.multiplyScalar(o),this._panOffset.add(Te)}_pan(o,e){const t=this.domElement;if(this.object.isPerspectiveCamera){this.object.getWorldPosition(Te).sub(this.target);let n=Te.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*o*n/t.clientHeight,this.object.matrixWorld),this._panUp(2*e*n/t.clientHeight,this.object.matrixWorld)}else this.object.isOrthographicCamera?(this._panLeft(o*(this.object.right-this.object.left)/this.object.zoom/t.clientWidth,this.object.matrixWorld),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/t.clientHeight,this.object.matrixWorld)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(o){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=o:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(o){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=o:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(o,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const t=this.domElement.getBoundingClientRect(),n=o-t.left,s=e-t.top,i=t.width,a=t.height;this._mouse.x=n/i*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(o){return Math.max(this.minDistance,Math.min(this.maxDistance,o))}_handleMouseDownRotate(o){this._rotateStart.set(o.clientX,o.clientY)}_handleMouseDownDolly(o){this._updateZoomParameters(o.clientX,o.clientX),this._dollyStart.set(o.clientX,o.clientY)}_handleMouseDownPan(o){this._panStart.set(o.clientX,o.clientY)}_handleMouseMoveRotate(o){this._rotateEnd.set(o.clientX,o.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(tt*this._rotateDelta.x/e.clientHeight),this._rotateUp(tt*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(o){this._dollyEnd.set(o.clientX,o.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(o){this._panEnd.set(o.clientX,o.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(o){this._updateZoomParameters(o.clientX,o.clientY),o.deltaY<0?this._dollyIn(this._getZoomScale(o.deltaY)):o.deltaY>0&&this._dollyOut(this._getZoomScale(o.deltaY)),this.update()}_handleKeyDown(o){let e=!1;switch(o.code){case this.keys.UP:o.ctrlKey||o.metaKey||o.shiftKey?this._rotateUp(tt*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:o.ctrlKey||o.metaKey||o.shiftKey?this._rotateUp(-tt*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:o.ctrlKey||o.metaKey||o.shiftKey?this._rotateLeft(tt*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:o.ctrlKey||o.metaKey||o.shiftKey?this._rotateLeft(-tt*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(o.preventDefault(),this.update())}_handleTouchStartRotate(o){if(this._pointers.length===1)this._rotateStart.set(o.pageX,o.pageY);else{const e=this._getSecondPointerPosition(o),t=.5*(o.pageX+e.x),n=.5*(o.pageY+e.y);this._rotateStart.set(t,n)}}_handleTouchStartPan(o){if(this._pointers.length===1)this._panStart.set(o.pageX,o.pageY);else{const e=this._getSecondPointerPosition(o),t=.5*(o.pageX+e.x),n=.5*(o.pageY+e.y);this._panStart.set(t,n)}}_handleTouchStartDolly(o){const e=this._getSecondPointerPosition(o),t=o.pageX-e.x,n=o.pageY-e.y,s=Math.sqrt(t*t+n*n);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(o){this.enableZoom&&this._handleTouchStartDolly(o),this.enablePan&&this._handleTouchStartPan(o)}_handleTouchStartDollyRotate(o){this.enableZoom&&this._handleTouchStartDolly(o),this.enableRotate&&this._handleTouchStartRotate(o)}_handleTouchMoveRotate(o){if(this._pointers.length==1)this._rotateEnd.set(o.pageX,o.pageY);else{const t=this._getSecondPointerPosition(o),n=.5*(o.pageX+t.x),s=.5*(o.pageY+t.y);this._rotateEnd.set(n,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(tt*this._rotateDelta.x/e.clientHeight),this._rotateUp(tt*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(o){if(this._pointers.length===1)this._panEnd.set(o.pageX,o.pageY);else{const e=this._getSecondPointerPosition(o),t=.5*(o.pageX+e.x),n=.5*(o.pageY+e.y);this._panEnd.set(t,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(o){const e=this._getSecondPointerPosition(o),t=o.pageX-e.x,n=o.pageY-e.y,s=Math.sqrt(t*t+n*n);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const i=(o.pageX+e.x)*.5,a=(o.pageY+e.y)*.5;this._updateZoomParameters(i,a)}_handleTouchMoveDollyPan(o){this.enableZoom&&this._handleTouchMoveDolly(o),this.enablePan&&this._handleTouchMovePan(o)}_handleTouchMoveDollyRotate(o){this.enableZoom&&this._handleTouchMoveDolly(o),this.enableRotate&&this._handleTouchMoveRotate(o)}_addPointer(o){this._pointers.push(o.pointerId)}_removePointer(o){delete this._pointerPositions[o.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==o.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(o){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==o.pointerId)return!0;return!1}_trackPointer(o){let e=this._pointerPositions[o.pointerId];e===void 0&&(e=new Fe,this._pointerPositions[o.pointerId]=e),e.set(o.pageX,o.pageY)}_getSecondPointerPosition(o){const e=o.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(o){const e=o.deltaMode,t={clientX:o.clientX,clientY:o.clientY,deltaY:o.deltaY};switch(e){case 1:t.deltaY*=16;break;case 2:t.deltaY*=100;break}return o.ctrlKey&&!this._controlActive&&(t.deltaY*=10),t}};function jc(o){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(o.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(o)&&(this._addPointer(o),o.pointerType==="touch"?this._onTouchStart(o):this._onMouseDown(o)))}function qc(o){this.enabled!==!1&&(o.pointerType==="touch"?this._onTouchMove(o):this._onMouseMove(o))}function zc(o){switch(this._removePointer(o),this._pointers.length){case 0:this.domElement.releasePointerCapture(o.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent($a),this.state=ce.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function Kc(o){let e;switch(o.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case As.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(o),this.state=ce.DOLLY;break;case As.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=ce.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=ce.ROTATE}break;case As.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=ce.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=ce.PAN}break;default:this.state=ce.NONE}this.state!==ce.NONE&&this.dispatchEvent(ci)}function Yc(o){switch(this.state){case ce.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(o);break;case ce.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(o);break;case ce.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(o);break}}function Jc(o){this.enabled===!1||this.enableZoom===!1||this.state!==ce.NONE||(o.preventDefault(),this.dispatchEvent(ci),this._handleMouseWheel(this._customWheelEvent(o)),this.dispatchEvent($a))}function Wc(o){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(o)}function Vc(o){switch(this._trackPointer(o),this._pointers.length){case 1:switch(this.touches.ONE){case cs.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(o),this.state=ce.TOUCH_ROTATE;break;case cs.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(o),this.state=ce.TOUCH_PAN;break;default:this.state=ce.NONE}break;case 2:switch(this.touches.TWO){case cs.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(o),this.state=ce.TOUCH_DOLLY_PAN;break;case cs.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(o),this.state=ce.TOUCH_DOLLY_ROTATE;break;default:this.state=ce.NONE}break;default:this.state=ce.NONE}this.state!==ce.NONE&&this.dispatchEvent(ci)}function Xc(o){switch(this._trackPointer(o),this.state){case ce.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(o),this.update();break;case ce.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(o),this.update();break;case ce.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(o),this.update();break;case ce.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(o),this.update();break;default:this.state=ce.NONE}}function Zc(o){this.enabled!==!1&&o.preventDefault()}function $c(o){o.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function el(o){o.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class tl extends ut{constructor(e,t=1,n=16,s=2){const i=new At,a=n+s*2,r=new Float32Array((a*3+3)*3);i.setAttribute("position",new nt(r,3));const A=new kt({color:65280}),c=new kt({color:16776960});super(i,[c,A]),this.audio=e,this.range=t,this.divisionsInnerAngle=n,this.divisionsOuterAngle=s,this.type="PositionalAudioHelper",this.update()}update(){const e=this.audio,t=this.range,n=this.divisionsInnerAngle,s=this.divisionsOuterAngle,i=Ee.degToRad(e.panner.coneInnerAngle),a=Ee.degToRad(e.panner.coneOuterAngle),r=i/2,A=a/2;let c=0,l=0,h,d;const p=this.geometry,u=p.attributes.position;p.clearGroups();function m(b,I,C,E){const w=(I-b)/C;for(u.setXYZ(c,0,0,0),l++,h=b;h<I;h+=w)d=c+l,u.setXYZ(d,Math.sin(h)*t,0,Math.cos(h)*t),u.setXYZ(d+1,Math.sin(Math.min(h+w,I))*t,0,Math.cos(Math.min(h+w,I))*t),u.setXYZ(d+2,0,0,0),l+=3;p.addGroup(c,l,E),c+=l,l=0}m(-A,-r,s,0),m(-r,r,n,1),m(r,A,s,0),u.needsUpdate=!0,i===a&&(this.material[0].visible=!1)}dispose(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()}}const sl={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},nl={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};let Ls,hi,gs,cn;function gi(o,e=1/0,t=null){hi||(hi=new Sn(2,2,1,1)),gs||(gs=new Oi({uniforms:{blitTexture:new vr(o)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`})),gs.uniforms.blitTexture.value=o,gs.defines.IS_SRGB=o.colorSpace==re,gs.needsUpdate=!0,cn||(cn=new H(hi,gs),cn.frustumCulled=!1);const n=new Os,s=new Rn;s.add(cn),t===null&&(t=Ls=new xr({antialias:!1}));const i=Math.min(o.image.width,e),a=Math.min(o.image.height,e);t.setSize(i,a),t.clear(),t.render(s,n);const r=document.createElement("canvas"),A=r.getContext("2d");r.width=i,r.height=a,A.drawImage(t.domElement,0,0,i,a);const c=new Hi(r);return c.minFilter=o.minFilter,c.magFilter=o.magFilter,c.wrapS=o.wrapS,c.wrapT=o.wrapT,c.colorSpace=o.colorSpace,c.name=o.name,Ls&&(Ls.forceContextLoss(),Ls.dispose(),Ls=null),c}const to={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class di{constructor(){this.pluginCallbacks=[],this.register(function(e){return new dl(e)}),this.register(function(e){return new pl(e)}),this.register(function(e){return new bl(e)}),this.register(function(e){return new Il(e)}),this.register(function(e){return new El(e)}),this.register(function(e){return new Cl(e)}),this.register(function(e){return new ul(e)}),this.register(function(e){return new fl(e)}),this.register(function(e){return new ml(e)}),this.register(function(e){return new Bl(e)}),this.register(function(e){return new wl(e)}),this.register(function(e){return new yl(e)}),this.register(function(e){return new Ql(e)}),this.register(function(e){return new vl(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){const i=new gl,a=[];for(let r=0,A=this.pluginCallbacks.length;r<A;r++)a.push(this.pluginCallbacks[r](i));i.setPlugins(a),i.write(e,t,s).catch(n)}parseAsync(e,t){const n=this;return new Promise(function(s,i){n.parse(e,s,i,t)})}}const ie={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},pi="KHR_mesh_quantization",ot={};ot[Ri]=ie.NEAREST,ot[Ti]=ie.NEAREST_MIPMAP_NEAREST,ot[ki]=ie.NEAREST_MIPMAP_LINEAR,ot[dt]=ie.LINEAR,ot[Di]=ie.LINEAR_MIPMAP_NEAREST,ot[js]=ie.LINEAR_MIPMAP_LINEAR,ot[Ks]=ie.CLAMP_TO_EDGE,ot[Vt]=ie.REPEAT,ot[Mi]=ie.MIRRORED_REPEAT;const so={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},il=new Be,no=12,al=1179937895,ol=2,io=8,rl=1313821514,Al=5130562;function Ns(o,e){return o.length===e.length&&o.every(function(t,n){return t===e[n]})}function cl(o){return new TextEncoder().encode(o).buffer}function ll(o){return Ns(o.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function hl(o,e,t){const n={min:new Array(o.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(o.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+t;s++)for(let i=0;i<o.itemSize;i++){let a;o.itemSize>4?a=o.array[s*o.itemSize+i]:(i===0?a=o.getX(s):i===1?a=o.getY(s):i===2?a=o.getZ(s):i===3&&(a=o.getW(s)),o.normalized===!0&&(a=Ee.normalize(a,o.array))),n.min[i]=Math.min(n.min[i],a),n.max[i]=Math.max(n.max[i],a)}return n}function ao(o){return Math.ceil(o/4)*4}function ui(o,e=0){const t=ao(o.byteLength);if(t!==o.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(o)),e!==0)for(let s=o.byteLength;s<t;s++)n[s]=e;return n.buffer}return o}function oo(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function ro(o,e){if(o.toBlob!==void 0)return new Promise(n=>o.toBlob(n,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),o.convertToBlob({type:e,quality:t})}class gl{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Sr}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const s=this,i=s.buffers,a=s.json;n=s.options;const r=s.extensionsUsed,A=s.extensionsRequired,c=new Blob(i,{type:"application/octet-stream"}),l=Object.keys(r),h=Object.keys(A);if(l.length>0&&(a.extensionsUsed=l),h.length>0&&(a.extensionsRequired=h),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=c.size),n.binary===!0){const d=new FileReader;d.readAsArrayBuffer(c),d.onloadend=function(){const p=ui(d.result),u=new DataView(new ArrayBuffer(io));u.setUint32(0,p.byteLength,!0),u.setUint32(4,Al,!0);const m=ui(cl(JSON.stringify(a)),32),b=new DataView(new ArrayBuffer(io));b.setUint32(0,m.byteLength,!0),b.setUint32(4,rl,!0);const I=new ArrayBuffer(no),C=new DataView(I);C.setUint32(0,al,!0),C.setUint32(4,ol,!0);const E=no+b.byteLength+m.byteLength+u.byteLength+p.byteLength;C.setUint32(8,E,!0);const w=new Blob([I,b,m,u,p],{type:"application/octet-stream"}),y=new FileReader;y.readAsArrayBuffer(w),y.onloadend=function(){t(y.result)}}}else if(a.buffers&&a.buffers.length>0){const d=new FileReader;d.readAsDataURL(c),d.onloadend=function(){const p=d.result;a.buffers[0].uri=p,t(a)}}else t(a)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const n=this.options,s=this.extensionsUsed;try{const i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const a in i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],s[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(i){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+i.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new N;for(let n=0,s=e.count;n<s;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),s=new N;for(let i=0,a=n.count;i<a;i++)s.fromBufferAttribute(n,i),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),n.setXYZ(i,s.x,s.y,s.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const s={};(t.offset.x!==0||t.offset.y!==0)&&(s.offset=t.offset.toArray(),n=!0),t.rotation!==0&&(s.rotation=t.rotation,n=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(s.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(d){return d.colorSpace===re?function(p){return p<.04045?p*.0773993808:Math.pow(p*.9478672986+.0521327014,2.4)}:function(p){return p}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof Is&&(e=gi(e)),t instanceof Is&&(t=gi(t));const s=e?e.image:null,i=t?t.image:null,a=Math.max(s?s.width:0,i?i.width:0),r=Math.max(s?s.height:0,i?i.height:0),A=oo();A.width=a,A.height=r;const c=A.getContext("2d",{willReadFrequently:!0});c.fillStyle="#00ffff",c.fillRect(0,0,a,r);const l=c.getImageData(0,0,a,r);if(s){c.drawImage(s,0,0,a,r);const d=n(e),p=c.getImageData(0,0,a,r).data;for(let u=2;u<p.length;u+=4)l.data[u]=d(p[u]/256)*256}if(i){c.drawImage(i,0,0,a,r);const d=n(t),p=c.getImageData(0,0,a,r).data;for(let u=1;u<p.length;u+=4)l.data[u]=d(p[u]/256)*256}c.putImageData(l,0,0);const h=(e||t).clone();return h.source=new Rr(A),h.colorSpace=Xs,h.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),h}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,s,i){const a=this.json;a.bufferViews||(a.bufferViews=[]);let r;switch(t){case ie.BYTE:case ie.UNSIGNED_BYTE:r=1;break;case ie.SHORT:case ie.UNSIGNED_SHORT:r=2;break;default:r=4}let A=e.itemSize*r;i===ie.ARRAY_BUFFER&&(A=Math.ceil(A/4)*4);const c=ao(s*A),l=new DataView(new ArrayBuffer(c));let h=0;for(let p=n;p<n+s;p++){for(let u=0;u<e.itemSize;u++){let m;e.itemSize>4?m=e.array[p*e.itemSize+u]:(u===0?m=e.getX(p):u===1?m=e.getY(p):u===2?m=e.getZ(p):u===3&&(m=e.getW(p)),e.normalized===!0&&(m=Ee.normalize(m,e.array))),t===ie.FLOAT?l.setFloat32(h,m,!0):t===ie.INT?l.setInt32(h,m,!0):t===ie.UNSIGNED_INT?l.setUint32(h,m,!0):t===ie.SHORT?l.setInt16(h,m,!0):t===ie.UNSIGNED_SHORT?l.setUint16(h,m,!0):t===ie.BYTE?l.setInt8(h,m):t===ie.UNSIGNED_BYTE&&l.setUint8(h,m),h+=r}h%A!==0&&(h+=A-h%A)}const d={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:c};return i!==void 0&&(d.target=i),i===ie.ARRAY_BUFFER&&(d.byteStride=A),this.byteOffset+=c,a.bufferViews.push(d),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(s){const i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){const a=ui(i.result),r={buffer:t.processBuffer(a),byteOffset:t.byteOffset,byteLength:a.byteLength};t.byteOffset+=a.byteLength,s(n.bufferViews.push(r)-1)}})}processAccessor(e,t,n,s){const i=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let r;if(e.array.constructor===Float32Array)r=ie.FLOAT;else if(e.array.constructor===Int32Array)r=ie.INT;else if(e.array.constructor===Uint32Array)r=ie.UNSIGNED_INT;else if(e.array.constructor===Int16Array)r=ie.SHORT;else if(e.array.constructor===Uint16Array)r=ie.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)r=ie.BYTE;else if(e.array.constructor===Uint8Array)r=ie.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),(s===void 0||s===1/0)&&(s=e.count),s===0)return null;const A=hl(e,n,s);let c;t!==void 0&&(c=e===t.index?ie.ELEMENT_ARRAY_BUFFER:ie.ARRAY_BUFFER);const l=this.processBufferView(e,r,n,s,c),h={bufferView:l.id,byteOffset:l.byteOffset,componentType:r,count:s,max:A.max,min:A.min,type:a[e.itemSize]};return e.normalized===!0&&(h.normalized=!0),i.accessors||(i.accessors=[]),i.accessors.push(h)-1}processImage(e,t,n,s="image/png"){if(e!==null){const i=this,a=i.cache,r=i.json,A=i.options,c=i.pending;a.images.has(e)||a.images.set(e,{});const l=a.images.get(e),h=s+":flipY/"+n.toString();if(l[h]!==void 0)return l[h];r.images||(r.images=[]);const d={mimeType:s},p=oo();p.width=Math.min(e.width,A.maxTextureSize),p.height=Math.min(e.height,A.maxTextureSize);const u=p.getContext("2d",{willReadFrequently:!0});if(n===!0&&(u.translate(0,p.height),u.scale(1,-1)),e.data!==void 0){t!==Pt&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>A.maxTextureSize||e.height>A.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const b=new Uint8ClampedArray(e.height*e.width*4);for(let I=0;I<b.length;I+=4)b[I+0]=e.data[I+0],b[I+1]=e.data[I+1],b[I+2]=e.data[I+2],b[I+3]=e.data[I+3];u.putImageData(new ImageData(b,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)u.drawImage(e,0,0,p.width,p.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");A.binary===!0?c.push(ro(p,s).then(b=>i.processBufferViewImage(b)).then(b=>{d.bufferView=b})):p.toDataURL!==void 0?d.uri=p.toDataURL(s):c.push(ro(p,s).then(b=>new FileReader().readAsDataURL(b)).then(b=>{d.uri=b}));const m=r.images.push(d)-1;return l[h]=m,m}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:ot[e.magFilter],minFilter:ot[e.minFilter],wrapS:ot[e.wrapS],wrapT:ot[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const t=this.options,n=this.cache,s=this.json;if(n.textures.has(e))return n.textures.get(e);const i={keep:!0,newTexture:null};if(this._invokeAll(function(c){c.beforeWriteTexture&&c.beforeWriteTexture(e,i)}),i.keep===!1)return null;i.newTexture!=null&&(e=i.newTexture),s.textures||(s.textures=[]),e instanceof Is&&(e=gi(e,t.maxTextureSize));let a=e.userData.mimeType;a==="image/webp"&&(a="image/png");const r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,a)};e.name&&(r.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,r)});const A=s.textures.push(r)-1;return n.textures.set(e,A),A}processMaterial(e){var t,n,s,i,a;const r=this.cache,A=this.json;if(r.materials.has(e))return r.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;A.materials||(A.materials=[]);const c={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const l=e.color.toArray().concat([e.opacity]);Ns(l,[1,1,1,1])||(c.pbrMetallicRoughness.baseColorFactor=l),e.isMeshStandardMaterial?(c.pbrMetallicRoughness.metallicFactor=e.metalness,c.pbrMetallicRoughness.roughnessFactor=e.roughness):(c.pbrMetallicRoughness.metallicFactor=.5,c.pbrMetallicRoughness.roughnessFactor=.5);const h=(t=e.metalnessMap)!=null&&t.image?e.metalnessMap:void 0,d=(n=e.roughnessMap)!=null&&n.image?e.roughnessMap:void 0;if(h||d){const u=this.buildMetalRoughTexture(h,d),m={index:this.processTexture(u),channel:u.channel};this.applyTextureTransform(m,u),c.pbrMetallicRoughness.metallicRoughnessTexture=m}if(e.map){const u={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(u,e.map),c.pbrMetallicRoughness.baseColorTexture=u}if(e.emissive){const u=e.emissive;if(Math.max(u.r,u.g,u.b)>0&&(c.emissiveFactor=e.emissive.toArray()),(s=e.emissiveMap)!=null&&s.image){const m={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(m,e.emissiveMap),c.emissiveTexture=m}}if((i=e.normalMap)!=null&&i.image){const u={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(u.scale=e.normalScale.x),this.applyTextureTransform(u,e.normalMap),c.normalTexture=u}if((a=e.aoMap)!=null&&a.image){const u={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(u.strength=e.aoMapIntensity),this.applyTextureTransform(u,e.aoMap),c.occlusionTexture=u}e.transparent?c.alphaMode="BLEND":e.alphaTest>0&&(c.alphaMode="MASK",c.alphaCutoff=e.alphaTest),e.side===En&&(c.doubleSided=!0),e.name!==""&&(c.name=e.name),this.serializeUserData(e,c),this._invokeAll(function(u){u.writeMaterial&&u.writeMaterial(e,c)});const p=A.materials.push(c)-1;return r.materials.set(e,p),p}processMesh(e){const t={keep:!0};if(this._invokeAll(function(y){y.beforeWriteMesh&&y.beforeWriteMesh(e,t)}),t.keep!=!0)return null;const n=this.cache,s=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,S=e.material.length;y<S;y++)i.push(e.material[y].uuid);else i.push(e.material.uuid);const a=i.join(":");if(n.meshes.has(a))return n.meshes.get(a);const r=e.geometry;let A;e.isLineSegments?A=ie.LINES:e.isLineLoop?A=ie.LINE_LOOP:e.isLine?A=ie.LINE_STRIP:e.isPoints?A=ie.POINTS:A=e.material.wireframe?ie.LINES:ie.TRIANGLES;const c={},l={},h=[],d=[],p={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},u=r.getAttribute("normal");u!==void 0&&!this.isNormalizedNormalAttribute(u)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),r.setAttribute("normal",this.createNormalizedNormalAttribute(u)));let m=null;for(let y in r.attributes){if(y.slice(0,5)==="morph")continue;const S=r.attributes[y];if(y=p[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),n.attributes.has(this.getUID(S))){l[y]=n.attributes.get(this.getUID(S));continue}m=null;const R=S.array;y==="JOINTS_0"&&!(R instanceof Uint16Array)&&!(R instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new nt(new Uint16Array(R),S.itemSize,S.normalized));const x=this.processAccessor(m||S,r);x!==null&&(y.startsWith("_")||this.detectMeshQuantization(y,S),l[y]=x,n.attributes.set(this.getUID(S),x))}if(u!==void 0&&r.setAttribute("normal",u),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const y=[],S=[],R={};if(e.morphTargetDictionary!==void 0)for(const x in e.morphTargetDictionary)R[e.morphTargetDictionary[x]]=x;for(let x=0;x<e.morphTargetInfluences.length;++x){const D={};let G=!1;for(const W in r.morphAttributes){if(W!=="position"&&W!=="normal"){G||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),G=!0);continue}const V=r.morphAttributes[W][x],J=W.toUpperCase(),Z=r.attributes[W];if(n.attributes.has(this.getUID(V,!0))){D[J]=n.attributes.get(this.getUID(V,!0));continue}const $=V.clone();if(!r.morphTargetsRelative)for(let z=0,K=V.count;z<K;z++)for(let X=0;X<V.itemSize;X++)X===0&&$.setX(z,V.getX(z)-Z.getX(z)),X===1&&$.setY(z,V.getY(z)-Z.getY(z)),X===2&&$.setZ(z,V.getZ(z)-Z.getZ(z)),X===3&&$.setW(z,V.getW(z)-Z.getW(z));D[J]=this.processAccessor($,r),n.attributes.set(this.getUID(Z,!0),D[J])}d.push(D),y.push(e.morphTargetInfluences[x]),e.morphTargetDictionary!==void 0&&S.push(R[x])}c.weights=y,S.length>0&&(c.extras={},c.extras.targetNames=S)}const b=Array.isArray(e.material);if(b&&r.groups.length===0)return null;let I=!1;if(b&&r.index===null){const y=[];for(let S=0,R=r.attributes.position.count;S<R;S++)y[S]=S;r.setIndex(y),I=!0}const C=b?e.material:[e.material],E=b?r.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,S=E.length;y<S;y++){const R={mode:A,attributes:l};if(this.serializeUserData(r,R),d.length>0&&(R.targets=d),r.index!==null){let D=this.getUID(r.index);(E[y].start!==void 0||E[y].count!==void 0)&&(D+=":"+E[y].start+":"+E[y].count),n.attributes.has(D)?R.indices=n.attributes.get(D):(R.indices=this.processAccessor(r.index,r,E[y].start,E[y].count),n.attributes.set(D,R.indices)),R.indices===null&&delete R.indices}const x=this.processMaterial(C[E[y].materialIndex]);x!==null&&(R.material=x),h.push(R)}I===!0&&r.setIndex(null),c.primitives=h,s.meshes||(s.meshes=[]),this._invokeAll(function(y){y.writeMesh&&y.writeMesh(e,c)});const w=s.meshes.push(c)-1;return n.meshes.set(a,w),w}detectMeshQuantization(e,t){if(this.extensionsUsed[pi])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const s=e.split("_",1)[0];to[s]&&to[s].includes(n)&&(this.extensionsUsed[pi]=!0,this.extensionsRequired[pi]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,s={type:n?"orthographic":"perspective"};return n?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:Ee.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){const n=this.json,s=this.nodeMap;n.animations||(n.animations=[]),e=di.Utils.mergeMorphTargetTracks(e.clone(),t);const i=e.tracks,a=[],r=[];for(let A=0;A<i.length;++A){const c=i[A],l=pt.parseTrackName(c.name);let h=pt.findNode(t,l.nodeName);const d=so[l.propertyName];if(l.objectName==="bones"&&(h.isSkinnedMesh===!0?h=h.skeleton.getBoneByName(l.objectIndex):h=void 0),!h||!d){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const p=1;let u=c.values.length/c.times.length;d===so.morphTargetInfluences&&(u/=h.morphTargetInfluences.length);let m;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(m="CUBICSPLINE",u/=3):c.getInterpolation()===yn?m="STEP":m="LINEAR",r.push({input:this.processAccessor(new nt(c.times,p)),output:this.processAccessor(new nt(c.values,u)),interpolation:m}),a.push({sampler:r.length-1,target:{node:s.get(h),path:d}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:r,channels:a}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,s=t.nodes[n.get(e)],i=e.skeleton;if(i===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const r=[],A=new Float32Array(i.bones.length*16),c=new oe;for(let l=0;l<i.bones.length;++l)r.push(n.get(i.bones[l])),c.copy(i.boneInverses[l]),c.multiply(e.bindMatrix).toArray(A,l*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new nt(A,16)),joints:r,skeleton:n.get(a)}),s.skin=t.skins.length-1}processNode(e){const t={keep:!0};if(this._invokeAll(function(A){A.beforeWriteNode&&A.beforeWriteNode(e,t)}),t.keep!=!0)return null;const n=this.json,s=this.options,i=this.nodeMap;n.nodes||(n.nodes=[]);const a={};if(s.trs){const A=e.quaternion.toArray(),c=e.position.toArray(),l=e.scale.toArray();Ns(A,[0,0,0,1])||(a.rotation=A),Ns(c,[0,0,0])||(a.translation=c),Ns(l,[1,1,1])||(a.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),ll(e.matrix)===!1&&(a.matrix=e.matrix.elements);if(e.name!==""&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){const A=this.processMesh(e);A!==null&&(a.mesh=A)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const A=[];for(let c=0,l=e.children.length;c<l;c++){const h=e.children[c];if(h.visible||s.onlyVisible===!1){const d=this.processNode(h);d!==null&&A.push(d)}}A.length>0&&(a.children=A)}this._invokeAll(function(A){A.writeNode&&A.writeNode(e,a)});const r=n.nodes.push(a)-1;return i.set(e,r),r}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const s={};e.name!==""&&(s.name=e.name),t.scenes.push(s);const i=[];for(let a=0,r=e.children.length;a<r;a++){const A=e.children[a];if(A.visible||n.onlyVisible===!1){const c=this.processNode(A);c!==null&&i.push(c)}}i.length>0&&(s.nodes=i),this.serializeUserData(e,s)}processObjects(e){const t=new Rn;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(s){s.beforeParse&&s.beforeParse(e)});const n=[];for(let s=0;s<e.length;s++)e[s]instanceof Rn?this.processScene(e[s]):n.push(e[s]);n.length>0&&this.processObjects(n);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<t.animations.length;++s)this.processAnimation(t.animations[s],e[0]);this._invokeAll(function(s){s.afterParse&&s.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class dl{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,s=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(1-e.penumbra)*e.angle,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},i[this.name]=!0);const r=s.extensions[this.name].lights;r.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:r.length-1}}}class pl{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class ul{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const n=this.writer,s=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(a,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(a.scale=e.clearcoatNormalScale.x),n.applyTextureTransform(a,e.clearcoatNormalMap),i.clearcoatNormalTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class fl{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const n=this.writer.extensionsUsed,s={};s.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}class ml{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const n=this.writer,s=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(a,e.iridescenceMap),i.iridescenceTexture=a}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(a,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class bl{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,s=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){const a={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class Il{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,s=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){const a={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}e.attenuationDistance!==1/0&&(i.attenuationDistance=e.attenuationDistance),i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class El{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const n=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}class Cl{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(il)&&!e.specularIntensityMap&&!e.specularColorMap)return;const n=this.writer,s=n.extensionsUsed,i={};if(e.specularIntensityMap){const a={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(a,e.specularIntensityMap),i.specularTexture=a}if(e.specularColorMap){const a={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(a,e.specularColorMap),i.specularColorTexture=a}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class Bl{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const n=this.writer,s=n.extensionsUsed,i={};if(e.sheenRoughnessMap){const a={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(a,e.sheenRoughnessMap),i.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(a,e.sheenColorMap),i.sheenColorTexture=a}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class wl{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const n=this.writer,s=n.extensionsUsed,i={};if(e.anisotropyMap){const a={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(a,e.anisotropyMap),i.anisotropyTexture=a}i.anisotropyStrength=e.anisotropy,i.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class yl{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,s={};s.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}class Ql{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const n=this.writer,s=n.extensionsUsed,i={};if(e.bumpMap){const a={index:n.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};n.applyTextureTransform(a,e.bumpMap),i.bumpTexture=a}i.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=i,s[this.name]=!0}}class vl{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const n=this.writer,s=e,i=new Float32Array(s.count*3),a=new Float32Array(s.count*4),r=new Float32Array(s.count*3),A=new oe,c=new N,l=new we,h=new N;for(let p=0;p<s.count;p++)s.getMatrixAt(p,A),A.decompose(c,l,h),c.toArray(i,p*3),l.toArray(a,p*4),h.toArray(r,p*3);const d={TRANSLATION:n.processAccessor(new nt(i,3)),ROTATION:n.processAccessor(new nt(a,4)),SCALE:n.processAccessor(new nt(r,3))};s.instanceColor&&(d._COLOR_0=n.processAccessor(s.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:d},n.extensionsUsed[this.name]=!0,n.extensionsRequired[this.name]=!0}}di.Utils={insertKeyframe:function(o,e){const t=o.getValueSize(),n=new o.TimeBufferType(o.times.length+1),s=new o.ValueBufferType(o.values.length+t),i=o.createInterpolant(new o.ValueBufferType(t));let a;if(o.times.length===0){n[0]=e;for(let r=0;r<t;r++)s[r]=0;a=0}else if(e<o.times[0]){if(Math.abs(o.times[0]-e)<.001)return 0;n[0]=e,n.set(o.times,1),s.set(i.evaluate(e),0),s.set(o.values,t),a=0}else if(e>o.times[o.times.length-1]){if(Math.abs(o.times[o.times.length-1]-e)<.001)return o.times.length-1;n[n.length-1]=e,n.set(o.times,0),s.set(o.values,0),s.set(i.evaluate(e),o.values.length),a=n.length-1}else for(let r=0;r<o.times.length;r++){if(Math.abs(o.times[r]-e)<.001)return r;if(o.times[r]<e&&o.times[r+1]>e){n.set(o.times.slice(0,r+1),0),n[r+1]=e,n.set(o.times.slice(r+1),r+2),s.set(o.values.slice(0,(r+1)*t),0),s.set(i.evaluate(e),(r+1)*t),s.set(o.values.slice((r+1)*t),(r+2)*t),a=r+1;break}}return o.times=n,o.values=s,a},mergeMorphTargetTracks:function(o,e){const t=[],n={},s=o.tracks;for(let i=0;i<s.length;++i){let a=s[i];const r=pt.parseTrackName(a.name),A=pt.findNode(e,r.nodeName);if(r.propertyName!=="morphTargetInfluences"||r.propertyIndex===void 0){t.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(bs)}const c=A.morphTargetInfluences.length,l=A.morphTargetDictionary[r.propertyIndex];if(l===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+r.propertyIndex);let h;if(n[A.uuid]===void 0){h=a.clone();const p=new h.ValueBufferType(c*h.times.length);for(let u=0;u<h.times.length;u++)p[u*c+l]=h.values[u];h.name=(r.nodeName||"")+".morphTargetInfluences",h.values=p,n[A.uuid]=h,t.push(h);continue}const d=a.createInterpolant(new a.ValueBufferType(1));h=n[A.uuid];for(let p=0;p<h.times.length;p++)h.values[p*c+l]=d.evaluate(h.times[p]);for(let p=0;p<a.times.length;p++){const u=this.insertKeyframe(h,a.times[p]);h.values[u*c+l]=a.values[p]}}return o.tracks=t,o}};const Qe={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function Ao(o){const e=await fetch(o);if(e.ok)return e.json();throw new Error(e.statusText)}async function xl(o){if(!o)throw new Error("No basePath supplied");return await Ao(`${o}/profilesList.json`)}async function Sl(o,e,t=null,n=!0){if(!o)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const s=await xl(e);let i;if(o.profiles.some(A=>{const c=s[A];return c&&(i={profileId:A,profilePath:`${e}/${c.path}`,deprecated:!!c.deprecated}),!!i}),!i){if(!t)throw new Error("No matching profile name found");const A=s[t];if(!A)throw new Error(`No matching profile name found and default profile "${t}" missing.`);i={profileId:t,profilePath:`${e}/${A.path}`,deprecated:!!A.deprecated}}const a=await Ao(i.profilePath);let r;if(n){let A;if(o.handedness==="any"?A=a.layouts[Object.keys(a.layouts)[0]]:A=a.layouts[o.handedness],!A)throw new Error(`No matching handedness, ${o.handedness}, in profile ${i.profileId}`);A.assetPath&&(r=i.profilePath.replace("profile.json",A.assetPath))}return{profile:a,assetPath:r}}const Rl={xAxis:0,yAxis:0,button:0,state:Qe.ComponentState.DEFAULT};function Tl(o=0,e=0){let t=o,n=e;if(Math.sqrt(o*o+e*e)>1){const s=Math.atan2(e,o);t=Math.cos(s),n=Math.sin(s)}return{normalizedXAxis:t*.5+.5,normalizedYAxis:n*.5+.5}}class Dl{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===Qe.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(Rl)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:s}){const{normalizedXAxis:i,normalizedYAxis:a}=Tl(e,t);switch(this.componentProperty){case Qe.ComponentProperty.X_AXIS:this.value=this.states.includes(s)?i:.5;break;case Qe.ComponentProperty.Y_AXIS:this.value=this.states.includes(s)?a:.5;break;case Qe.ComponentProperty.BUTTON:this.value=this.states.includes(s)?n:0;break;case Qe.ComponentProperty.STATE:this.valueNodeProperty===Qe.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(s):this.value=this.states.includes(s)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class kl{constructor(e,t){if(!e||!t||!t.visualResponses||!t.gamepadIndices||Object.keys(t.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(n=>{const s=new Dl(t.visualResponses[n]);this.visualResponses[n]=s}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:Qe.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=Qe.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||this.values.button===1?this.values.state=Qe.ComponentState.PRESSED:(t.touched||this.values.button>Qe.ButtonTouchThreshold)&&(this.values.state=Qe.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Qe.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Qe.AxisTouchThreshold&&(this.values.state=Qe.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Qe.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Qe.AxisTouchThreshold&&(this.values.state=Qe.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class Ml{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(s=>{const i=this.layoutDescription.components[s];this.components[s]=new kl(s,i)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}const _l="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",Fl="generic-trigger";class Ll extends Bt{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e?this:(this.envMap=e,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}),this)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(n=>{const{valueNode:s,minNode:i,maxNode:a,value:r,valueNodeProperty:A}=n;s&&(A===Qe.VisualResponseProperty.VISIBILITY?s.visible=r:A===Qe.VisualResponseProperty.TRANSFORM&&(s.quaternion.slerpQuaternions(i.quaternion,a.quaternion,r),s.position.lerpVectors(i.position,a.position,r)))})}))}}function Nl(o,e){Object.values(o.components).forEach(t=>{const{type:n,touchPointNodeName:s,visualResponses:i}=t;if(n===Qe.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(s),t.touchPointNode){const a=new pn(.001),r=new It({color:255}),A=new H(a,r);t.touchPointNode.add(A)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(i).forEach(a=>{const{valueNodeName:r,minNodeName:A,maxNodeName:c,valueNodeProperty:l}=a;if(l===Qe.VisualResponseProperty.TRANSFORM){if(a.minNode=e.getObjectByName(A),a.maxNode=e.getObjectByName(c),!a.minNode){console.warn(`Could not find ${A} in the model`);return}if(!a.maxNode){console.warn(`Could not find ${c} in the model`);return}}a.valueNode=e.getObjectByName(r),a.valueNode||console.warn(`Could not find ${r} in the model`)})})}function co(o,e){Nl(o.motionController,e),o.envMap&&e.traverse(t=>{t.isMesh&&(t.material.envMap=o.envMap,t.material.needsUpdate=!0)}),o.layers.mask!=0&&e.traverse(t=>{t.layers.mask=o.layers.mask}),o.add(e)}class Ul{constructor(e=null,t=null){this.gltfLoader=e,this.path=_l,this._assetCache={},this.onLoad=t,this.gltfLoader||(this.gltfLoader=new Dn)}setPath(e){return this.path=e,this}createControllerModel(e){const t=new Ll;let n=null;return e.addEventListener("connected",s=>{const i=s.data;i.targetRayMode!=="tracked-pointer"||!i.gamepad||i.hand||Sl(i,this.path,Fl).then(({profile:a,assetPath:r})=>{t.motionController=new Ml(i,a,r);const A=this._assetCache[t.motionController.assetUrl];if(A)n=A.scene.clone(),co(t,n),this.onLoad&&this.onLoad(n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,c=>{this._assetCache[t.motionController.assetUrl]=c,n=c.scene.clone(),co(t,n),this.onLoad&&this.onLoad(n)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(a=>{console.warn(a)})}),e.addEventListener("disconnected",()=>{t.motionController=null,t.remove(n),n=null}),t}}const Gl="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/";class Pl{constructor(e,t,n,s,i=null,a=null){this.controller=t,this.handModel=e,this.bones=[],i===null&&(i=new Dn,i.setPath(n||Gl)),i.load(`${s}.glb`,r=>{const A=r.scene.children[0];this.handModel.add(A),A.layers.mask=this.handModel.layers.mask;const c=A.getObjectByProperty("type","SkinnedMesh");c.frustumCulled=!1,c.castShadow=!0,c.receiveShadow=!0,["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"].forEach(l=>{const h=A.getObjectByName(l);h!==void 0?h.jointName=l:console.warn(`Couldn't find ${l} in ${s} hand mesh`),this.bones.push(h)}),a&&a(A)})}updateMesh(){const e=this.controller.joints;for(let t=0;t<this.bones.length;t++){const n=this.bones[t];if(n){const s=e[n.jointName];if(s.visible){const i=s.position;n.position.copy(i),n.quaternion.copy(s.quaternion)}}}}}const lo=new Vs,ln=new N;class ho extends Tr{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Re(e,3)),this.setAttribute("uv",new Re(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Tn(t,6,1);return this.setAttribute("instanceStart",new Zt(n,3,0)),this.setAttribute("instanceEnd",new Zt(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Tn(t,6,1);return this.setAttribute("instanceColorStart",new Zt(n,3,0)),this.setAttribute("instanceColorEnd",new Zt(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Dr(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vs);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),lo.setFromBufferAttribute(t),this.boundingBox.union(lo))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vn),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let s=0;for(let i=0,a=e.count;i<a;i++)ln.fromBufferAttribute(e,i),s=Math.max(s,n.distanceToSquared(ln)),ln.fromBufferAttribute(t,i),s=Math.max(s,n.distanceToSquared(ln));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}fs.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Fe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Et.line={uniforms:un.merge([fs.common,fs.fog,fs.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class fi extends Oi{constructor(e){super({type:"LineMaterial",uniforms:un.clone(Et.line.uniforms),vertexShader:Et.line.vertexShader,fragmentShader:Et.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const mi=new Mt,go=new N,po=new N,Ge=new Mt,Pe=new Mt,vt=new Mt,bi=new N,Ii=new oe,Oe=new kr,uo=new N,hn=new Vs,gn=new vn,xt=new Mt;let St,ss;function fo(o,e,t){return xt.set(0,0,-e,1).applyMatrix4(o.projectionMatrix),xt.multiplyScalar(1/xt.w),xt.x=ss/t.width,xt.y=ss/t.height,xt.applyMatrix4(o.projectionMatrixInverse),xt.multiplyScalar(1/xt.w),Math.abs(Math.max(xt.x,xt.y))}function Ol(o,e){const t=o.matrixWorld,n=o.geometry,s=n.attributes.instanceStart,i=n.attributes.instanceEnd,a=Math.min(n.instanceCount,s.count);for(let r=0,A=a;r<A;r++){Oe.start.fromBufferAttribute(s,r),Oe.end.fromBufferAttribute(i,r),Oe.applyMatrix4(t);const c=new N,l=new N;St.distanceSqToSegment(Oe.start,Oe.end,l,c),l.distanceTo(c)<ss*.5&&e.push({point:l,pointOnLine:c,distance:St.origin.distanceTo(l),object:o,face:null,faceIndex:r,uv:null,uv1:null})}}function Hl(o,e,t){const n=e.projectionMatrix,s=o.material.resolution,i=o.matrixWorld,a=o.geometry,r=a.attributes.instanceStart,A=a.attributes.instanceEnd,c=Math.min(a.instanceCount,r.count),l=-e.near;St.at(1,vt),vt.w=1,vt.applyMatrix4(e.matrixWorldInverse),vt.applyMatrix4(n),vt.multiplyScalar(1/vt.w),vt.x*=s.x/2,vt.y*=s.y/2,vt.z=0,bi.copy(vt),Ii.multiplyMatrices(e.matrixWorldInverse,i);for(let h=0,d=c;h<d;h++){if(Ge.fromBufferAttribute(r,h),Pe.fromBufferAttribute(A,h),Ge.w=1,Pe.w=1,Ge.applyMatrix4(Ii),Pe.applyMatrix4(Ii),Ge.z>l&&Pe.z>l)continue;if(Ge.z>l){const I=Ge.z-Pe.z,C=(Ge.z-l)/I;Ge.lerp(Pe,C)}else if(Pe.z>l){const I=Pe.z-Ge.z,C=(Pe.z-l)/I;Pe.lerp(Ge,C)}Ge.applyMatrix4(n),Pe.applyMatrix4(n),Ge.multiplyScalar(1/Ge.w),Pe.multiplyScalar(1/Pe.w),Ge.x*=s.x/2,Ge.y*=s.y/2,Pe.x*=s.x/2,Pe.y*=s.y/2,Oe.start.copy(Ge),Oe.start.z=0,Oe.end.copy(Pe),Oe.end.z=0;const p=Oe.closestPointToPointParameter(bi,!0);Oe.at(p,uo);const u=Ee.lerp(Ge.z,Pe.z,p),m=u>=-1&&u<=1,b=bi.distanceTo(uo)<ss*.5;if(m&&b){Oe.start.fromBufferAttribute(r,h),Oe.end.fromBufferAttribute(A,h),Oe.start.applyMatrix4(i),Oe.end.applyMatrix4(i);const I=new N,C=new N;St.distanceSqToSegment(Oe.start,Oe.end,C,I),t.push({point:C,pointOnLine:I,distance:St.origin.distanceTo(C),object:o,face:null,faceIndex:h,uv:null,uv1:null})}}}class jl extends H{constructor(e=new ho,t=new fi({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let a=0,r=0,A=t.count;a<A;a++,r+=2)go.fromBufferAttribute(t,a),po.fromBufferAttribute(n,a),s[r]=r===0?0:s[r-1],s[r+1]=s[r]+go.distanceTo(po);const i=new Tn(s,2,1);return e.setAttribute("instanceDistanceStart",new Zt(i,1,0)),e.setAttribute("instanceDistanceEnd",new Zt(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,s=e.camera;s===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=e.params.Line2!==void 0&&e.params.Line2.threshold||0;St=e.ray;const a=this.matrixWorld,r=this.geometry,A=this.material;ss=A.linewidth+i,r.boundingSphere===null&&r.computeBoundingSphere(),gn.copy(r.boundingSphere).applyMatrix4(a);let c;if(n)c=ss*.5;else{const h=Math.max(s.near,gn.distanceToPoint(St.origin));c=fo(s,h,A.resolution)}if(gn.radius+=c,St.intersectsSphere(gn)===!1)return;r.boundingBox===null&&r.computeBoundingBox(),hn.copy(r.boundingBox).applyMatrix4(a);let l;if(n)l=ss*.5;else{const h=Math.max(s.near,hn.distanceToPoint(St.origin));l=fo(s,h,A.resolution)}hn.expandByScalar(l),St.intersectsBox(hn)!==!1&&(n?Ol(this,t):Hl(this,s,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(mi),this.material.uniforms.resolution.value.set(mi.z,mi.w))}}class mo extends ho{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let s=0;s<t;s+=3)n[2*s]=e[s],n[2*s+1]=e[s+1],n[2*s+2]=e[s+2],n[2*s+3]=e[s+3],n[2*s+4]=e[s+4],n[2*s+5]=e[s+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let s=0;s<t;s+=3)n[2*s]=e[s],n[2*s+1]=e[s+1],n[2*s+2]=e[s+2],n[2*s+3]=e[s+3],n[2*s+4]=e[s+4],n[2*s+5]=e[s+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class ql extends jl{constructor(e=new mo,t=new fi({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class zl extends H{constructor(e){const t=new Kl(e),n=new Sn(t.image.width*.001,t.image.height*.001),s=new It({map:t,toneMapped:!1,transparent:!0});super(n,s);function i(a){s.map.dispatchDOMEvent(a)}this.addEventListener("mousedown",i),this.addEventListener("mousemove",i),this.addEventListener("mouseup",i),this.addEventListener("click",i),this.dispose=function(){n.dispose(),s.dispose(),s.map.dispose(),Ei.delete(e),this.removeEventListener("mousedown",i),this.removeEventListener("mousemove",i),this.removeEventListener("mouseup",i),this.removeEventListener("click",i)}}}class Kl extends Hi{constructor(e){super(bo(e)),this.dom=e,this.anisotropy=16,this.colorSpace=re,this.minFilter=dt,this.magFilter=dt;const t=new MutationObserver(()=>{this.scheduleUpdate||(this.scheduleUpdate=setTimeout(()=>this.update(),16))}),n={attributes:!0,childList:!0,subtree:!0,characterData:!0};t.observe(e,n),this.observer=t}dispatchDOMEvent(e){e.data&&Yl(this.dom,e.type,e.data.x,e.data.y)}update(){this.image=bo(this.dom),this.needsUpdate=!0,this.scheduleUpdate=null}dispose(){this.observer&&this.observer.disconnect(),this.scheduleUpdate=clearTimeout(this.scheduleUpdate),super.dispose()}}const Ei=new WeakMap;function bo(o){const e=document.createRange(),t=new Be;function n(d){const p=[];let u=!1;function m(){if(u&&(u=!1,d.restore()),p.length===0)return;let b=-1/0,I=-1/0,C=1/0,E=1/0;for(let w=0;w<p.length;w++){const y=p[w];b=Math.max(b,y.x),I=Math.max(I,y.y),C=Math.min(C,y.x+y.width),E=Math.min(E,y.y+y.height)}d.save(),d.beginPath(),d.rect(b,I,C-b,E-I),d.clip(),u=!0}return{add:function(b){p.push(b),m()},remove:function(){p.pop(),m()}}}function s(d,p,u,m){m!==""&&(d.textTransform==="uppercase"&&(m=m.toUpperCase()),l.font=d.fontWeight+" "+d.fontSize+" "+d.fontFamily,l.textBaseline="top",l.fillStyle=d.color,l.fillText(m,p,u+parseFloat(d.fontSize)*.1))}function i(d,p,u,m,b){u<2*b&&(b=u/2),m<2*b&&(b=m/2),l.beginPath(),l.moveTo(d+b,p),l.arcTo(d+u,p,d+u,p+m,b),l.arcTo(d+u,p+m,d,p+m,b),l.arcTo(d,p+m,d,p,b),l.arcTo(d,p,d+u,p,b),l.closePath()}function a(d,p,u,m,b,I){const C=d[p+"Width"],E=d[p+"Style"],w=d[p+"Color"];C!=="0px"&&E!=="none"&&w!=="transparent"&&w!=="rgba(0, 0, 0, 0)"&&(l.strokeStyle=w,l.lineWidth=parseFloat(C),l.beginPath(),l.moveTo(u,m),l.lineTo(u+b,m+I),l.stroke())}function r(d,p){if(d.nodeType===Node.COMMENT_NODE||d.nodeName==="SCRIPT"||d.style&&d.style.display==="none")return;let u=0,m=0,b=0,I=0;if(d.nodeType===Node.TEXT_NODE){e.selectNode(d);const E=e.getBoundingClientRect();u=E.left-A.left-.5,m=E.top-A.top-.5,b=E.width,I=E.height,s(p,u,m,d.nodeValue.trim())}else if(d instanceof HTMLCanvasElement){const E=d.getBoundingClientRect();u=E.left-A.left-.5,m=E.top-A.top-.5,l.save();const w=window.devicePixelRatio;l.scale(1/w,1/w),l.drawImage(d,u,m),l.restore()}else if(d instanceof HTMLImageElement){const E=d.getBoundingClientRect();u=E.left-A.left-.5,m=E.top-A.top-.5,b=E.width,I=E.height,l.drawImage(d,u,m,b,I)}else{const E=d.getBoundingClientRect();u=E.left-A.left-.5,m=E.top-A.top-.5,b=E.width,I=E.height,p=window.getComputedStyle(d),i(u,m,b,I,parseFloat(p.borderRadius));const w=p.backgroundColor;w!=="transparent"&&w!=="rgba(0, 0, 0, 0)"&&(l.fillStyle=w,l.fill());const y=["borderTop","borderLeft","borderBottom","borderRight"];let S=!0,R=null;for(const x of y){if(R!==null&&(S=p[x+"Width"]===p[R+"Width"]&&p[x+"Color"]===p[R+"Color"]&&p[x+"Style"]===p[R+"Style"]),S===!1)break;R=x}if(S===!0){const x=parseFloat(p.borderTopWidth);p.borderTopWidth!=="0px"&&p.borderTopStyle!=="none"&&p.borderTopColor!=="transparent"&&p.borderTopColor!=="rgba(0, 0, 0, 0)"&&(l.strokeStyle=p.borderTopColor,l.lineWidth=x,l.stroke())}else a(p,"borderTop",u,m,b,0),a(p,"borderLeft",u,m,0,I),a(p,"borderBottom",u,m+I,b,0),a(p,"borderRight",u+b,m,0,I);if(d instanceof HTMLInputElement){let x=p.accentColor;(x===void 0||x==="auto")&&(x=p.color),t.set(x);const D=Math.sqrt(.299*t.r**2+.587*t.g**2+.114*t.b**2)<.5?"white":"#111111";if(d.type==="radio"&&(i(u,m,b,I,I),l.fillStyle="white",l.strokeStyle=x,l.lineWidth=1,l.fill(),l.stroke(),d.checked&&(i(u+2,m+2,b-4,I-4,I),l.fillStyle=x,l.strokeStyle=D,l.lineWidth=2,l.fill(),l.stroke())),d.type==="checkbox"&&(i(u,m,b,I,2),l.fillStyle=d.checked?x:"white",l.strokeStyle=d.checked?D:x,l.lineWidth=1,l.stroke(),l.fill(),d.checked)){const G=l.textAlign;l.textAlign="center";const W={color:D,fontFamily:p.fontFamily,fontSize:I+"px",fontWeight:"bold"};s(W,u+b/2,m,"\u2714"),l.textAlign=G}if(d.type==="range"){const[G,W,V]=["min","max","value"].map(Z=>parseFloat(d[Z])),J=(V-G)/(W-G)*(b-I);i(u,m+I/4,b,I/2,I/4),l.fillStyle=D,l.strokeStyle=x,l.lineWidth=1,l.fill(),l.stroke(),i(u,m+I/4,J+I/2,I/2,I/4),l.fillStyle=x,l.fill(),i(u+J,m,I,I,I/2),l.fillStyle=x,l.fill()}(d.type==="color"||d.type==="text"||d.type==="number")&&(h.add({x:u,y:m,width:b,height:I}),s(p,u+parseInt(p.paddingLeft),m+parseInt(p.paddingTop),d.value),h.remove())}}const C=p.overflow==="auto"||p.overflow==="hidden";C&&h.add({x:u,y:m,width:b,height:I});for(let E=0;E<d.childNodes.length;E++)r(d.childNodes[E],p);C&&h.remove()}const A=o.getBoundingClientRect();let c=Ei.get(o);c===void 0&&(c=document.createElement("canvas"),c.width=A.width,c.height=A.height,Ei.set(o,c));const l=c.getContext("2d"),h=new n(l);return l.clearRect(0,0,c.width,c.height),r(o),c}function Yl(o,e,t,n){const s={clientX:t*o.offsetWidth+o.offsetLeft,clientY:n*o.offsetHeight+o.offsetTop,view:o.ownerDocument.defaultView};window.dispatchEvent(new MouseEvent(e,s));const i=o.getBoundingClientRect();t=t*i.width+i.left,n=n*i.height+i.top;function a(r){if(r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE){const A=r.getBoundingClientRect();if(t>A.left&&t<A.right&&n>A.top&&n<A.bottom&&(r.dispatchEvent(new MouseEvent(e,s)),r instanceof HTMLInputElement&&r.type==="range"&&(e==="mousedown"||e==="click"))){const[c,l]=["min","max"].map(p=>parseFloat(r[p])),h=A.width,d=(t-A.x)/h;r.value=c+(l-c)*d,r.dispatchEvent(new InputEvent("input",{bubbles:!0}))}for(let c=0;c<r.childNodes.length;c++)a(r.childNodes[c])}}a(o)}const dn=new Fe,ds={type:"",data:dn},Io=new xn;class Jl extends Xt{listenToPointerEvents(e,t){const n=this,s=new xn,i=e.domElement;function a(r){r.stopPropagation();const A=e.domElement.getBoundingClientRect();dn.x=(r.clientX-A.left)/A.width*2-1,dn.y=-(r.clientY-A.top)/A.height*2+1,s.setFromCamera(dn,t);const c=s.intersectObjects(n.children,!1);if(c.length>0){const l=c[0],h=l.object,d=l.uv;ds.type=r.type,ds.data.set(d.x,1-d.y),h.dispatchEvent(ds)}}i.addEventListener("pointerdown",a),i.addEventListener("pointerup",a),i.addEventListener("pointermove",a),i.addEventListener("mousedown",a),i.addEventListener("mouseup",a),i.addEventListener("mousemove",a),i.addEventListener("click",a)}listenToXRControllerEvents(e){const t=this,n={move:"mousemove",select:"click",selectstart:"mousedown",selectend:"mouseup"};function s(i){const a=i.target;Io.setFromXRController(a);const r=Io.intersectObjects(t.children,!1);if(r.length>0){const A=r[0],c=A.object,l=A.uv;ds.type=n[i.type],ds.data.set(l.x,1-l.y),c.dispatchEvent(ds)}}e.addEventListener("move",s),e.addEventListener("select",s),e.addEventListener("selectstart",s),e.addEventListener("selectend",s)}}const Us=new N,Gs=new N,Eo=new Gi;class Wl extends qs{constructor(e,t=1,n=16711680){const s=new At,i=e.geometry.attributes.normal.count,a=new Re(i*2*3,3);s.setAttribute("position",a),super(s,new kt({color:n,toneMapped:!1})),this.object=e,this.size=t,this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}update(){this.object.updateMatrixWorld(!0),Eo.getNormalMatrix(this.object.matrixWorld);const e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n){const s=n.attributes.position,i=n.attributes.normal;let a=0;for(let r=0,A=s.count;r<A;r++)Us.fromBufferAttribute(s,r).applyMatrix4(e),Gs.fromBufferAttribute(i,r),Gs.applyMatrix3(Eo).normalize().multiplyScalar(this.size).add(Us),t.setXYZ(a,Us.x,Us.y,Us.z),a=a+1,t.setXYZ(a,Gs.x,Gs.y,Gs.z),a=a+1}t.needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}class Vl{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}new xi(-1,1,1,-1,0,1);class Xl extends At{constructor(){super(),this.setAttribute("position",new Re([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Re([0,2,0,0,2,0],2))}}new Xl;const ht={node:"node",material:"material",camera:"camera",light:"light"},ns="KHR_animation_pointer",Zl={CUBICSPLINE:void 0,LINEAR:bs,STEP:yn},Co=pt.findNode;let Bo=!1;class $l{constructor(e){this.parser=e,this.name=ns,this.animationPointerResolver=null}setAnimationPointerResolver(e){return this.animationPointerResolver=e,this}_patchPropertyBindingFindNode(){Bo||(Bo=!0,pt.findNode=function(e,t){if(t.startsWith(".materials.")){const n=t.substring(11).substring(t.indexOf(".")),s=n.indexOf("."),i=s<0?n:n.substring(0,s);let a=null;return e.traverse(r=>{a!==null||r.type!=="Mesh"&&r.type!=="SkinnedMesh"||r.material&&(r.material.uuid===i||r.material.name===i)&&(a=r.material,a!==null&&(n.endsWith(".map")?a=a.map:n.endsWith(".emissiveMap")&&(a=a.emissiveMap)))}),a}else if(t.startsWith(".nodes.")||t.startsWith(".lights.")||t.startsWith(".cameras.")){const n=t.split(".");let s;for(let i=1;i<n.length;i++){const a=n[i];if(a.length==36)s=e.getObjectByProperty("uuid",a);else if(s&&s[a]){const r=Number.parseInt(a);let A=a;r>=0&&(A=r),s=s[A]}else{const r=e.getObjectByName(a);r&&(s=r)}}if(!s){const i=Co(e,n[2]);return i||console.warn(ns+": Property binding not found",t,e,e.name,n),i}return s}return Co(e,t)})}loadAnimationTargetFromChannel(e){const t=e.target,n=t.node!==void 0?t.node:t.id;return this.parser.getDependency("node",n)}loadAnimationTargetFromChannelWithAnimationPointer(e){this._havePatchedPropertyBindings||this._patchPropertyBindingFindNode();const t=e.target,n=t.extensions&&t.extensions[ns]&&t.path&&t.path==="pointer";if(!n)return null;let s,i=ht.node,a;if(n){const A=t.extensions[ns];let c=A.pointer;if(!c){console.warn("Invalid path",A,t);return}if(c.startsWith("/materials/")?i=ht.material:c.startsWith("/extensions/KHR_lights_punctual/lights/")?i=ht.light:c.startsWith("/cameras/")&&(i=ht.camera),a=this._tryResolveTargetId(c,i),a===null||isNaN(a)){console.warn("Failed resolving animation node id: "+a,c);return}switch(i){case ht.material:const h=("/materials/"+a.toString()+"/").length,d=c.substring(0,h);switch(s=c.substring(h),s){case"pbrMetallicRoughness/baseColorFactor":s="color";break;case"pbrMetallicRoughness/roughnessFactor":s="roughness";break;case"pbrMetallicRoughness/metallicFactor":s="metalness";break;case"emissiveFactor":s="emissive";break;case"alphaCutoff":s="alphaTest";break;case"occlusionTexture/strength":s="aoMapIntensity";break;case"normalTexture/scale":s="normalScale";break;case"pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/scale":s="map/repeat";break;case"pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/offset":s="map/offset";break;case"emissiveTexture/extensions/KHR_texture_transform/scale":s="emissiveMap/repeat";break;case"emissiveTexture/extensions/KHR_texture_transform/offset":s="emissiveMap/offset";break;case"extensions/KHR_materials_emissive_strength/emissiveStrength":s="emissiveIntensity";break;case"extensions/KHR_materials_transmission/transmissionFactor":s="transmission";break;case"extensions/KHR_materials_ior/ior":s="ior";break;case"extensions/KHR_materials_volume/thicknessFactor":s="thickness";break;case"extensions/KHR_materials_volume/attenuationColor":s="attenuationColor";break;case"extensions/KHR_materials_volume/attenuationDistance":s="attenuationDistance";break;case"extensions/KHR_materials_iridescence/iridescenceFactor":s="iridescence";break;case"extensions/KHR_materials_iridescence/iridescenceIor":s="iridescenceIOR";break;case"extensions/KHR_materials_iridescence/iridescenceThicknessMinimum":s="iridescenceThicknessRange[0]";break;case"extensions/KHR_materials_iridescence/iridescenceThicknessMaximum":s="iridescenceThicknessRange[1]";break;case"extensions/KHR_materials_clearcoat/clearcoatFactor":s="clearcoat";break;case"extensions/KHR_materials_clearcoat/clearcoatRoughnessFactor":s="clearcoatRoughness";break;case"extensions/KHR_materials_sheen/sheenColorFactor":s="sheenColor";break;case"extensions/KHR_materials_sheen/sheenRoughnessFactor":s="sheenRoughness";break;case"extensions/KHR_materials_specular/specularFactor":s="specularIntensity";break;case"extensions/KHR_materials_specular/specularColorFactor":s="specularColor";break}c=d+s;break;case ht.node:const p=("/nodes/"+a.toString()+"/").length,u=c.substring(0,p);switch(s=c.substring(p),s){case"translation":s="position";break;case"rotation":s="quaternion";break;case"scale":s="scale";break;case"weights":s="morphTargetInfluences";break}c=u+s;break;case ht.light:const m=("/extensions/KHR_lights_punctual/lights/"+a.toString()+"/").length;switch(s=c.substring(m),s){case"color":break;case"intensity":break;case"spot/innerConeAngle":s="penumbra";break;case"spot/outerConeAngle":s="angle";break;case"range":s="distance";break}c="/lights/"+a.toString()+"/"+s;break;case ht.camera:const b=("/cameras/"+a.toString()+"/").length,I=c.substring(0,b);switch(s=c.substring(b),s){case"perspective/yfov":s="fov";break;case"perspective/znear":case"orthographic/znear":s="near";break;case"perspective/zfar":case"orthographic/zfar":s="far";break;case"perspective/aspect":s="aspect";break;case"orthographic/xmag":s="zoom";break;case"orthographic/ymag":s="zoom";break}c=I+s;break}const l=this.animationPointerResolver;l&&l.resolvePath&&(c=l.resolvePath(c)),t.extensions[ns].pointer=c}if(a===null||isNaN(a)){console.warn("Failed resolving animation node id: "+a,t);return}let r;return i===ht.node?r=this.parser.getDependency("node",a):i===ht.material?r=this.parser.getDependency("material",a):i===ht.light?r=this.parser.getDependency("light",a):i===ht.camera?r=this.parser.getDependency("camera",a):console.error("Unhandled type",i),r}createAnimationTracksWithAnimationPointer(e,t,n,s,i){if(!(i.extensions&&i.extensions[ns]&&i.path&&i.path==="pointer"))return null;let a=i.extensions[ns].pointer;if(!a)return null;const r=[];a=a.replaceAll("/",".");const A=a.split(".");var c=e.name!==void 0&&e.name!==null?e.name:e.uuid;if(A[2]=c,A[3]==="morphTargetInfluences"&&e.type==="Group"){for(const h of e.children)h instanceof Cn&&h.morphTargetInfluences&&(A[3]=h.name,A[4]="morphTargetInfluences",l(this.parser));return r}l(this.parser);function l(h){a=A.join(".");let d;switch(n.itemSize){case 1:d=Js;break;case 2:case 3:d=Ys;break;case 4:a.endsWith(".quaternion")?d=Ws:d=Mr;break}const p=s.interpolation!==void 0?Zl[s.interpolation]:bs;let u=h._getArrayFromAccessor(n);a.endsWith(".fov")&&(u=u.map(b=>b/Math.PI*180));const m=new d(a,t.array,u,p);if(p==="CUBICSPLINE"&&h._createCubicSplineTrackInterpolant(m),r.push(m),a&&n.itemSize===4&&a.startsWith(".materials.")&&a.endsWith(".color")){const b=new Float32Array(u.length/4);for(let C=0,E=u.length/4;C<E;C+=1)b[C]=u[C*4+3];const I=new d(a.replace(".color",".opacity"),t.array,b,p);p==="CUBICSPLINE"&&h._createCubicSplineTrackInterpolant(m),r.push(I)}}return r}_tryResolveTargetId(e,t){let n="";return t==="node"?n=e.substring(7):t==="material"?n=e.substring(11):t==="light"?n=e.substring(39):t==="camera"&&(n=e.substring(9)),n=n.substring(0,n.indexOf("/")),Number.parseInt(n)}loadAnimation(e){const t=this,n=this.parser.json,s=this.parser,i=n.animations[e],a=i.name?i.name:"animation_"+e,r=[],A=[],c=[],l=[],h=[];for(let d=0,p=i.channels.length;d<p;d++){const u=i.channels[d],m=i.samplers[u.sampler],b=u.target,I=i.parameters!==void 0?i.parameters[m.input]:m.input,C=i.parameters!==void 0?i.parameters[m.output]:m.output;let E=t.loadAnimationTargetFromChannelWithAnimationPointer(u);E||(E=t.loadAnimationTargetFromChannel(u)),r.push(E),A.push(s.getDependency("accessor",I)),c.push(s.getDependency("accessor",C)),l.push(m),h.push(b)}return Promise.all([Promise.all(r),Promise.all(A),Promise.all(c),Promise.all(l),Promise.all(h)]).then(function(d){const p=d[0],u=d[1],m=d[2],b=d[3],I=d[4],C=[];for(let E=0,w=p.length;E<w;E++){const y=p[E],S=u[E],R=m[E],x=b[E],D=I[E];if(y===void 0)continue;y.updateMatrix&&(y.updateMatrix(),y.matrixAutoUpdate=!0);let G=t.createAnimationTracksWithAnimationPointer(y,S,R,x,D);if(G||(G=s._createAnimationTracks(y,S,R,x,D)),G)for(let W=0;W<G.length;W++)C.push(G[W])}return new Bn(a,void 0,C)})}}const eh=Object.freeze(Object.defineProperty({__proto__:null,GLTFAnimationPointerExtension:$l},Symbol.toStringTag,{value:"Module"}));export{CA as DRACOLoader,Pa as EXRLoader,hc as EXRLoader$1,Cc as FBXLoader,ba as Font,LA as FontLoader,di as GLTFExporter,Dn as GLTFLoader,eh as GLTFLoaderAnimationPointer,_r as GroundedSkybox,zl as HTMLMesh,sl as HorizontalBlurShader,Jl as InteractiveGroup,Rt as KTX2Loader,ql as Line2,mo as LineGeometry,fi as LineMaterial,EA as MeshoptDecoder,Pc as OBJLoader,Hc as OrbitControls,Vl as Pass,tl as PositionalAudioHelper,Oa as RGBELoader,gc as RGBELoader$1,ys as Stats,FA as TextGeometry,GA as TransformControls,va as TransformControlsGizmo,Wl as VertexNormalsHelper,nl as VerticalBlurShader,Ul as XRControllerModelFactory,Pl as XRHandMeshModel,Gr as mergeVertices,$e as nodeFrame,ii as strToU8,lc as zipSync};
